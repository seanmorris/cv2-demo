!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},i={}.hasOwnProperty,a=/^\.\.?(\/|$)/,o=function(e,t){for(var n,r=[],i=(a.test(t)?e+"/"+t:t).split("/"),o=0,s=i.length;o<s;o++)".."===(n=i[o])?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t,r){var i,a={id:t,exports:{},hot:v&&v.createHot(t)};return n[t]=a,r(a.exports,(i=t,function(t){var n=o(s(i),t);return e.require(n,i)}),a),a.exports},l=function(e){var t=r[e];return t&&e!==t?l(t):e},c=function(e,r){null==r&&(r="/");var a=l(e);if(i.call(n,a))return n[a].exports;if(i.call(t,a))return u(a,t[a]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};c.alias=function(e,t){r[t]=e};var f=/\.[^.\/]+$/,d=/\/index(\.[^\/]+)?$/;c.register=c.define=function(e,a){if(e&&"object"==typeof e)for(var o in e)i.call(e,o)&&c.register(o,e[o]);else t[e]=a,delete n[e],function(e){if(f.test(e)){var t=e.replace(f,"");i.call(r,t)&&r[t].replace(f,"")!==t+"/index"||(r[t]=e)}if(d.test(e)){var n=e.replace(d,"");i.call(r,n)||(r[n]=e)}}(e)},c.list=function(){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};var v=e._hmr&&new e._hmr(function(e,t){return l(o(s(e),t))},c,t,n);c._cache=n,c.hmr=v&&v.wrap,c.brunch=!0,e.require=c}}(),function(){"undefined"==typeof window||window;var e=function(e,t,n){var r={},i=function(t,n){try{return e(n+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==n.indexOf("node_modules")){var a=n.split("/"),o=a.lastIndexOf("node_modules"),s=a.slice(0,o).join("/");return i(t,s)}}return r};return function(a){if(a in t&&(a=t[a]),a){if("."!==a[0]&&n){var o=i(a,n);if(o!==r)return o}return e(a)}}};require.register("curvature/base/Bag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Bag=void 0;var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.meta=Symbol("meta"),this.content=new Set,this._items=!1,this.changeCallback=e}var n,r,i;return n=t,(r=[{key:"add",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");this.content.has(e)||(this.content.add(e),this.changeCallback&&this.changeCallback(e,this.meta,1))}},{key:"remove",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");return this.content.has(e)?(this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,-1),e):(this.changeCallback&&this.changeCallback(void 0,this.meta,0),!1)}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(e){return e[0]})}}])&&e(n.prototype,r),i&&e(n,i),t}();t.Bag=n}()}),require.register("curvature/base/Bindable.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,i;return n=t,i=[{key:"isBindable",value:function(e){return!!e.___binding___&&e.___binding___===t}},{key:"makeBindable",value:function(e){var n=this;if(!e||!(e instanceof Object)||e.___binding___||e instanceof Node||e instanceof IntersectionObserver||Object.isSealed(e)||!Object.isExtensible(e))return e;if(e.___ref___)return e.___ref___;Object.defineProperty(e,"___ref___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"bindTo",{enumerable:!1,writable:!0}),Object.defineProperty(e,"isBound",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___deck___",{enumerable:!1,writable:!1,value:{}}),Object.defineProperty(e,"___binding___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___bindingAll___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___isBindable___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___executing___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___stack___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___stackTime___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___before___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___after___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___setCount___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___wrapped___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___object___",{enumerable:!1,writable:!1,value:e}),e.___isBindable___=t,e.___wrapped___={},e.___binding___={},e.___bindingAll___=[],e.___stack___=[],e.___stackTime___=[],e.___before___=[],e.___after___=[],e.___setCount___={};Object.defineProperty(e,"bindTo",{enumerable:!1,writable:!1,value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=!1;if(t instanceof Function&&(i=r||{},r=t,a=!0),i.delay>=0&&(r=n.wrapDelayCallback(r,i.delay)),i.throttle>=0&&(r=n.wrapThrottleCallback(r,i.throttle)),i.wait>=0&&(r=n.wrapWaitCallback(r,i.wait)),i.frame&&(r=n.wrapFrameCallback(r)),i.idle&&(r=n.wrapIdleCallback(r)),a){var o=e.___bindingAll___.length;for(var s in e.___bindingAll___.push(r),e)r(e[s],s,e,!1);return function(){e.___bindingAll___[o]=null}}e.___binding___[t]||(e.___binding___[t]=[]);var u=e.___binding___[t].length;e.___binding___[t].push(r),r(e[t],t,e,!1);var l=!1;return function(){l||(l=!0,e.___binding___[t]&&delete e.___binding___[t][u])}}}),Object.defineProperty(e,"bindChain",{enumerable:!1,writable:!1,value:function(t,r){var i=t.split("."),a=i.shift(),o=i.slice(0),s=[];return s.push(e.bindTo(a,function(e,t,i,a){var u=o.join(".");0!==o.length?(void 0===e&&(e=i[t]=n.makeBindable({})),s=s.concat(e.bindChain(u,r))):r(e,t,i,a)})),function(){return s.map(function(e){return e()})}}}),Object.defineProperty(e,"___before",{enumerable:!1,writable:!1,value:function(t){var n=e.___before___.length;e.___before___.push(t);var r=!1;return function(){r||(r=!0,delete e.___before___[n])}}}),Object.defineProperty(e,"___after",{enumerable:!1,writable:!1,value:function(t){var n=e.___after___.length;e.___after___.push(t);var r=!1;return function(){r||(r=!0,delete e.___after___[n])}}});for(var r in Object.defineProperty(e,"isBound",{enumerable:!1,writable:!1,value:function(){for(var t in e.___bindingAll___)if(e.___bindingAll___[t])return!0;for(var n in e.___binding___)for(var r in e.___binding___[n])if(e.___binding___[n][r])return!0;return!1}}),e)e[r]&&e[r]instanceof Object&&!e[r]instanceof Node&&!e[r]instanceof Promise&&(e[r]=t.makeBindable(e[r]));return e.___ref___=new Proxy(e,{deleteProperty:function(t,n){if(!(n in t))return!0;for(var r in e.___bindingAll___)e.___bindingAll___[r](void 0,n,t,!0,t[n]);if(n in e.___binding___)for(var i in e.___binding___[n])e.___binding___[n][i]&&e.___binding___[n][i](void 0,n,t,!0,t[n]);return delete t[n],!0},get:function(n,r){if(n[r]instanceof Function){if(n.___wrapped___[r])return n.___wrapped___[r];var i=Object.getOwnPropertyDescriptor(e,r);return!i||i.configurable||i.writable?(n.___wrapped___[r]=function(){for(var t in n.___executing___=r,n.___stack___.unshift(r),n.___before___)n.___before___[t](n,r,e);for(var i=e instanceof Promise?e:e.___ref___,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var u=n[r].apply(i,o);for(var l in n.___after___)n.___after___[l](n,r,e);return n.___executing___=null,n.___stack___.shift(),u},n.___wrapped___[r]):(n.___wrapped___[r]=n[r],n.___wrapped___[r])}return n[r]instanceof Object&&t.makeBindable(n[r]),n[r]},set:function(r,i,a){if(e.___deck___[i]===a)return!0;if("string"==typeof i&&"___"===i.substring(0,3)&&"___"===i.slice(-3))return!0;if(r[i]===a)return!0;if(a&&a instanceof Object&&!(a instanceof Node)&&a.___isBindable___!==t&&(a=t.makeBindable(a),n.isBindable(a)))for(var o in a)a[o]&&a[o]instanceof Object&&(a[o]=t.makeBindable(a[o]));for(var s in e.___deck___[i]=a,e.___bindingAll___)e.___bindingAll___[s]&&e.___bindingAll___[s](a,i,r,!1);var u=!1;if(i in e.___binding___)for(var l in e.___binding___[i])e.___binding___[i]&&e.___binding___[i][l]&&!1===e.___binding___[i][l](a,i,r,!1,r[i])&&(u=!0);if(delete e.___deck___[i],!u){var c=Object.getOwnPropertyDescriptor(r,i);r instanceof File&&"lastModifiedDate"==i||c&&!c.writable||r[i]!==a||(r[i]=a)}return Reflect.set(r,i,a)}}),e.___ref___}},{key:"clearBindings",value:function(e){e.___wrapped___={},e.___bindingAll___=[],e.___binding___={},e.___before___=[],e.___after___=[],e.___ref___={}}},{key:"resolve",value:function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.split("."),a=i[0];i.length;){if(r&&1===i.length)return[this.makeBindable(e),i.shift(),a];!(!(n=i.shift())in e)&&e[n]&&e[n]instanceof Object||(e[n]={}),e=this.makeBindable(e[n])}return[this.makeBindable(e),n,a]}},{key:"wrapDelayCallback",value:function(e,t){return function(n,r,i,a){setTimeout(function(){return e(n,r,i,a,i[r])},t)}}},{key:"wrapThrottleCallback",value:function(e,t){return function(e){var t=!1;return function(n,r,i,a){t||(e(n,r,i,a,i[r]),t=!0,setTimeout(function(){t=!1},t))}}(e)}},{key:"wrapWaitCallback",value:function(e,t){var n=!1;return function(r,i,a,o){n&&(clearTimeout(n),n=!1),n=setTimeout(function(){return e(r,i,a,o,a[i])},t)}}},{key:"wrapFrameCallback",value:function(e){return function(t,n,r,i,a){requestAnimationFrame(function(){return e(t,n,r,i,a)})}}},{key:"wrapIdleCallback",value:function(e){return function(t,n,r,i,a){requestIdleCallback(function(){return e(t,n,r,i,a)})}}}],(r=null)&&e(n.prototype,r),i&&e(n,i),t}();t.Bindable=n}()}),require.register("curvature/base/Cache.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,i;return n=t,i=[{key:"store",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",i=0;n&&(i=1e3*n+(new Date).getTime()),this.bucket||(this.bucket={}),this.bucket[r]||(this.bucket[r]={}),this.bucket[r][e]={expiration:i,value:t}}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard";return this.bucket&&this.bucket[n]&&this.bucket[n][e]&&(0==this.bucket[n][e].expiration||this.bucket[n][e].expiration>(new Date).getTime())?this.bucket[n][e].value:t}}],(r=null)&&e(n.prototype,r),i&&e(n,i),t}();t.Cache=n}()}),require.register("curvature/base/Config.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var e=n("Config");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"get",value:function(e){return this.data[e]}},{key:"set",value:function(e,t){return this.data[e]=t,this}},{key:"dump",value:function(){return this.data}},{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r in t){var i=t[r];for(var a in"string"==typeof i&&(i=JSON.parse(i)),i){var o=i[a];return this.data[a]=o}}return this}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();t.Config=i,i.data=e.Config||{}}()}),require.register("curvature/base/Dom.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,i;return n=t,i=[{key:"mapTags",value:function(e,t,n,r,i){var a=[],o=!0;r&&(o=!1);var s=!1,u=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e,n){if(!o){if(e!==r)return NodeFilter.FILTER_SKIP;o=!0}return i&&e===i&&(s=!0),s?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;u.nextNode();)a.push(n(u.currentNode,u));return a}},{key:"dispatchEvent",value:function(e,n){e.dispatchEvent(n),t.mapTags(e,!1,function(e){e.dispatchEvent(n)})}}],(r=null)&&e(n.prototype,r),i&&e(n,i),t}();t.Dom=n}()}),require.register("curvature/base/Import.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Import=void 0;var n=function(){function t(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),console.log(this.__proto__.constructor),this.__proto__.constructor.instances[e])return this.__proto__.constructor.instances[e];this.uri=e;var n=document.createElement("script");n.setAttribute("src",this.uri),this.ready=new Promise(function(e,t){n.addEventListener("load",function(t){return e(n)}),n.addEventListener("error",function(e){console.error(e),t(e)})}),this.tag=n,this.attached=!1,this.__proto__.constructor.instances[e]=this}var n,r,i;return n=t,(r=[{key:"attach",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.attached||((e=e||document.head).append(this.tag),this.attached=!0)}}])&&e(n.prototype,r),i&&e(n,i),t}();t.Import=n,n.instances={}}()}),require.register("curvature/base/Model.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var e=n("./Cache"),r=n("./Bindable");n("./Repository");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.repository=e}var n,a,o;return n=t,(a=[{key:"consume",value:function(n){for(var i in n){var a=n[i];if(n[i]instanceof Object&&n[i].class&&n[i].publicId){var o="".concat(n[i].class,"::").concat(n[i].publidId),s=e.Cache.load(o,!1,"model-type-repo");a=r.Bindable.makeBindable(new t(this.repository)),s&&(a=s),a.consume(n[i]),e.Cache.store(o,a,0,"model-type-repo")}this[i]=a}}}])&&i(n.prototype,a),o&&i(n,o),t}();t.Model=a}()}),require.register("curvature/base/Repository.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Repository=void 0;var e=n("./Bindable"),r=n("./Router"),i=n("./Cache"),a=n("./Model"),o=n("./Bag"),s=n("../form/Form"),u=n("../form/multiField/FormWrapper");function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e}var n,f,d;return n=t,d=[{key:"loadPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request(this.uri,e).then(function(e){return e})}},{key:"domCache",value:function(e,t){}},{key:"load",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.objects=this.objects||{},this.objects[this.uri]=this.objects[this.uri]||{},this.objects[this.uri][e]?Promise.resolve(this.objects[this.uri][e]):this.request(this.uri+"/"+e).then(function(e){})}},{key:"form",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.uri+"/create";return e&&(t=this.uri+"/"+e+"/edit"),this.request(t).then(function(e){return e})}},{key:"clearCache",value:function(){this.objects&&this.objects[this.uri]&&(this.objects[this.uri]={})}},{key:"encode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var r in n||(n=new FormData),e){var i=r;t&&(i="".concat(t,"[").concat(i,"]")),e[r]&&"object"!==l(e[r])?n.append(i,e[r]):this.encode(e[r],i,n)}return n}},{key:"onResponse",value:function(e){return this._onResponse||(this._onResponse=new o.Bag),this._onResponse.add(e)}},{key:"request",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u="GET",l=null,c={};r&&(c=r),this._onResponse||(this._onResponse=new o.Bag),this.runningRequests||(this.runningRequests={}),c.api=c.api||"json",t=Object.keys(c).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(c[e])}).join("&");var f;if(f=e+"?"+t,!i&&this.runningRequests[f])return this.runningRequests[f];i&&(a=!1,u="POST",l=i instanceof FormData?i:this.encode(i));var d=new XMLHttpRequest;if("responseType"in s&&(d.responseType=s.responseType),!i&&a&&this.cache&&this.cache[f])return Promise.resolve(this.cache[f]);var v='script[data-uri="'+f+'"]',p=document.querySelector(v);if(!i&&a&&p){var h=JSON.parse(p.innerText);return Promise.resolve(h)}d.withCredentials=!("withCredentials"in s)||s.withCredentials,document.createElement("a").href=f,i||(d.timeout=s.timeout||15e3,this.xhrs[f]=d);var g=new Promise(function(e,t){if(i&&"progressUp"in s&&(d.upload.onprogress=s.progressUp),"progressDown"in s&&(d.onprogress=s.progressDown),d.onreadystatechange=function(){var r;if(4===d.readyState)if(delete n.xhrs[f],delete n.runningRequests[f],n.cache||(n.cache={}),"application/json"==d.getResponseHeader("Content-Type")||"application/json; charset=utf-8"==d.getResponseHeader("Content-Type")||"text/json"==d.getResponseHeader("Content-Type")||"text/json; charset=utf-8"==d.getResponseHeader("Content-Type"))if((r=JSON.parse(d.responseText))&&0==r.code){var i=document.querySelector('script[data-uri="'+f+'"]');(window.prerenderer||navigator.userAgent.match(/prerender/i))&&(window.prerenderer=window.prerenderer||!0,i||((i=document.createElement("script")).type="text/json",i.setAttribute("data-hack","application/ld+json-NOT!"),i.setAttribute("data-uri",f),document.head.appendChild(i)),i.innerText=JSON.stringify(r));var a=n._onResponse.items();for(var o in a)a[o](r,!0);r._http=d.status,200===d.status?e(r):t(r)}else{var s=n._onResponse.items();for(var u in s)s[u](r,!0);t(r)}else{var l=n._onResponse.items();for(var c in l)l[c](d,!0);200===d.status?e(d):t(d)}},d.open(u,f,!0),s.headers)for(var r in s.headers)d.setRequestHeader(r,s.headers[r]);d.send(l)});return i||(this.runningRequests[f]=g),g}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:/^.$/;for(var t in this.xhrs)this.xhrs[t]&&t.match(e)&&(this.xhrs[t].abort(),delete this.xhrs[t])}}],(f=[{key:"get",value:function(e){var n=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=this.uri+"/"+e,u=i.Cache.load(s+r.Router.queryToString(r.Router.queryOver(o),!0),!1,"model-uri-repo");return!a&&u?Promise.resolve(u):t.request(s,o).then(function(e){return n.extractModel(e.body)})}},{key:"page",value:function(){var e=this,n=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1?arguments[1]:void 0);return t.request(this.uri,n).then(function(t){var n=[];for(var r in t.body){var i=t.body[r];n.push(e.extractModel(i))}return t.body=n,t})}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.uri+"/create";return e&&(i=this.uri+"/"+e+"/edit"),n?t.request(i,{api:"json"},n).then(function(e){return e.body}):t.request(i).then(function(e){var t=new s.Form(e.meta.form,r);return new u.FormWrapper(t,i,"POST",r)})}},{key:"extractModel",value:function(t){var n=e.Bindable.makeBindable(new a.Model(this));n.consume(t);this.uri,n.publicId;if(n.class){var r="".concat(n.class,"::").concat(n.publidId);i.Cache.load(r,!1,"model-type-repo")}return n}}])&&c(n.prototype,f),d&&c(n,d),t}();t.Repository=f,f.xhrs=[]}()}),require.register("curvature/base/Router.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var e=n("./View"),r=(n("./Cache"),n("Config"));function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,a,o;return n=t,o=[{key:"wait",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).addEventListener(n,function(){t.listen(e)})}},{key:"listen",value:function(e){var n=this,r=[location.toString()],i=history.length,a=location.pathname+location.search;location.hash&&(a+=location.hash),Object.assign(t.query,t.queryOver({})),window.addEventListener("popstate",function(a){for(var o in a.preventDefault(),r.length&&i==history.length?location.toString()==r[r.length-2]?r.pop():r.push(location.toString()):(r.push(location.toString()),i=history.length),n.match(location.pathname,e),n.query)delete n.query[o];Object.assign(t.query,t.queryOver({}))}),this.go(a)}},{key:"go",value:function(e,n){var i=this;r.Config&&void 0!==r.Config.title&&(document.title=r.Config.title),setTimeout(function(){for(var r in 2===n?history.replaceState(null,null,e):history.pushState(null,null,e),n||(!1===n&&(i.path=null),window.dispatchEvent(new Event("popstate")),"#"===e.substring(0,1)&&window.dispatchEvent(new HashChangeEvent("hashchange"))),i.query)delete i.query[r];Object.assign(t.query,t.queryOver({}))},0)}},{key:"match",value:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.path!==t||i){var a=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{result:y,path:t,view:n}}),o=n.args.content,s=n.routes;for(var u in this.path=t,this.query)delete this.query[u];var l=new URLSearchParams(location.search);this.queryString=location.search;var c=!0,f=!1,d=void 0;try{for(var v,p=l[Symbol.iterator]();!(c=(v=p.next()).done);c=!0){var h=v.value;this.query[h[0]]=h[1]}}catch(e){f=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}var g={},b=!1,y="";for(var m in t=t.substr(1).split("/"),this.query)g[m]=this.query[m];e:for(var _ in s){var w=_.split("/");if(!(w.length<t.length&&"*"!==w[w.length-1])){for(var k in w)if("%"==w[k].substr(0,1)){var O=null,j=/^%(\w+)\??/.exec(w[k]);if(j&&j[1]&&(O=j[1]),!O)throw new Error("".concat(w[k],' is not a valid argument segment in route "').concat(_,'"'));if(t[k])g[O]=t[k];else{if("?"!=w[k].substr(w[k].length-1,1))continue e;g[O]=""}}else if("*"!==w[k]&&t[k]!==w[k])continue e;if(!i&&o&&s[_]instanceof Object&&o instanceof s[_]&&!(s[_]instanceof Promise)&&o.update(g))return n.args.content=o,!0;b=_,y=s[_],"*"===w[w.length-1]&&(g.pathparts=t.slice(w.length-1));break}}if(document.dispatchEvent(a),b in s&&s[b]instanceof Object&&s[b].isView&&s[b].isView())(y=new s[b](g)).root=function(){return n};else if(s[b]instanceof Function){y="";var T=s[b](g);T instanceof Promise?(y=!1,T.then(function(e){r.update(n,t,e)}).catch(function(e){r.update(n,t,e)})):y=T}else s[b]instanceof Promise?(y=!1,s[b].then(function(e){r.update(n,t,e)}).catch(function(e){r.update(n,t,e)})):s[b]instanceof Object?y=new s[b](g):"string"==typeof s[b]&&(y=s[b]);return this.update(n,t,y),y instanceof e.View&&(y.pause(!1),y.update(g,i)),!1!==b}}},{key:"update",value:function(t,n,r){var i=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:n,view:t}}),a=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:n,view:t}});!1!==r&&(t.args.content instanceof e.View&&t.args.content.remove(),document.dispatchEvent(i)&&(t.args.content=r),document.dispatchEvent(a))}},{key:"clearCache",value:function(){}},{key:"queryOver",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(location.search),n={},r=[],i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r[l[0]]=l[1]}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}for(var c in r)n[c]=r[c];for(var f in e)n[f]=e[f];return delete n.api,n}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=e;for(var i in t||(r=this.queryOver(e)),r)""!==r[i]&&n.push(i+"="+encodeURIComponent(r[i]));return n.join("&")}},{key:"setQuery",value:function(e,t,n){var r=this.queryOver();r[e]=t,void 0===t&&delete r[e];var i=this.queryToString(r,!0);this.go(location.pathname+(i?"?"+i:""),n)}}],(a=null)&&i(n.prototype,a),o&&i(n,o),t}();t.Router=a,Object.defineProperty(a,"query",{configurable:!1,writeable:!1,value:{}})}()}),require.register("curvature/base/RuleSet.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0;n("./Dom");var e=n("./Tag"),r=n("./View");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,a,o;return n=t,o=[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var i=this.globalRules[n][r],a=this.wrap(e,i,t),o=e.querySelectorAll(n),s=!0,u=!1,l=void 0;try{for(var c,f=o[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){a(c.value)}}catch(e){u=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=function(t,n){return function(){return n.removeEventListener(t,r),e.apply()}}(t,n);n.addEventListener(t,r)}},{key:"wrap",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(n instanceof r.View||n&&n.prototype&&n.prototype instanceof r.View)&&(n=function(e){return function(){return e}}(n)),function(t){for(var a in void 0===t.___cvApplied___&&Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!1,value:[]}),t.___cvApplied___)if(n==t.___cvApplied___[a])return;var o,s;i&&(o=s=i,i.viewList&&(s=i.viewList.parent));var u,l=new e.Tag(t,s,null,void 0,o),c=l.element.parentNode,f=l.element.nextSibling,d=n(l);if(!1!==d&&t.___cvApplied___.push(n),d instanceof HTMLElement&&(d=new e.Tag(d)),d instanceof e.Tag){if(!d.element.contains(l.element)){for(;l.element.firstChild;)d.element.appendChild(l.element.firstChild);l.remove()}f?c.insertBefore(d.element,f):c.appendChild(d.element)}d&&d.prototype&&d.prototype instanceof r.View&&(d=new d),d instanceof r.View&&(i&&(i.cleanup.push((u=d,function(){u.remove()})),d.parent=i,i.cleanup.push(i.args.bindTo(function(e,t,n){n[t]=e,d.args[t]=e})),i.cleanup.push(d.args.bindTo(function(e,t,n,r){n[t]=e,i.args[t]=e}))),l.clear(),d.render(l.element))}}}],(a=[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in t.apply(e,n),this.rules)for(var i in this.rules[r]){var a=this.rules[r][i],o=t.wrap(e,a,n),s=e.querySelectorAll(r),u=!0,l=!1,c=void 0;try{for(var f,d=s[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){o(f.value)}}catch(e){l=!0,c=e}finally{try{u||null==d.return||d.return()}finally{if(l)throw c}}}}}])&&i(n.prototype,a),o&&i(n,o),t}();t.RuleSet=a}()}),require.register("curvature/base/Tag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var e=n("./Bindable");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function t(n,r,i,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e.Bindable.makeBindable(n),this.parent=r,this.direct=o,this.ref=i,this.index=a,this.cleanup=[],this.proxy=e.Bindable.makeBindable(this)}var n,i,a;return n=t,(i=[{key:"remove",value:function(){var t;for(e.Bindable.clearBindings(this);t=this.cleanup.shift();)t();if(this.clear(),this.element){var n=new Event("cvDomDetached");this.element.dispatchEvent(n),this.element.remove(),this.element=this.ref=this.parent=null}}},{key:"clear",value:function(){if(this.element)for(var e=new Event("cvDomDetached");this.element.firstChild;)this.element.firstChild.dispatchEvent(e),this.element.removeChild(this.element.firstChild)}},{key:"pause",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}])&&r(n.prototype,i),a&&r(n,a),t}();t.Tag=i}()}),require.register("curvature/base/View.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=n("./Bindable"),r=n("./ViewList"),i=n("./Router"),a=n("./Dom"),o=(n("./Tag"),n("./Bag")),s=n("./RuleSet");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var d=Symbol("dontParse"),v=function(){function t(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"___VIEW___",{enumerable:!1,writable:!0}),this.___VIEW___=t,Object.defineProperty(this,"args",{configurable:!1,writable:!1,value:e.Bindable.makeBindable(r)});var i=this;this.args._id||Object.defineProperty(this.args,"_id",{configurable:!1,get:function(){return i._id}}),this.template="",this.document="",this.firstNode=null,this.lastNode=null,this.nodes=null,this.mainView=null,this.cleanup=[],this._onRemove=new o.Bag(function(e,t,n){}),this.attach=new o.Bag(function(e,t,n){}),this.detach=new o.Bag(function(e,t,n){}),this.eventCleanup=[],this.parent=null,this.viewList=null,this.viewLists={},this.withViews={},this.tags=e.Bindable.makeBindable({}),this.intervals=[],this.timeouts=[],this.frames=[],this.ruleSet=new s.RuleSet,this.preRuleSet=new s.RuleSet,this.subBindings={},this.subTemplates={},this.removed=!1,this.preserve=!1,this.interpolateRegex=/(\[\[((?:\$+)?[\w\.\|]+)\]\])/g,this.rendered=new Promise(function(e,t){Object.defineProperty(n,"renderComplete",{configurable:!1,writable:!1,value:e})})}return f(t,[{key:"_id",get:function(){return this.__id||Object.defineProperty(this,"__id",{configurable:!1,writable:!1,value:this.uuid()}),this.__id}}]),f(t,[{key:"onFrame",value:function(e){var t=this,n=!1;return requestAnimationFrame(function(){return function r(i){t.removed||n||(e(Date.now()),requestAnimationFrame(r))}(Date.now())}),function(){n=!0}}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(function(){return e(Date.now())})}},{key:"onIdle",value:function(e){return requestIdleCallback(function(){return e(Date.now())})}},{key:"onTimeout",value:function(e,t){var n=this,r=function(){n.timeouts[a].fired=!0,n.timeouts[a].callback=null,t()},i=setTimeout(r,e),a=this.timeouts.length;return this.timeouts.push({timeout:i,callback:r,time:e,fired:!1,created:(new Date).getTime(),paused:!1}),i}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.timeouts)e===this.timeouts[t].timeout&&(clearTimeout(this.timeouts[t].timeout),delete this.timeouts[t])})},{key:"onInterval",value:function(e,t){var n=setInterval(t,e);return this.intervals.push({timeout:n,callback:t,time:e,paused:!1}),n}},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])})},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){for(var t in this.timeouts)this.timeouts[t].fired?delete this.timeouts[t]:clearTimeout(this.timeouts[t].timeout);for(var n in this.intervals)clearInterval(this.intervals[n].timeout)}else{for(var r in this.timeouts)this.timeouts[r].timeout.paused&&(this.timeouts[r].fired?delete this.timeouts[r]:this.timeouts[r].timeout=setTimeout(this.timeouts[r].callback,this.timeouts[r].time));for(var i in this.intervals)this.intervals[i].timeout.paused&&(this.intervals[i].timeout.paused=!1,this.intervals[i].timeout=setInterval(this.intervals[i].callback,this.intervals[i].time))}for(var a in this.viewLists){if(!this.viewLists[a])return;this.viewLists[a].pause(!!e)}for(var o in this.tags)if(Array.isArray(this.tags[o]))for(var s in this.tags[o])this.tags[o][s].pause(!!e);else this.tags[o].pause(!!e)}},{key:"render",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n instanceof t&&(n=n.firstNode.parentNode),r instanceof t&&(r=r.firstNode),this.firstNode)return this.reRender(n,r);var i=this.template instanceof DocumentFragment?this.template.cloneNode(!0):t.templates.has(this.template),a=i?this.template instanceof DocumentFragment?i:t.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(i||this.template instanceof DocumentFragment||t.templates.set(this.template,a.cloneNode(!0)),this.mainView||this.preRuleSet.apply(a,this),this.mapTags(a),this.mainView||this.ruleSet.apply(a,this),this.nodes=[],!0===window.devmode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(l(Array.from(a.childNodes)),[this.lastNode])),n){var o=n.getRootNode(),s=!1;if(o===document&&(s=!0,"external"),r?(n.insertBefore(this.firstNode,r),n.insertBefore(this.lastNode,r)):(n.appendChild(this.firstNode),n.appendChild(this.lastNode)),n.insertBefore(a,this.lastNode),0,s){this.attached(o,n);var u=this.attach.items();for(var c in u)u[c](o,n);this.nodes.filter(function(e){return e.nodeType!==Node.COMMENT_NODE}).map(function(e){e.dispatchEvent(new Event("cvDomAttached",{bubbles:!0,target:e}))})}}return this.renderComplete(this.nodes),this.postRender(n),this.nodes}},{key:"reRender",value:function(e,t){var n=new DocumentFragment;if(this.firstNode.getRootNode()===document){var r=this.detach.items();for(var i in r)r[i]();this.nodes.filter(function(e){return e.nodeType===Node.ELEMENT_NODE}).map(function(e){e.dispatchEvent(new Event("cvDomDetached",{bubbles:!0,target:e}))})}if(n.append.apply(n,l(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(n,this.lastNode);var a=e.getRootNode();if(a===document){this.nodes.filter(function(e){return e.nodeType===Node.ELEMENT_NODE}).map(function(e){e.dispatchEvent(new Event("cvDomAttached",{bubbles:!0,target:e}))});var o=this.attach.items();for(var s in o)o[s](a,e)}}return this.nodes}},{key:"mapTags",value:function(e){var t=this;a.Dom.mapTags(e,!1,function(e,n){e[d]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e:t.mapInterpolatableTag(e))!==n.currentNode&&(n.currentNode=e)})}},{key:"mapExpandableTag",value:function(t){var n=this,r=t.getAttribute("cv-expand"),i=e.Bindable.makeBindable(this.args[r]||{});t.removeAttribute("cv-expand");var a=function(r){if("name"===r||"type"===r)return"continue";var a=i.bindTo(r,function(e,t){return function(n){e.setAttribute(t,n)}}(t,r));n.onRemove(function(){a(),i.isBound()&&e.Bindable.clearBindings(i)})};for(var o in i)a(o);return t}},{key:"compileExpandableTag",value:function(t){return function(n){var r=t.cloneNode(!0),i=r.getAttribute("cv-expand"),a=e.Bindable.makeBindable(n.args[i]||{});r.removeAttribute("cv-expand");var o=function(t){if("name"===t||"type"===t)return"continue";var i=a.bindTo(t,function(e,t){return function(n){e.setAttribute(t,n)}}(r,t));n.onRemove(function(){i(),a.isBound()&&e.Bindable.clearBindings(a)})};for(var s in a)o(s);return r}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(t){var n=t.getAttribute("cv-attr").split(",").map(function(e){return e.split(":")});return t.removeAttribute("cv-attr"),function(r){var i=t.cloneNode(!0),a=function(t){var a=n[t][1],o=u(e.Bindable.resolve(r.args,a,!0),2),s=o[0],l=o[1],c=n[t][0];r.onRemove(s.bindTo(l,function(e){null!=e?i.setAttribute(c,e):i.setAttribute(c,"")}))};for(var o in n)a(o);return i}}},{key:"mapInterpolatableTag",value:function(n){var r=this,i=this.interpolateRegex;if(n.nodeType===Node.TEXT_NODE){var a=n.nodeValue;if(!this.interpolatable(a))return n;for(var o,s=0,l=function(){var i=o[2],l=!1,c=!1,f=i.split("|"),v=!1;if(f.length>1&&(v=r.stringTransformer(f.slice(1)),i=f[0]),"$$"===i.substr(0,2)&&(l=!0,c=!0,i=i.substr(2)),"$"===i.substr(0,1)&&(l=!0,i=i.substr(1)),"000"===i.substr(0,3))return expand=!0,i=i.substr(3),"continue";var p=a.substring(s,o.index);s=o.index+o[1].length;var h=document.createTextNode(p);h[d]=!0,n.parentNode.insertBefore(h,n);var g=void 0;(g=l?document.createElement("div"):document.createTextNode(""))[d]=!0;var b=r.args,y=i;if(i.match(/\./)){var m=u(e.Bindable.resolve(r.args,i,!0),2);b=m[0],y=m[1]}n.parentNode.insertBefore(g,n);var _=b.bindTo(y,function(e,i,a){if(a[i]instanceof t&&a[i]!==e&&(a[i].preserve||a[i].remove()),g.nodeValue="",c&&!(e instanceof t)){var o=e;console.log(o),(e=new t(r.args,r)).template=o}if(e instanceof t){var s=function(t){e.attached(t)};r.attach.add(s),e.render(n.parentNode,g);var u=function(){e.preserve||e.remove()};r.onRemove(u),e.onRemove(function(){r.attach.remove(s),r._onRemove.remove(u)})}else v&&(e=v(e)),e instanceof Object&&e.__toString instanceof Function&&(e=e.__toString()),l?g.innerHTML=e:g.nodeValue=e,g[d]=!0});r.onRemove(function(){_(),b.isBound()||e.Bindable.clearBindings(b)})};o=i.exec(a);)l();var c=a.substring(s),f=document.createTextNode(c);f[d]=!0,n.parentNode.insertBefore(f,n),n.nodeValue=""}if(n.nodeType===Node.ELEMENT_NODE)for(var v=function(t){if(!r.interpolatable(n.attributes[t].value))return"continue";for(var a=0,o=void 0,s=n.attributes[t].value,l=n.attributes[t],c={},f=[];o=i.exec(s);)f.push(s.substring(a,o.index)),c[o[2]]||(c[o[2]]=[]),c[o[2]].push(f.length),f.push(o[1]),a=o.index+o[1].length;f.push(s.substring(a));var d=function(t){var i=r.args,a=t,o=t.split("|"),s=!1,d=t;if(o.length>1&&(s=r.stringTransformer(o.slice(1)),a=o[0]),a.match(/\./)){var v=u(e.Bindable.resolve(r.args,a,!0),2);i=v[0],a=v[1]}c[d];r.onRemove(i.bindTo(a,function(e,t,r,i){for(var o in s&&(e=s(e)),c)for(var u in c[d])f[c[d][u]]=r[o],t===a&&(f[c[d][u]]=e);n.setAttribute(l.name,f.join(""))})),r.onRemove(function(){i.isBound()||e.Bindable.clearBindings(i)})};for(var v in c)d(v)},p=0;p<n.attributes.length;p++)v(p);return n}},{key:"mapRefTag",value:function(e){var t=u(e.getAttribute("cv-ref").split(":"),3),n=t[0],r=t[1],i=t[2];r||(r="curvature/base/Tag");var a=this.stringToClass(r);e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){e.___tag___=null,e.remove()});var o=this;this.viewList&&(o=this.viewList.parent);var s=new a(e,this,n,void 0,this);for(e.___tag___=s,this.tags[n]=e;o;){o.parent;var l=this.args[i];void 0!==l?(o.tags[n]||(o.tags[n]=[]),o.tags[n][l]=s):o.tags[n]=s,o=o.parent}return e}},{key:"mapBindTag",value:function(n){var r=this,i=n.getAttribute("cv-bind"),a=this.args,o=i,s=null;if(i.match(/\./)){var l=u(e.Bindable.resolve(this.args,i,!0),3);a=l[0],o=l[1],s=l[2]}a!==this.args&&(this.subBindings[i]=this.subBindings[i]||[],this.onRemove(this.args.bindTo(s,function(){for(;r.subBindings.length;)r.subBindings.shift()()})));var c=!1;"$"===o.substr(0,1)&&(o=o.substr(1),c=!0);var f=a.bindTo(o,function(e,i,a,o,s){s instanceof t&&s!==e&&s.remove();var u=new CustomEvent("cvAutoChanged",{bubbles:!0});if("INPUT"===n.tagName||"SELECT"===n.tagName||"TEXTAREA"===n.tagName){var l=n.getAttribute("type");if(l&&"checkbox"===l.toLowerCase())n.checked=!!e,n.dispatchEvent(u);else if(l&&"radio"===l.toLowerCase())n.checked=e==n.value,n.dispatchEvent(u);else if("file"!==l){if("SELECT"===n.tagName)for(var f in n.options){n.options[f].value==e&&(n.selectedIndex=f)}n.value=null==e?"":e,n.dispatchEvent(u)}}else{var d=!0,v=!1,p=void 0;try{for(var h,g=n.childNodes[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){h.value.remove()}}catch(e){v=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(v)throw p}}if(e instanceof t){var b=function(t){e.attached(t)};r.attach.add(b),e.render(n),e.onRemove(function(){return r.attach.remove(b)})}else c?n.innerHTML=e:n.textContent=e}});a!==this.args&&this.subBindings[i].push(f),this.onRemove(f);var d=n.getAttribute("type"),v=n.getAttribute("multiple"),p=function(e){if(e.target===n)if(d&&"checkbox"===d.toLowerCase())n.checked?a[o]=e.target.getAttribute("value"):a[o]=!1;else if("file"===d&&v){var t=Array.from(e.target.files),r=a[o]||a.___deck___[o];if(r&&t.length){var i=function(e){if(t[e]!==r[e])return t[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},r[e]=t[e],"break"};for(var s in t){if("break"===i(s))break}}else a[o]=t}else if("file"!==d||v)a[o]=e.target.value;else{var u=e.target.files.item(0);u.toJSON=function(){return{name:u.name,size:u.size,type:u.type,date:u.lastModified}},a[o]=u}};return"file"===d||"radio"===d?n.addEventListener("change",p):(n.addEventListener("input",p),n.addEventListener("change",p),n.addEventListener("value-changed",p)),this.onRemove(function(e,t){return function(){"file"===d||"radio"===d?e.removeEventListener("change",p):(e.removeEventListener("input",p),e.removeEventListener("change",p),e.removeEventListener("value-changed",p)),e=void 0,void 0}}(n)),n.removeAttribute("cv-bind"),n}},{key:"mapOnTag",value:function(e){var t=this;String(e.getAttribute("cv-on")).split(";").map(function(e){return e.split(":")}).map(function(n){var r=(n=n.map(function(e){return e.trim()}))[0].trim();if(r){var i,a=n[1],o=String(n[2]||""),s=[],u=/(\w+)(?:\(([$\w\s'",]+)\))?/.exec(a);if(!u)throw new Error("Invalid event method referent: "+e.getAttribute("cv-on"));u.length&&(a=u[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),u[2]&&(s=u[2].split(",").map(function(e){return e.trim()})));for(var c=t;c;){if("function"==typeof c[a])if("break"===function(){var e=c,t=a;return i=function(){e[t].apply(e,arguments)},"break"}())break;if(c.viewList&&c.viewList.parent)c=c.viewList.parent;else{if(!c.parent)break;c=c.parent}}var f=function(n){var r=s.map(function(r){var i;return parseInt(r)==r?r:"event"===r||"$event"===r?n:"$view"===r?c:"$tag"===r?e:"$parent"===r?t.parent:"$subview"===r?t:r in t.args?t.args[r]:(i=/^['"](\w+?)["']$/.exec(r))?i[1]:void 0});if("function"!=typeof i)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));i.apply(void 0,l(r))},d={};switch(o.includes("p")?d.passive=!0:o.includes("P")&&(d.passive=!1),o.includes("c")?d.capture=!0:o.includes("C")&&(d.capture=!1),o.includes("o")?d.once=!0:o.includes("O")&&(d.once=!1),r){case"_init":f();break;case"_attach":t.attach.add(f);break;case"_detach":t.detach.add(f);break;default:e.addEventListener(r,f,d),t.onRemove(function(){e.removeEventListener(r,f,d)})}return[r,a,s]}});return e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var n=function(n){n.preventDefault(),"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?i.Router.go(e.getAttribute("href")):window.open(e.getAttribute("href",t))};return e.addEventListener("click",n),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,n)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var n=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(r){var i=e.cloneNode(!0);return i.setAttribute("href",n),i.addEventListener("click",t.linkClicked),r.onRemove(function(){return i.removeEventListener(t.linkClicked)}),i}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),n=window.prerenderer||navigator.userAgent.match(/prerender/i);return n&&(window.prerenderer=window.prerenderer||!0),("never"===t&&n||"only"===t&&!n)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(n){var r=this,i=n.getAttribute("cv-with"),a=n.getAttribute("cv-carry");n.removeAttribute("cv-with"),n.removeAttribute("cv-carry");var o=new DocumentFragment;Array.from(n.childNodes).map(function(e){return o.appendChild(e)});var s=[];a&&(s=a.split(",").map(function(e){return e.trim()}));var u=this.args.bindTo(i,function(i,a,u,l){for(r.withViews[a]&&r.withViews[a].remove();n.firstChild;)n.removeChild(n.firstChild);var c=new t({},r);r.onRemove(function(e){return function(){e.remove()}}(c)),c.template=o,c.parent=r;var f=function(e){var t=r.args.bindTo(s[e],function(e,t){c.args[t]=e});c.onRemove(t),r.onRemove(function(){t(),c.remove()})};for(var d in s)f(d);var v=function(t){var n=i.bindTo(t,function(e,t){c.args[t]=e});r.onRemove(function(){n(),i.isBound()||e.Bindable.clearBindings(i),c.remove()}),c.onRemove(function(){n(),i.isBound()||e.Bindable.clearBindings(i)})};for(var p in i)v(p);c.render(n),r.withViews[a]=c});return this.onRemove(u),n}},{key:"mapEachTag",value:function(e){var t=this,n=e.getAttribute("cv-each");e.removeAttribute("cv-each");var i=new DocumentFragment;Array.from(e.childNodes).map(function(e){return i.appendChild(e)});var a=u(n.split(":"),3),o=a[0],s=a[1],l=a[2],c=this.args.bindTo(o,function(n,a,u,c,f){t.viewLists[o]&&t.viewLists[o].remove();var d=new r.ViewList(i,s,n,t,l),v=function(){return d.remove()};t.onRemove(v),d.onRemove(function(){return t._onRemove.remove(v)});var p=t.args.bindTo(function(e,t,n,r){"_id"!==t&&(d.args.subArgs[t]=e)}),h=d.args.bindTo(function(e,n,r,i,a){"_id"!==n&&"value"!==n&&"___"!==n.substring(0,3)&&n in t.args&&(t.args[n]=e)});for(t.onRemove(p),t.onRemove(h);e.firstChild;)e.removeChild(e.firstChild);t.viewLists[o]=d,d.render(e)});return this.onRemove(c),e}},{key:"mapIfTag",value:function(n){var r=n,i=r.getAttribute("cv-if"),a=!1;r.removeAttribute("cv-if"),"!"===i.substr(0,1)&&(i=i.substr(1),a=!0);var o=new DocumentFragment;Array.from(r.childNodes).map(function(e){return o.appendChild(e)});var s=this,l=new DocumentFragment,c=new t(this.args,s);c.template=o,c.parent=s;var f=s.args,d=i;if(i.match(/\./)){var v=u(e.Bindable.resolve(s.args,i,!0),2);f=v[0],d=v[1]}var p=!1,h=f.bindTo(d,function(e,t){if(!p){var r=!!f[d]^!!a?n:l;return c.render(r),void(p=!0)}Array.isArray(e)&&(e=!!e.length),a&&(e=!e),e?n.appendChild(l):c.nodes.map(function(e){return l.appendChild(e)})});s.onRemove(h);var g=function(){f.isBound()||e.Bindable.clearBindings(f)};return s.onRemove(function(){h(),g(),s._onRemove.remove(h),s._onRemove.remove(g)}),n}},{key:"compileIfTag",value:function(n){var r=n.getAttribute("cv-if"),i=!1;n.removeAttribute("cv-if"),"!"===r.substr(0,1)&&(r=r.substr(1),i=!0);var a=new DocumentFragment;return Array.from(n.childNodes).map(function(e){return a.appendChild(e.cloneNode(!0))}),function(o){var s=n.cloneNode(),l=new DocumentFragment,c=new t({},o);c.template=a,c.parent=o,o.syncBind(c);var f=o.args,d=r;if(r.match(/\./)){var v=u(e.Bindable.resolve(o.args,r,!0),2);f=v[0],d=v[1]}var p=!1,h=f.bindTo(d,function(e,t){if(!p){var n=o.args[d]||i?s:l;return c.render(n),void(p=!0)}Array.isArray(e)&&(e=!!e.length),i&&(e=!e),e?s.appendChild(l):c.nodes.map(function(e){return l.appendChild(e)})});o.onRemove(h);var g=function(){f.isBound()||e.Bindable.clearBindings(f)};return c.onRemove(function(){h(),g(),o._onRemove.remove(h),o._onRemove.remove(g)}),s}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.subTemplates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),n=this.subTemplates[t];if(n){var r=n();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(r),e}}},{key:"syncBind",value:function(e){var n=this,r=this.args.bindTo(function(t,n,r,i){"_id"!==n&&e.args[n]!==t&&(e.args[n]=t)}),i=e.args.bindTo(function(e,r,i,a,o){if("_id"!==r){var s=e,u=o;s instanceof t&&(s=s.___ref___),u instanceof t&&(u=u.___ref___),s!==u&&u instanceof t&&o.remove(),r in n.args&&(n.args[r]=e)}});this.onRemove(r),this.onRemove(i),e.onRemove(function(){n._onRemove.remove(r),n._onRemove.remove(i)})}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"uuid",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}},{key:"remove",value:function(){var e=this,t=function(){for(var t in e.firstNode=e.lastNode=void 0,e.nodes)e.nodes[t].dispatchEvent(new Event("cvDomDetached")),e.nodes[t].remove()};arguments.length>0&&void 0!==arguments[0]&&arguments[0]?t():requestAnimationFrame(t);var n,r=this._onRemove.items(),i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;this._onRemove.remove(l),l()}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}for(;n=this.cleanup.shift();)n&&n();for(var c in this.viewLists)this.viewLists[c]&&this.viewLists[c].remove();for(var f in this.viewLists=[],this.timeouts)clearInterval(this.timeouts[f].timeout),delete this.timeouts[f];for(var d in this.intervals)clearInterval(this.intervals[d].timeout),delete this.intervals[d];this.removed=!0}},{key:"findTag",value:function(e){for(var t in this.nodes){var n;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return this.nodes[t];if(n=this.nodes[t].querySelector(e))return n}}}},{key:"findTags",value:function(e){return this.nodes,map(function(t){return t.querySelectorAll(e)}).flat()}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(n){for(var r in e){for(var i=t,a=e[r];i&&!i[a];)i=i.parent;if(!i)return;n=i[e[r]](n)}return n}}},{key:"stringToClass",value:function(e){if(t.refClasses.has(e))return t.refClasses.get(e);var r=e.split("/"),i=r[r.length-1],a=n(e);return t.refClasses.set(e,a[i]),a[i]}},{key:"preventParsing",value:function(e){e[d]=!0}},{key:"toString",value:function(){return this.nodes.map(function(e){return e.outerHTML}).join(" ")}}],[{key:"isView",value:function(){return t}}]),t}();t.View=v,Object.defineProperty(v,"templates",{enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(v,"refClasses",{enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(v,"linkClicked",function(e){e.preventDefault();var t=e.target.getAttribute("href");"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?i.Router.go(t):window.open(t)})}()}),require.register("curvature/base/ViewList.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var e=n("./Bindable"),r=n("./View"),i=n("./Bag");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function t(n,r,a,o){var s=this,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.args=e.Bindable.makeBindable({}),this.args.value=e.Bindable.makeBindable(a||{}),this.args.subArgs=e.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this._onRemove=new i.Bag,this.template=n,this.subProperty=r,this.keyProperty=u,this.tag=null,this.paused=!1,this.parent=o,this.rendered=new Promise(function(e,t){Object.defineProperty(s,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before(function(e){"bindTo"!=e.___executing___&&(s.paused=!0)}),this.args.___after(function(e){"bindTo"!=e.___executing___&&(s.paused=e.___stack___.length>1,s.reRender())});var l=this.args.value.bindTo(function(e,t,n,r){if(!s.paused){var i=t;if(isNaN(t)&&(i="_"+t),r)for(var a in s.views[i]&&s.views[i].remove(),delete s.views[i],s.views)s.views[a].args[s.keyProperty]="string"!=typeof a?a:a.substr(1);else s.views[i]||s.willReRender?s.views[i]&&s.views[i].args&&(s.views[i].args[s.keyProperty]=t,s.views[i].args[s.subProperty]=e):s.willReRender=requestAnimationFrame(function(){s.reRender()})}});this._onRemove.add(l)}var n,o,s;return n=t,(o=[{key:"render",value:function(e){var t=this,n=[],r=!0,i=!1,a=void 0;try{for(var o,s=function(){var t=o.value;t.render(e),n.push(t.rendered.then(function(){return t}))},u=this.views[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s()}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}this.tag=e,Promise.all(n).then(function(e){return t.renderComplete(e)})}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[];for(var n in this.views)t[n]=this.views[n];var i=[];for(var a in this.args.value){var o=!1,s=a;for(var u in isNaN(s)&&(s="_"+a),t)if(t[u]&&void 0!==this.args.value[a]&&this.args.value[a]===t[u].args[this.subProperty]){o=!0,i[s]=t[u],i[s].args[this.keyProperty]=a,delete t[u];break}o||function(){var t={},n=i[s]=new r.View(t);i[s].template=(e.template,Object,e.template),i[s].parent=e.parent,i[s].viewList=e,i[s].args[e.keyProperty]=a,i[s].args[e.subProperty]=e.args.value[a];var o=t.bindTo(e.subProperty,function(n,r){var i=t[e.keyProperty];e.args.value[i]=n}),u=e.args.subArgs.bindTo(function(e,n,r,i){t[n]=e});n.onRemove(function(){o(),u(),e._onRemove.remove(o),e._onRemove.remove(u)}),e._onRemove.add(o),e._onRemove.add(u),t[e.subProperty]=e.args.value[a]}()}for(var l in t){var c=!1;for(var f in i)if(t[l]===i[f]){c=!0;break}c||t[l].remove()}if(Array.isArray(this.args.value)){this.rendered=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=i.length-n-1;return i[r]?i[r]===e.views[r]?i[r].firstNode?t(n+1):(i[r].render(e.tag,i[r+1]),i[r].rendered.then(function(){return t(n+1)})):(i[r].render(e.tag,i[r+1]),e.views.splice(r,0,i[r]),i[r].rendered.then(function(){return t(n+1)})):Promise.resolve()}()}else{var d=[],v=Object.assign({},i),p=function(t){if(delete v[t],i[t].firstNode&&i[t]===e.views[t])return"continue";i[t].render(e.tag),d.push(i[t].rendered.then(function(){return i[t]}))};for(var h in i)p(h);for(var g in v)delete this.args.views[g],v.remove();this.rendered=Promise.all(d)}for(var b in this.views=i,i)isNaN(b)?i[b].args[this.keyProperty]=b.substr(1):i[b].args[this.keyProperty]=b;this.willReRender=!1}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove();var n=this._onRemove.items();for(var r in n)this._onRemove.remove(n[r]),n[r]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);e.Bindable.clearBindings(this.args.subArgs),e.Bindable.clearBindings(this.args),this.args.value.isBound()||e.Bindable.clearBindings(this.args.value)}}])&&a(n.prototype,o),s&&a(n,s),t}();t.ViewList=o}()}),require.register("curvature/form/ButtonField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonField=void 0;var e=n("./Field");function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(t){function n(e,t,r,i){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(s=a(this,o(n).call(this,e,t,r,i))).args.title=s.args.title||s.args.value,s._onClick=[];var u=s.args.attrs||{};return u.type=u.type||s.args.type,s.args.name=u.name=s.args.name||i,s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(s.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(s.getName(),'"\n\t\t\t\t\ttype      = "').concat(u.type,'"\n\t\t\t\t\tvalue     = "[[value]]"\n\t\t\t\t\tcv-on     = "click:clicked(event)"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),s}var r,u,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e.Field),r=n,(u=[{key:"clicked",value:function(e){this._onClick.map(function(t){return!1===t(e)}).filter(function(e){return e}).length?"submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation()):"submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation(),this.form.tags.formTag.element.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0})))}},{key:"onClick",value:function(e){this._onClick.push(e)}}])&&i(r.prototype,u),l&&i(r,l),n}();t.ButtonField=u}()}),require.register("curvature/form/Field.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;var e=n("../base/View");n("../base/Bindable");function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(t){function n(e,t,r,i){var s,u,l,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var f=Object.assign({},e);(c=a(this,o(n).call(this,f))).args.title=null!==(s=c.args.title)&&void 0!==s?s:i,c.args.value=null!==(u=c.args.value)&&void 0!==u?u:"",c.value=null!==(l=c.args.value)&&void 0!==l?l:"",c.skeleton=f,c.disabled=null,c.args.valueString="",c.form=t,c.parent=r,c.key=i,c.ignore=c.args.attrs&&c.args.attrs["data-cv-ignore"]||!1;var d="",v=c.args.attrs||{};v.type=v.type||f.type||null,c.args.name=v.name=v.name||c.args.name||i,"checkbox"==v.type&&(d='value = "1"'),c.template='\n\t\t\t<label\n\t\t\t\tfor           = "'.concat(c.getName(),'"\n\t\t\t\tdata-type     = "').concat(v.type||"text",'"\n\t\t\t\tcv-ref        = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(c.getName(),'"\n\t\t\t\t\ttype      = "').concat(v.type||"text",'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t').concat(d,'\n\t\t\t\t/>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t');var p=null;return c.args.bindTo("value",function(e,t){if(!isNaN(e)&&e.length&&e==Number(e)&&e.length===String(Number(e)).length&&(e=Number(e)),c.value=e,p!=t){if(p=i,c.args.valueString=JSON.stringify(e||"",null,4),c.valueString=c.args.valueString,"file"==v.type&&c.tags.input&&c.tags.input.element.files&&c.tags.input.element.length)if(v.multiple){var n=Array.from(c.tags.input.element.files);if(c.parent.args.value[t]&&n.length){for(var r in n)n[r]!==c.parent.args.value[i][r]&&(c.parent.args.value[i]=n);c.parent.args.value.splice(n.length)}else c.parent.args.value[i]=n}else c.parent.args.value[i]=c.tags.input.element.files[0];else c.parent.args.value||(c.parent.args.value={}),c.parent.args.value[i]=e;c.args.errors=[],p=null}}),c.parent.args.value[c.key]=c.args.value,c.parent.args.value.bindTo(i,function(e,t){if(p!=t){if(p=t,"file"==v.type)if(c.tags.input&&c.tags.input.element.files&&c.tags.input.element.files.length)if(v.multiple){var n=Array.from(c.tags.input.element.files);if(c.parent.args.value[i]&&n.length){for(var r in n)n[r]!==c.parent.args.value[i][r]&&(c.parent.args.value[i]=n);c.parent.args.value[i].splice(n.length)}else c.parent.args.value[i]=n}else c.parent.args.value[i]=c.tags.input.element.files[0];else c.args.value=e;else c.args.value=e;p=null}}),c}var r,u,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e.View),r=n,(u=[{key:"disable",value:function(){this.hasChildren(),this.disabled="disabled"}},{key:"enable",value:function(){this.hasChildren(),this.disabled=!1}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.tags.input)return this.tags.input.element.getAttribute("name");var t=this.key;if(e){for(var n=this.parent,r=[t];n&&n.array&&void 0!==n.key;)r.unshift(n.key),n=n.parent;t=r.shift(),r.length&&(t+="[".concat(r.join("]["),"]"))}return t}}])&&i(r.prototype,u),l&&i(r,l),n}();t.Field=u}()}),require.register("curvature/form/FieldSet.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldSet=void 0;var e=n("./Field"),r=n("./Form");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(t){function n(e,t,a,u){var l,c,f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),c=this;var d=(l=!(f=o(n).call(this,e,t,a,u))||"object"!==i(f)&&"function"!=typeof f?s(c):f).args.attrs||{};return d.type=d.type||"fieldset",l.array=!1,(e.array||d["data-array"]||d["data-multi"])&&(l.array=d["data-array"]=!0),l.args.value={},l.args.fields=r.Form.renderFields(e.children,s(l)),l.fields=l.args.fields,l.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(l.getName(),'"\n\t\t\t\tdata-type  = "').concat(d.type,'"\n\t\t\t\tdata-multi = "').concat(d["data-multi"]?"true":"false",'"\n\t\t\t\tcv-ref     = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<fieldset\n\t\t\t\t\tname   = "').concat(l.getName(),'"\n\t\t\t\t\tcv-ref = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand="attrs"\n\t\t\t\t\tcv-each = "fields:field"\n\t\t\t\t>\n\t\t\t\t\t[[field]]\n\t\t\t\t</fieldset>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),l}var l,c,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,e.Field),l=n,(c=[{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}},{key:"wrapSubfield",value:function(e){return e}}])&&a(l.prototype,c),f&&a(l,f),n}();t.FieldSet=l}()}),require.register("curvature/form/Form.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;var e=n("../base/View"),r=n("./Field"),i=n("./FieldSet"),a=n("./SelectField"),o=n("./RadioField"),s=n("./HtmlField"),u=n("./HiddenField"),l=n("./ButtonField"),c=n("./TextareaField"),f=n("./multiField/View"),d=n("../base/Bindable");function v(e){"@babel/helpers - typeof";return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?b(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(t){function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=h(this,g(n).call(this,{}))).args.flatValue=t.args.flatValue||{},t.args.value=t.args.value||{},t.args.method=e._method||"GET",t.args.classes=t.args.classes||[],t.skeleton=e,t.args.bindTo("classes",function(e){t.args._classes=e.join(" ")}),t._onSubmit=[],t._onRender=[],t.action="",t.template='\n\t\t\t<form\n\t\t\t\tclass     = "[[_classes]]"\n\t\t\t\tmethod    = "[[method]]"\n\t\t\t\tenctype   = "multipart/form-data"\n\t\t\t\tcv-on     = "submit:submit(event)"\n\t\t\t\tcv-ref    = "formTag:curvature/base/Tag"\n\t\t\t\tcv-each   = "fields:field"\n\t\t\t\tcv-expand = "attrs"\n\t\t\t>\n\t\t\t\t[[field]]\n\t\t\t</form>\n\t\t',t.args.fields=n.renderFields(e,b(t),r),t.fields=t.args.fields;var i=d.Bindable.makeBindable(b(t));return t.args.bindTo("value",function(e){i.value=e}),t.args.bindTo("valueString",function(e){i.json=e}),h(t,i)}var v,m,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(n,e.View),v=n,_=[{key:"renderFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},v={},p=function(p){if(v[p])return"continue";if("_"==p.substr(0,1))return"continue";var h=null,g=null;if(t&&(g=t instanceof n?t:t.form),d&&e[p].name in d)h=new d[e[p].name](e[p],g,t,p);else switch(e[p].type){case"fieldset":h=e[p].attrs&&e[p].attrs["data-multi"]?new f.View(e[p],g,t,p):new i.FieldSet(e[p],g,t,p);break;case"select":h=new a.SelectField(e[p],g,t,p);break;case"radios":h=new o.RadioField(e[p],g,t,p);break;case"html":h=new s.HtmlField(e[p],g,t,p);break;case"submit":case"button":h=new l.ButtonField(e[p],g,t,p);break;case"hidden":h=new u.HiddenField(e[p],g,t,p);break;case"textarea":h=new c.TextareaField(e[p],g,t,p);break;default:h=new r.Field(e[p],g,t,p)}v[p]=h;var b=h.key;h.args.bindTo("value",function(e,n,r,i){if(!isNaN(e)&&e.length&&e==Number(e)&&e.length===String(Number(e)).length&&(e=Number(e)),("html"!=r.type||r.contentEditable)&&"fieldset"!=r.type)if(r.disabled)delete g.args.flatValue[b];else{r.attrs=r.attrs||{};r.attrs.multiple;var a=Array.isArray(e),o=t.args.value[b];if(r.attrs.multiple&&a&&Array.isArray(o))for(var s in e)e[s]!==t.args.value[b][s]&&(t.args.value[b][s]=e[s]),t.args.value[b].splice(e.length);else t.args.value[b]=e;g.args.flatValue[b]=e,g.args.valueString=JSON.stringify(g.args.value,null,4),console.log()}})};for(var h in e)p(h);return v}},{key:"_updateFields",value:function(e,t){for(var n in e.args.fields){var r=e.args.fields[n];t[n]&&(t[n].value&&(r.args.value=t[n].value),t[n].errors&&(r.args.errors=t[n].errors),t[n].title&&(r.args.title=t[n].title),t[n].options&&(r.args.options=t[n].options),t[n].attrs&&(r.args.attrs=t[n].attrs),r.children&&t[n].children&&this._updateFields(r,t[n].children))}}}],(m=[{key:"submitHandler",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"submit",value:function(e){for(var t in this.args.valueString=JSON.stringify(this.args.value,null,4),this._onSubmit)this._onSubmit[t](this,e)}},{key:"buttonClick",value:function(e){}},{key:"onSubmit",value:function(e){this._onSubmit.push(e)}},{key:"onRender",value:function(e){this.nodes?e(this):this._onRender.push(e)}},{key:"formData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e||(e=new FormData),t||(t=this);for(var r in t.args.fields)if(!t.args.fields[r]||!t.args.fields[r].disabled){var i=n.slice(0);if(i.push(r),t.args.fields[r]&&t.args.fields[r].hasChildren())this.formData(e,t.args.fields[r],i);else if(t.args.fields[r]){var a=t.args.fields[r].getName();if("file"==t.args.fields[r].args.type&&t.args.fields[r].tags.input.element.files.length)if(t.args.fields[r].args.attrs.multiple)for(var o=t.args.fields[r].tags.input.element.files,s=0;s<o.length;s++)o[s]&&e.append(a+"[]",o[s]);else t.args.fields[r].tags.input.element.files[0]&&e.append(a,t.args.fields[r].tags.input.element.files[0]);else("file"!==t.args.fields[r].args.type||t.args.fields[r].args.value)&&e.append(a,void 0===t.args.fields[r].args.value?"":t.args.fields[r].args.value)}}return e}},{key:"queryString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in this.args.flatValue)e[n]=e[n]||this.args.flatValue[n];for(var r in e)t.push(r+"="+encodeURIComponent(e[r]));return t.join("&")}},{key:"populate",value:function(e){for(var t in e)this.args.value[t]=e[t]}},{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}},{key:"postRender",value:function(){for(var e in this._onRender)this._onRender[e](this)}}])&&p(v.prototype,m),_&&p(v,_),n}();t.Form=m}()}),require.register("curvature/form/HiddenField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HiddenField=void 0;var e=n("./Field");function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(t){function n(e,t,r,o){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e.type="hidden";var u=(s=i(this,a(n).call(this,e,t,r,o))).args.attrs||{};return s.args.type=u.type=u.type||s.args.type||"hidden",s.args.name=u.name=u.name||s.args.name||o,s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(s.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tstyle     = "display:none"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\t\tname      = "').concat(s.getName(),'"\n\t\t\t\t\t\ttype      = "hidden"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t<span cv-if = "value">[[[value]]]</span>\n\t\t\t</label>\n\t\t'),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e.Field),n}();t.HiddenField=s}()}),require.register("curvature/form/HtmlField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlField=void 0;var e=n("./Field");function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(t){function n(e,t,r,i){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(s=a(this,o(n).call(this,e,t,r,i))).key=i,s.args.tagName=s.args.tagName||"div",s.args.displayValue=s.args.value,s.args.attrs=s.args.attrs||{},s.ignore=s.args.attrs["data-cv-ignore"]||!1,s.args.contentEditable=s.args.attrs.contenteditable||!1,s.args.bindTo("value",function(e){s.tags.input&&s.tags.input.element!==document.activeElement&&(s.args.displayValue=e)}),s.template="<".concat(s.args.tagName,'\n\t\t\tname            = "').concat(s.getName(),'"\n\t\t\tcv-ref          = "input:curvature/base/Tag"\n\t\t\tcontenteditable = "[[contentEditable]]"\n\t\t\tcv-expand       = "attrs"\n\t\t\tcv-bind         = "$displayValue"\n\t\t\tcv-on           = "input:inputProvided(event);"\n\t\t></').concat(s.args.tagName,">"),s}var r,u,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e.Field),r=n,(u=[{key:"postRender",value:function(){var e=this;this.observer=new MutationObserver(function(t){var n=e.tags.input.element,r=Array.from(n.childNodes).filter(function(e){return e.length>0||e.nodeType!==e.TEXT_NODE}).map(function(e){return e.outerHTML||e.textContent});e.args.value=r.join("").replace(/&lt;/i,"<").replace(/&gt;/i,">")}),this.observer.observe(this.tags.input.element,{characterData:!0,attributes:!0,childList:!0,subtree:!0})}},{key:"inputProvided",value:function(e){this.args.value=e.target.innerHTML}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){return this.key}}])&&i(r.prototype,u),l&&i(r,l),n}();t.HtmlField=u}()}),require.register("curvature/form/RadioField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioField=void 0;var e=n("./Field");function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(t){function n(e,t,r,i){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var u=(s=a(this,o(n).call(this,e,t,r,i))).args.attrs||{};return s.args.name=u.name=u.name||s.args.name||i,s.args.value=s.args.value||"",s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(s.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each  = "options:option:optionText"/>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname      = "').concat(s.args.name,'"\n\t\t\t\t\t\t\ttype      = "radio"\n\t\t\t\t\t\t\tvalue     = "[[option]]"\n\t\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t\t\tcv-on     = "change:changed(event)"\n\t\t\t\t\t/>\n\t\t\t\t\t\t[[optionText]]\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),s}var r,u,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e.Field),r=n,(u=[{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}},{key:"changed",value:function(e){this.args.value=e.target.value}}])&&i(r.prototype,u),l&&i(r,l),n}();t.RadioField=u}()}),require.register("curvature/form/SelectField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectField=void 0;var e=n("./Field");function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(t){function n(e,t,r,i){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var u=(s=a(this,o(n).call(this,e,t,r,i))).args.attrs||{};return s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(s.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type||"select",'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<select\n\t\t\t\t\tname      = "').concat(s.getName(),'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-each   = "options:option:optionText"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t\t<option value = "[[option]]">[[optionText]]</option>\n\t\t\t\t</select>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),s}var r,u,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e.Field),r=n,(u=[{key:"postRender",value:function(){var e=this;this.args.bindTo("value",function(t){return e.selectOptionByValue(t)}),this.args.bindTo("options",function(t){e.viewLists.options.rendered.then(function(t){e.selectOptionByValue(e.args.value)})},{frame:!0})}},{key:"selectOptionByValue",value:function(e){var t=this.tags.input.element,n=!0,r=!1,i=void 0;try{for(var a,o=t.options[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.value==e&&(t.selectedIndex=s.index)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}}])&&i(r.prototype,u),l&&i(r,l),n}();t.SelectField=u}()}),require.register("curvature/form/TextareaField.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextareaField=void 0;var e=n("./Field");function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(t){function n(e,t,r,o){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var u=(s=i(this,a(n).call(this,e,t,r,o))).args.attrs||{};return u.type=u.type||"textarea",s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(s.getName(),'"\n\t\t\t\tdata-type = "').concat(u.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<textarea\n\t\t\t\t\t\tname      = "').concat(s.getName(),'"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t></textarea>\n\t\t\t\t<cv-template cv-if = "attrs.data-caption">\n\t\t\t\t\t<p>[[attrs.data-caption]]</p>\n\t\t\t\t</cv-template>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e.Field),n}();t.TextareaField=s}()}),require.register("curvature/form/multiField/CreateForm.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateForm=void 0;var e=n("./FormWrapper");n("../../form/HiddenField");function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(t){function n(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=a(this,s(n).call(this,e,t,"POST",i||{}))).creating=!!e.publicId,r}var r,l,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,e.FormWrapper),r=n,(l=[{key:"onLoad",value:function(e){for(var t in e.args.fields)if(e.args.fields[t].tags.input&&"hidden"!=e.args.fields[t].args.attrs.type){e.args.fields[t].tags.input.element.focus();break}o(s(n.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return this.args.view.args.loading=!0,this.args.view.args.classes+=" loading",o(s(n.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){this.args.view.args.loading=!1,this.args.view.args.classes="",this.args.wrapper?this.args.wrapper.refresh(e.body):this.args.view.addRecord(e.body),this.args.view.args.creating="",o(s(n.prototype),"onResponse",this).call(this,e)}}])&&i(r.prototype,l),c&&i(r,c),n}();t.CreateForm=l}()}),require.register("curvature/form/multiField/FormWrapper.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormWrapper=void 0;var e=n("../../base/Repository"),r=n("../../form/Form"),i=n("../../toast/Toast"),a=(n("../../toast/ToastAlert"),n("../../base/View")),o=n("../../base/Router");function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(t){function n(t,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(a=l(this,c(n).call(this,t))).path=i,a.args.method=o,a.args.action=a.args.action||null,a.args.form=null,a.args.title=null,a.args.class="",a.template='\n\t\t\t<div class = "form constrict [[class]]">\n\t\t\t\t<div cv-if = "title"><label>[[title]]</label></div>\n\t\t\t\t[[form]]\n\t\t\t</div>\n\t\t',a._onLoad=[],a._onSubmit=[],a._onRender=[],a._onRequest=[],a._onError=[],a._onResponse=[],i instanceof r.Form?a.loadForm(form,s):e.Repository.request(i).then(function(e){e&&e.meta&&e.meta.form&&e.meta.form instanceof Object?(a.loadForm(new r.Form(e.meta.form,s)),a.onLoad(a.args.form,e.body)):console.log("Cannot render form with ",e)}),a}var s,d,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,a.View),s=n,(d=[{key:"loadForm",value:function(t){var n=this;this.args.form=t,this.args.form.onSubmit(function(t,r){if(!1!==n.onSubmit(t,r)){r&&(r.preventDefault(),r.stopPropagation());var i=t.tags.formTag.element,a=i.getAttribute("action")||n.args.action||n.path,s=i.getAttribute("method")||n.args.method,u=t.args.flatValue;if("GET"==(s=s.toUpperCase())){var l={};for(var c in n.args.content&&n.args.content.args&&(n.args.content.args.page=0),l.page=0,u)"api"!==c&&(l[c]=u[c]);n.onRequest(l).then(function(){n.onResponse({}),o.Router.go(a+"?"+o.Router.queryToString(l)),n.update(l)}).catch(function(e){n.onRequestError(e)})}else if("POST"==s){var f=t.formData(),d=!0,v=!1,p=void 0;try{for(var h,g=f.entries()[Symbol.iterator]();!(d=(h=g.next()).done);d=!0)h.value}catch(e){v=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(v)throw p}}var b=n.onRequest(f);b&&b.then(function(){e.Repository.request(a,{api:"json"},f,!1,{progressDown:function(e){n.progressDown(e)},progressUp:function(e){n.progressUp(e)}}).then(function(e){n.onResponse(e)}).catch(function(e){n.onRequestError(e)})})}}})}},{key:"onRequest",value:function(e){var t=[];for(var n in this._onRequest){var r=this._onRequest[n](e,this);r&&t.push(r)}return 0==t.length?Promise.resolve():Promise.all(t)}},{key:"onRequestError",value:function(e){for(var t in this._onError)this._onError[t](e,this);if(e.messages)for(var n in e.messages)i.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[n],3500)}},{key:"onResponse",value:function(e){for(var t in this._onResponse)this._onResponse[t](e,this);if(e.messages)for(var n in e.messages)i.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[n],3500)}},{key:"onLoad",value:function(e,t){for(var n in this._onLoad)this._onLoad[n](this,e,t)}},{key:"onSubmit",value:function(e,t){for(var n in this._onSubmit)this._onSubmit[n](this,t)}},{key:"postRender",value:function(){for(var e in this._onRender)this._onRender[e](this.args.form)}},{key:"customFields",value:function(){return{}}},{key:"submit",value:function(){}},{key:"progressUp",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}},{key:"progressDown",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}}])&&u(s.prototype,d),v&&u(s,v),n}();t.FormWrapper=d}()}),require.register("curvature/form/multiField/SearchForm.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SearchForm=void 0;var e=n("Config"),r=n("./FormWrapper"),i=n("../../form/HiddenField"),a=n("../../base/Repository");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=e.Config?e.Config.backend:"//",v=function(e){function t(e,n){var r;arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=u(this,c(t).call(this,e,n,"POST",{search:i.HiddenField}))).superTemplate=r.template,r.args.records=[],r.selected=null,r.template="\n\t\t\t".concat(r.superTemplate,'\n\t\t\t<div cv-each = "records:record:r" class = "dropdown-results">\n\t\t\t\t<div\n\t\t\t\t\tcv-on         = "click:select(event)"\n\t\t\t\t\tdata-index    = "[[r]]"\n\t\t\t\t\tdata-publicId = "[[record.publicId]]"\n\t\t\t\t\tclass         = "[[record.classes]]"\n\t\t\t\t>\n\t\t\t\t\t[[record.title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'),r}var n,o,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.FormWrapper),n=t,(o=[{key:"onLoad",value:function(e){var n=this;for(var r in e.args.fields)if(e.args.fields[r].tags.input&&"hidden"!=e.args.fields[r].args.attrs.type){e.args.fields[r].tags.input.element.focus();break}e.args.flatValue.bindTo("keyword",function(e){n.args.records=[],n.selected=null,e&&(console.log(n.path,e),a.Repository.request(d+n.path,{keyword:e}).then(function(t){console.log(t.body),t.body&&(n.args.records=t.body.map(function(t){return t.classes="",t.title==e&&(t.classes="selected",n.selected=t),t}))}))}),l(c(t.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return l(c(t.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){l(c(t.prototype),"onResponse",this).call(this,e)}},{key:"select",value:function(e){var t=e.target.getAttribute("data-index"),n=(e.target.getAttribute("data-publicId"),this.args.records[t]);console.log(n),this.args.view.addRecord(n),this.args.view.addButtonClicked()}},{key:"onSubmit",value:function(e,t){return t.preventDefault(),t.stopPropagation(),this.selected&&(this.args.view.addRecord(this.selected),this.args.view.addButtonClicked()),!1}}])&&s(n.prototype,o),v&&s(n,v),t}();t.SearchForm=v}()}),require.register("curvature/form/multiField/View.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=n("Config"),r=n("../../form/Form"),i=n("../../form/FieldSet"),a=n("./CreateForm"),o=n("./SearchForm"),s=(n("./FormWrapper"),n("./Wrapper"));function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(t){function n(e,t,r,i){var a,o,s;for(var l in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,(a=!(s=c(n).call(this,e,t,r,i))||"object"!==u(s)&&"function"!=typeof s?f(o):s).args._fields=[],a.dragging=!1,a.dropping=!1,a.args.fields)a.args._fields[l]=a.wrapSubfield(a.args.fields[l]);return a.args.fields[-1].disable(),a.args.creating="",a.args.fieldType="",a.args.createForm=a.args.createForm||"",a.args.searchForm=a.args.searchForm||"",a.args.createFormReady=!1,a.setCreateForm({view:f(a)}),a.args.loader="...",a.args.addIcon="&#215;",a.args.addIcon="a",a.args.addIcon="+",a.args.draggable="true",a.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(a.args.name,'"\n\t\t\t\tdata-type  = "').concat(a.args.attrs.type,'"\n\t\t\t\tdata-multi = "').concat(a.args.attrs["data-multi"]?"true":"false",'"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\n\t\t\t\t<fieldset\n\t\t\t\t\tname  = "').concat(a.args.name,'"\n\t\t\t\t\tclass = "multi-field [[creating]] [[fieldType]]"\n\t\t\t\t>\n\n\t\t\t\t\t<div class = "record-list" cv-each = "_fields:field:f">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass     = "single-record"\n\t\t\t\t\t\t\tdata-for  = "[[f]]"\n\t\t\t\t\t\t\tdraggable = "[[draggable]]"\n\t\t\t\t\t\t\tcv-on     = "\n\t\t\t\t\t\t\t\tdrop:drop(event);\n\t\t\t\t\t\t\t\tdragstart:drag(event);\n\t\t\t\t\t\t\t\tdragend:dragStop(event);\n\t\t\t\t\t\t\t\tdragover:dragOver(event);\n\t\t\t\t\t\t\t"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t[[field]]\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay create">\n\t\t\t\t\t\t<div class = "form constrict">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\t\tclass = "bubble bottom left-margin close"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t&#215;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t[[createForm]]\n\t\t\t\t\t\t[[searchForm]]\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay loading">\n\t\t\t\t\t\t[[loader]]\n\t\t\t\t\t</div>\n\t\t\t\t\t<div cv-if = "createFormReady" class="add-button-holder">\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\tclass = "bubble bottom left-margin add"\n\t\t\t\t\t\t\ttab-index = "0"\n\t\t\t\t\t\t>[[addIcon]]</div>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</fieldset>\n\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\n\t\t\t</label>\n\t\t'),a}var v,p,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,i.FieldSet),v=n,(p=[{key:"setCreateForm",value:function(t){var n=this,r="";e.Config&&e.Config.backend&&(r=e.Config.backend),!1!==this.args.attrs["data-create-endpoint"]?(this.args.createForm=new a.CreateForm(Object.assign({},t),this.args.attrs["data-create-endpoint"]?r+this.args.attrs["data-create-endpoint"]:t.publicId?r+"".concat(this.args.attrs["data-endpoint"],"/").concat(t.publicId,"/edit"):r+"".concat(this.args.attrs["data-endpoint"],"/create")),this.args.createForm._onLoad.push(function(e,t){n.args.createFormReady=!0})):this.args.createFormReady=!0,console.log(this.args.createFormReady),this.args.searchForm=new o.SearchForm(Object.assign({},t),r+this.args.attrs["data-endpoint"])}},{key:"wrapSubfield",value:function(e){return new s.Wrapper({field:e,parent:this})}},{key:"addButtonClicked",value:function(){this.args.creating||(this.args.creating="creating")}},{key:"addRecord",value:function(e){for(var t in this.args.creating="",Array.isArray(e)||(e=[e]),e){this.args.fields[-1].constructor;var n,i=Object.assign({},this.args.fields[-1].skeleton),a=Object.values(this.args.fields).length-1;i=this.cloneSkeleton(i),(i=this.correctNames(i,a)).attrs=null!==(n=i.attrs)&&void 0!==n?n:{},i.attrs["data-array"]=!0;var o={};o[a]=i;var s=r.Form.renderFields(o,this)[a];this.args.fields[a]=s;var u=this.wrapSubfield(s);s.args.value.id=e[t].id||"",s.args.value.class=e[t].class||"",s.args.value.title=e[t].title||"",this.args._fields.push(u),u.refresh(e[t])}}},{key:"editRecord",value:function(e,t){this.setCreateForm({view:this,publicId:e.publicId,wrapper:t}),this.args.creating=this.args.creating?"":"creating"}},{key:"deleteImage",value:function(e){console.log(e,this.args.fields),this.args.fields[e].disable(),this.args._fields[e].args.classes="deleted"}},{key:"undeleteImage",value:function(e){this.args.fields[e].enable(),this.args._fields[e].args.classes=""}},{key:"cloneSkeleton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={};for(var r in Array.isArray(e)&&(n=[]),e)"fields"!=r&&(e[r]&&"object"===u(e[r])?n[r]=Object.assign({},this.cloneSkeleton(e[r],t+1)):n[r]=e[r]);return n}},{key:"correctNames",value:function(e,t){if(e.name=e.name.replace(/\[-1\]/,"[".concat(t,"]")),e.attrs.name=e.name,"children"in e)for(var n in e.children)e.children[n]=this.correctNames(e.children[n],t);return e}},{key:"drag",value:function(e){this.dragging=e.target}},{key:"dragOver",value:function(e){if(!this.dragging)return!1;for(var t=e.target;t&&!t.matches('[draggable="true"]');)t=t.parentNode;t&&(this.dropping=t,e.preventDefault())}},{key:"drop",value:function(e){e.stopPropagation();var t=this.dragging.querySelector("label"),n=this.dropping.querySelector("label"),r=t.getAttribute("for"),i=n.getAttribute("for"),a=this.extractIndex(r),o=this.extractIndex(i);if(a==o||a==o-1)return this.dragging=!1,void(this.dropping=!1);var s,u,l=t.querySelectorAll('[name^="'+r+'"]'),c=t.querySelectorAll('[for^="'+r+'"]'),f=n.querySelectorAll('[name^="'+i+'"]'),d=n.querySelectorAll('[for^="'+i+'"]'),v=this.dropping,p=0;for(var h in this.args.fields){var g=this.args.fields[h].tags.input.element,b=this.args.fields[h].tags.label.element,y=g.getAttribute("name");t==b&&(s=this.args.fields[h]),n==b&&(u=this.args.fields[h]);var m=this.extractIndex(y),_=!1;if(!(m<0)&&(a>o&&m>=o&&m<=a?(_=this.changeIndex(y,m+1),p=-1):a<o&&m<=o&&m>=a&&(_=this.changeIndex(y,m-1),p=0),!1!==_)){this.changeAttributePrefix(b,"for",y,_),this.args.fields[h].args.fieldName=_,this.changeAttributePrefix(g,"name",y,_);for(var w=g.parentNode.querySelectorAll('[name^="'+y+'"]'),k=0;k<w.length;k++)this.changeAttributePrefix(w[k],"name",y,_);for(var O=g.parentNode.querySelectorAll('[for^="'+y+'"]'),j=0;j<O.length;j++)this.changeAttributePrefix(O[j],"for",y,_)}}r=t.getAttribute("for"),i=n.getAttribute("for"),a=this.extractIndex(r),o=this.extractIndex(i),this.changeAttributePrefix(t,"for",r,this.changeIndex(r,o+p));for(var T=0;T<l.length;T++)this.changeAttributePrefix(l[T],"name",r,this.changeIndex(r,o+p));for(var S=0;S<c.length;S++)this.changeAttributePrefix(c[S],"for",r,this.changeIndex(r,o+p));s.args.fieldName=t.getAttribute("for"),this.changeAttributePrefix(n,"for",i,this.changeIndex(i,o+p+1));for(var P=0;P<f.length;P++)this.changeAttributePrefix(f[P],"name",i,this.changeIndex(i,o+p+1));for(var R=0;R<d.length;R++)this.changeAttributePrefix(d[R],"for",i,this.changeIndex(i,o+p+1));u.args.fieldName=n.getAttribute("for"),this.dragging.parentNode.insertBefore(this.dragging,v),this.dragging=!1,this.dropping=!1}},{key:"dragStop",value:function(){this.dragging=!1,this.dropping=!1}},{key:"changeAttributePrefix",value:function(e,t,n,r){e.getAttribute(t);var i=r+e.getAttribute(t).substring(n.length);e.setAttribute(t,i)}},{key:"extractIndex",value:function(e){var t;return!!(t=/\[(-?\d+)\]$/.exec(e))&&parseInt(t[1])}},{key:"changeIndex",value:function(e,t){return e.replace(/\[(-?\d+)\]$/,"["+t+"]")}},{key:"cancel",value:function(e){e.stopPropagation()}}])&&l(v.prototype,p),h&&l(v,h),n}();t.View=v}()}),require.register("curvature/form/multiField/Wrapper.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Wrapper=void 0;var e=n("Config"),r=n("../../base/View"),i=n("../../base/Repository");function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(t){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=s(this,u(n).call(this,e))).template='\n\t\t\t<div\n\t\t\t\tclass = "wrapped-field [[classes]]"\n\t\t\t\tcv-on = "click:editRecord(event, key)"\n\t\t\t\ttitle = "[[fieldName]]: [[id]]"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcv-on = "click:deleteImage(event, key)"\n\t\t\t\t\tstyle = "display: inline; cursor:pointer;"\n\t\t\t\t>\n\t\t\t\t\t[[icon]]\n\t\t\t\t</div>\n\t\t\t\t<div class = "field-content">\n\t\t\t\t\t[[title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style = "display:none">[[field]]</div>\n\t\t',t.args.field=t.args.field||"!",t.args.keyword="",t.args.title="",t.args.record={},t.args.key=t.args.field.key,t.args.classes="",t.args.icon="×",t.deleted=!1,t.args.field.args.bindTo("fieldName",function(e){t.args.fieldName=e}),t.args.fieldName=t.args.field.args.name,t.args.id=t.args.field.args.value.id,t.args.bindTo("id",function(e){t.args.field.args.value.id=e}),t.args.field.args.value.bindTo("id",function(e,n){e&&i.Repository.request(t.backendPath(),{id:e}).then(function(n){t.args.id=e;var r=n.body[0];if(!r)return t.args.publicId=null,void(t.args.title=null);t.refresh(r)})},{wait:0}),t.args.field.args.value.bindTo("keyword",function(e){t.args.keyword=e}),t}var a,c,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r.View),a=n,(c=[{key:"editRecord",value:function(){this.args.parent.editRecord(this.args.record,this)}},{key:"deleteImage",value:function(e,t){e.stopPropagation(),this.deleted?(this.args.icon="×",this.args.parent.undeleteImage(t),this.deleted=!1):(this.args.icon="↺",this.args.parent.deleteImage(t),this.deleted=!0)}},{key:"backendPath",value:function(){return(e.Config?e.Config.backend:"//")+this.args.parent.args.attrs["data-endpoint"]}},{key:"getRecordTitle",value:function(e){return e._titleField?e[e._titleField]:e.title||e.publicId||e.id}},{key:"refresh",value:function(e){for(var t in e)this.args[t]=e[t];this.args.record=e,this.args.title=this.getRecordTitle(e)}}])&&o(a.prototype,c),f&&o(a,f),n}();t.Wrapper=c}()}),require.register("curvature/input/Keyboard.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Keyboard=void 0;var e=n("../base/Bindable");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var a=function(){function t(){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxDecay=120,this.listening=!0,this.keys=e.Bindable.makeBindable({}),this.codes=e.Bindable.makeBindable({}),document.addEventListener("keyup",function(e){n.keys[e.key]=-1,n.codes[e.code]=-1}),document.addEventListener("keydown",function(e){n.keys[e.key]>0||(n.keys[e.key]=1,n.codes[e.code]=1)}),window.addEventListener("blur",function(e){for(var t in n.keys)n.keys[t]=-1;for(var r in n.codes)n.codes[r]=-1})}return i(t,null,[{key:"get",value:function(){return this.instance=this.instance||new this}}]),i(t,[{key:"getKey",value:function(e){return this.keys[e]?this.keys[e]:0}},{key:"getKeyCode",value:function(e){return this.codes[e]?this.codes[e]:0}},{key:"update",value:function(){for(var e in this.keys)this.keys[e]>0?this.keys[e]++:(this.keys[e]--,this.keys[e]<-this.maxDecay&&delete this.keys[e]);for(var e in this.codes)this.codes[e]>0?this.codes[e]++:(this.codes[e]--,this.codes[e]<-this.maxDecay&&delete this.keys[e])}}]),t}();t.Keyboard=a}()}),require.register("curvature/toast/Toast.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Toast=void 0;var e=n("../base/View"),r=n("./ToastAlert");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(t){function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=a(this,o(n).call(this))).template='\n\t\t\t<div id = "[[_id]]" cv-each = "alerts:alert" class = "toast">\n\t\t\t\t[[alert]]\n\t\t\t</div>\n\t\t',e.args.alerts=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,e.View),u(n,null,[{key:"instance",value:function(){return this.inst||(this.inst=new this),this.inst}}]),u(n,[{key:"pop",value:function(e){var t=this;this.args.alerts.length;this.args.alerts.push(e),e.decay(function(e){return function(){for(var n in t.args.alerts)if(t.args.alerts[n].___ref___===e.___ref___)return e.remove(),void delete t.args.alerts[n]}}(e))}},{key:"alert",value:function(e,t,n){return this.pop(new r.ToastAlert({title:e,body:t,time:n}))}}]),n}();t.Toast=c}()}),require.register("curvature/toast/ToastAlert.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToastAlert=void 0;var e=n("../base/View");function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(t){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=a(this,o(n).call(this,e))).args.running=!1,t.args.time=t.args.time||16e3,t.init=t.args.time,t.args.title=t.args.title||"Standard alert",t.args.status="new",t.args.body=t.args.body||"This is a standard alert.",t.template='\n\t\t\t<div id = "[[_id]]" class = "alert toast-[[status]]">\n\t\t\t\t<h3>[[title]]</h3>\n\t\t\t\t<p>[[body]]</p>\n\t\t\t</div>\n\t\t',t}var r,u,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e.View),r=n,(u=[{key:"decay",value:function(e){var t=this;this.args.running=!0,this.onTimeout(50,function(){t.args.status=""}),this.onTimeout(300,function(){t.args.status="decaying"}),this.onTimeout(2400,function(){t.args.status="imminent"}),this.onTimeout(3500,function(){t.remove()})}}])&&i(r.prototype,u),l&&i(r,l),n}();t.ToastAlert=u}()}),require.alias("buffer/index.js","buffer"),require.alias("process/browser.js","process"),require("process"),require.register("___globals___",function(e,t,n){})}(),require("___globals___");
