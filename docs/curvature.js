!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},r={},n={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(e,t){for(var r,n=[],o=(i.test(t)?e+"/"+t:t).split("/"),a=0,u=o.length;a<u;a++)".."===(r=o[a])?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},c=function(t,n){var o,i={id:t,exports:{},hot:y&&y.createHot(t)};return r[t]=i,n(i.exports,(o=t,function(t){var r=a(u(o),t);return e.require(r,o)}),i),i.exports},s=function(e){var t=n[e];return t&&e!==t?s(t):e},l=function(e,n){null==n&&(n="/");var i=s(e);if(o.call(r,i))return r[i].exports;if(o.call(t,i))return c(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};l.alias=function(e,t){n[t]=e};var f=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/;l.register=l.define=function(e,i){if(e&&"object"==typeof e)for(var a in e)o.call(e,a)&&l.register(a,e[a]);else t[e]=i,delete r[e],function(e){if(f.test(e)){var t=e.replace(f,"");o.call(n,t)&&n[t].replace(f,"")!==t+"/index"||(n[t]=e)}if(p.test(e)){var r=e.replace(p,"");o.call(n,r)||(n[r]=e)}}(e)},l.list=function(){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e};var y=e._hmr&&new e._hmr((function(e,t){return s(a(u(e),t))}),l,t,r);l._cache=r,l.hmr=y&&y.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window||window;var e=function(e,t,r){var n={},o=function(t,r){try{return e(r+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==r.indexOf("node_modules")){var i=r.split("/"),a=i.lastIndexOf("node_modules"),u=i.slice(0,a).join("/");return o(t,u)}}return n};return function(i){if(i in t&&(i=t[i]),i){if("."!==i[0]&&r){var a=o(i,r);if(a!==n)return a}return e(i)}}};require.register("curvature/animate/Ease.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Ease=void 0;var n=r("../base/Mixin"),o=r("../mixin/PromiseMixin");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(l,e);var t,r,n,s=c(l);function l(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,l),(t=s.call(this)).interval=e,t.terminal=!1,t.initial=!1,t.timeout=!1,t.final=!1,t.canceled=!1,t.done=!1,t.calculate=!(!t.calculate&&!("calculate"in r))&&r.calculate,t.bounded=!("bounded"in r)||r.bounded,t.repeat="repeat"in r?r.repeat:1,t.reverse="reverse"in r&&r.reverse,t}return t=l,(r=[{key:"start",value:function(){var e=this;this.done=!1,requestAnimationFrame((function(){e.initial=Date.now(),e.terminal=e.initial+e.interval,e.repeat>=0&&(e.terminal=e.initial+e.interval*e.repeat,e.timeout=setTimeout((function(){if(e.done)return e.reverse?0:1;e.done=!0,e[o.PromiseMixin.Accept](e.reverse?0:1)}),e.interval*e.repeat))}))}},{key:"cancel",value:function(){return this.done||(clearTimeout(this.timeout),this.final=this.current(),this.canceled=this.done=!0,this[o.PromiseMixin.Reject](this.final)),this.final}},{key:"fraction",value:function(){if(this.done)return this.reverse?0:1;if(!1===this.initial)return this.reverse?1:0;var e=Date.now()-this.initial;if(e/this.interval>=this.repeat)return this.reverse?0:1;var t=e%this.interval/this.interval;return this.reverse?1-t:t}},{key:"current",value:function(){var e=this.fraction();return this.calculate?this.calculate(e):e}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(n.Mixin.with(o.PromiseMixin));t.Ease=f}()})),require.register("curvature/animate/ease/CubicIn.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.CubicIn=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return e*e*e})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.CubicIn=f}()})),require.register("curvature/animate/ease/CubicInOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.CubicInOut=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.CubicInOut=f}()})),require.register("curvature/animate/ease/CubicOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.CubicOut=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return--e*e*e+1})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.CubicOut=f}()})),require.register("curvature/animate/ease/ElasticOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.ElasticOut=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,f),l(c(t=s.call(this,e,r)),"calculate",(function(e){return Math.pow(2,-10*e)*Math.sin((e-t.friction/4)*(2*Math.PI)/t.friction)+1})),t.friction=t.friction||"friction"in r?r.friction:.3,t}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.ElasticOut=f}()})),require.register("curvature/animate/ease/GeoIn.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.GeoIn=void 0;var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(s,e);var t,r,u,c=a(s);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,s),c.call(this,e,t)}return t=s,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.GeoIn=s}()})),require.register("curvature/animate/ease/GeoOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.GeoOut=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,f),l(c(t=s.call(this,e,r)),"calculate",(function(e){return 1-Math.abs(e-Math.pow(1,t.power))})),t.power=t.power||"power"in r?r.power:1,t}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.GeoOut=f}()})),require.register("curvature/animate/ease/Linear.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Linear=void 0;var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(s,e);var t,r,u,c=a(s);function s(){return o(this,s),c.apply(this,arguments)}return t=s,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.Linear=s}()})),require.register("curvature/animate/ease/QuadIn.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.QuadIn=void 0;var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(s,e);var t,r,u,c=a(s);function s(){return n(this,s),c.apply(this,arguments)}return t=s,(r=[{key:"current",value:function(){var e=this.fraction();return e*e}}])&&o(t.prototype,r),u&&o(t,u),Object.defineProperty(t,"prototype",{writable:!1}),s}(r("../Ease").Ease);t.QuadIn=s}()})),require.register("curvature/animate/ease/QuadInOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.QuadInOut=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return e<.5?2*e*e:(4-2*e)*e-1})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.QuadInOut=f}()})),require.register("curvature/animate/ease/QuadOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.QuadOut=void 0;var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(s,e);var t,r,u,c=a(s);function s(){return n(this,s),c.apply(this,arguments)}return t=s,(r=[{key:"current",value:function(){var e=this.fraction();return e*(2-e)}}])&&o(t.prototype,r),u&&o(t,u),Object.defineProperty(t,"prototype",{writable:!1}),s}(r("../Ease").Ease);t.QuadOut=s}()})),require.register("curvature/animate/ease/QuartIn.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.QuartIn=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return e*e*e*e})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.QuartIn=f}()})),require.register("curvature/animate/ease/QuartInOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.QuartInOut=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.QuartInOut=f}()})),require.register("curvature/animate/ease/QuartOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.QuartOut=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return 1- --e*e*e*e})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.QuartOut=f}()})),require.register("curvature/animate/ease/QuintIn.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.QuintIn=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return e*e*e*e*e})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.QuintIn=f}()})),require.register("curvature/animate/ease/QuintInOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.QuintInOut=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.QuintInOut=f}()})),require.register("curvature/animate/ease/QuintOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.QuintOut=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return 1+--e*e*e*e*e})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.QuintOut=f}()})),require.register("curvature/animate/ease/SineIn.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.SineIn=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.SineIn=f}()})),require.register("curvature/animate/ease/SineInOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.SineInOut=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.SineInOut=f}()})),require.register("curvature/animate/ease/SineOut.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.SineOut=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,r,u,s=a(f);function f(){var e;o(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l(c(e=s.call.apply(s,[this].concat(r))),"calculate",(function(e){return Math.sin(Math.PI/2*e)})),e}return t=f,r&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("../Ease").Ease);t.SineOut=f}()})),require.register("curvature/base/Bag.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bag=void 0;var n=r("./Bindable"),o=r("./Mixin"),i=r("../mixin/EventTargetMixin");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=Symbol("Mapped"),y=Symbol("Has"),d=Symbol("Add"),v=Symbol("Remove"),h=Symbol("Delete"),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(l,e);var t,r,o,i=s(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return a(this,l),(e=i.call(this)).changeCallback=t,e.content=new Map,e.current=0,e.length=0,e.list=n.Bindable.makeBindable([]),e.meta=Symbol("meta"),e.type=void 0,e}return t=l,r=[{key:"has",value:function(e){return this[p]?this[p].has(e):this[y](e)}},{key:y,value:function(e){return this.content.has(e)}},{key:"add",value:function(e){return this[p]?this[p].add(e):this[d](e)}},{key:d,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(!this.content.has(e)){var t=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(t)){var r,n=(r=this.current++,Number(r));this.content.set(e,n),this.list[n]=e,this.changeCallback&&this.changeCallback(e,this.meta,l.ITEM_ADDED,n);var o=new CustomEvent("added",{detail:{item:e,id:n}});return this.dispatchEvent(o),this.length=this.size,n}}}},{key:"remove",value:function(e){return this[p]?this[p].remove(e):this[v](e)}},{key:v,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var t=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(t)){var r=this.content.get(e);delete this.list[r],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,l.ITEM_REMOVED,r);var n=new CustomEvent("removed",{detail:{item:e,id:r}});return this.dispatchEvent(n),this.length=this.size,e}}},{key:"delete",value:function(e){if(this[p])return this[p].delete(e);this[h](e)}},{key:h,value:function(e){this.remove(e)}},{key:"map",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=new WeakMap,n=new l;return n[p]=this,this.addEventListener("added",(function(o){var i=o.detail.item;if(t(i)&&!r.has(i)){var a=e(i);r.set(i,a),n[d](a)}})),this.addEventListener("removed",(function(e){var t=e.detail.item;if(r.has(t)){var o=r.get(t);r.delete(t),n[v](o)}})),n}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map((function(e){return e[0]}))}}],r&&u(t.prototype,r),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(o.Mixin.with(i.EventTargetMixin));t.Bag=b,Object.defineProperty(b,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(b,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()})),require.register("curvature/base/Bindable.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t,o,i){return e=r()?Reflect.construct:function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n(i,r.prototype),i},e.apply(null,arguments)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var f=Symbol("ref"),p=Symbol("original"),y=Symbol("deck"),d=Symbol("binding"),v=Symbol("subBinding"),h=Symbol("bindingAll"),b=Symbol("isBindable"),m=Symbol("wrapping"),g=Symbol("Names"),w=Symbol("executing"),O=Symbol("stack"),j=(Symbol("object"),Symbol("wrapped")),P=Symbol("unwrapped"),S=Symbol("getProto"),k=Symbol("onGet"),_=Symbol("onAllGet"),E=Symbol("bindChain"),R=Symbol("Descriptors"),T=Symbol("Before"),C=Symbol("After"),A=Symbol("NoGetters"),x=Object.getPrototypeOf(Int8Array),B=Set.prototype[Symbol.iterator],M=Map.prototype[Symbol.iterator],D=globalThis,I=[D.Node,D.File,D.Map,D.Set,D.WeakMap,D.WeakSet,D.ArrayBuffer,D.ResizeObserver,D.MutationObserver,D.PerformanceObserver,D.IntersectionObserver,D.IDBCursor,D.IDBCursorWithValue,D.IDBDatabase,D.IDBFactory,D.IDBIndex,D.IDBKeyRange,D.IDBObjectStore,D.IDBOpenDBRequest,D.IDBRequest,D.IDBTransaction,D.IDBVersionChangeEvent,D.Event,D.CustomEvent,D.FileSystemFileHandle].filter((function(e){return"function"==typeof e})),N=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,a;return r=t,a=[{key:"isBindable",value:function(e){return!(!e||!e[b])&&e[b]===t}},{key:"onDeck",value:function(e,t){return e[y][t]||!1}},{key:"ref",value:function(e){return e[f]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(e,r){r=r||new Map;var n={};if(e instanceof x||e instanceof ArrayBuffer){var o=e.slice(0);return r.set(e,o),o}var i=Object.keys(e);for(var a in i){var u=i[a];if("___"!==u.substring(0,3)){var s=r.get(e[u]);if(s)n[u]=s;else if(e[u]!==e){if(e[u]&&"object"===c(e[u])){var l=e[u];t.isBindable(e[u])&&(l=e[u][p]),n[u]=this.shuck(l,r)}else n[u]=e[u];r.set(e[u],n[u])}else r.set(e[u],n),n[u]=n}}return t.isBindable(e)&&(delete n.bindTo,delete n.isBound),n}},{key:"make",value:function(r){var n=this;if(!r||!["function","object"].includes(c(r)))return r;if(r[f])return r[f];if(r[b])return r;if(Object.isSealed(r)||Object.isFrozen(r)||!Object.isExtensible(r)||I.filter((function(e){return r instanceof e})).length)return r;Object.defineProperty(r,b,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(r,f,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(r,p,{configurable:!1,enumerable:!1,writable:!1,value:r}),Object.defineProperty(r,y,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,d,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,v,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(r,h,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,w,{enumerable:!1,writable:!0}),Object.defineProperty(r,m,{enumerable:!1,writable:!0}),Object.defineProperty(r,O,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,T,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,C,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,j,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(r,P,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,R,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(r,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function e(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=!1;if(Array.isArray(o)){var s=o.forEach((function(t){return e(t,i,a)}));return function(){return s.forEach((function(e){return e()}))}}if(o instanceof Function&&(a=i||{},i=o,u=!0),a.delay>=0&&(i=n.wrapDelayCallback(i,a.delay)),a.throttle>=0&&(i=n.wrapThrottleCallback(i,a.throttle)),a.wait>=0&&(i=n.wrapWaitCallback(i,a.wait)),a.frame&&(i=n.wrapFrameCallback(i,a.frame)),a.idle&&(i=n.wrapIdleCallback(i)),u){var l=r[h].length;if(r[h].push(i),!("now"in a)||a.now)for(var f in r)i(r[f],f,r,!1);return function(){delete r[h][l]}}if(r[d][o]||(r[d][o]=new Set),a.children){var p=i;i=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n[0],u=r[v].get(p);if(u&&(r[v].delete(p),u()),"object"===c(i)){var s=t.make(i);t.isBindable(s)&&r[v].set(p,s.bindTo((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.apply(void 0,n.concat(t))}),Object.assign({},a,{children:!1}))),p.apply(void 0,n)}else p.apply(void 0,n)}}r[d][o].add(i),"now"in a&&!a.now||i(r[o],o,r,!1);var y=function(){var e=r[v].get(i);e&&(r[v].delete(i),e()),r[d][o]&&r[d][o].has(i)&&r[d][o].delete(i)};return a.removeWith&&a.removeWith instanceof View&&a.removeWith.onRemove((function(){return y})),y}}),Object.defineProperty(r,E,{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var o=e.split("."),i=o.shift(),a=o.slice(0),u=[];return u.push(r.bindTo(i,(function(e,r,o,i){var c=a.join(".");0!==a.length?(void 0===e&&(e=o[r]=n.make({})),u=u.concat(e[E](c,t))):t(e,r,o,i)}))),function(){return u.forEach((function(e){return e()}))}}}),Object.defineProperty(r,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=r[T].length;r[T].push(e);var n=!1;return function(){n||(n=!0,delete r[T][t])}}}),Object.defineProperty(r,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=r[C].length;r[C].push(e);var n=!1;return function(){n||(n=!0,delete r[C][t])}}}),Object.defineProperty(r,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in r[h])if(r[h][e])return!0;for(var t in r[d])for(var n in r[d][t])if(r[d][t][n])return!0;return!1}});var a=function(e){r[e]&&r[e]instanceof Object&&!r[e]instanceof Promise&&(I.filter((function(t){return r[e]instanceof t})).length||!Object.isExtensible(r[e])||Object.isSealed(r[e])||(r[e]=t.make(r[e])))};for(var u in r)a(u);var s=r[R],l=r[j],D=r[O],N={get:function(n,o){if(l.has(o))return l.get(o);if(o===f||o===p||"apply"===o||"isBound"===o||"bindTo"===o||"__proto__"===o||"constructor"===o)return r[o];var a;if(s.has(o)?a=s.get(o):(a=Object.getOwnPropertyDescriptor(r,o),s.set(o,a)),a&&!a.configurable&&!a.writable)return r[o];if(_ in r)return r[_](o);if(k in r&&!(o in r))return r[k](o);if(a&&!a.configurable&&!a.writable)return l.set(o,r[o]),r[o];if("function"==typeof r[o]){if(g in r[o])return r[o];Object.defineProperty(r[P],o,{configurable:!1,enumerable:!1,writable:!0,value:r[o]});var u=Object.getPrototypeOf(r)[o]===r[o],c="function"==typeof Promise&&r instanceof Promise||"function"==typeof Map&&r instanceof Map||"function"==typeof Set&&r instanceof Set||"function"==typeof M&&r.prototype===M||"function"==typeof B&&r.prototype===B||"function"==typeof B&&r.prototype===B||"function"==typeof WeakMap&&r instanceof WeakMap||"function"==typeof WeakSet&&r instanceof WeakSet||"function"==typeof Date&&r instanceof Date||"function"==typeof x&&r instanceof x||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"function"==typeof EventTarget&&r instanceof EventTarget||"function"==typeof ResizeObserver&&r instanceof ResizeObserver||"function"==typeof MutationObserver&&r instanceof MutationObserver||"function"==typeof PerformanceObserver&&r instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&r instanceof IntersectionObserver||"function"==typeof r[Symbol.iterator]&&"next"===o?r:r[f],y=function(){r[w]=o,D.unshift(o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s,l,f=i(r[T]);try{for(f.s();!(s=f.n()).done;){var p=s.value;p(r,o,D,r,n)}}catch(e){f.e(e)}finally{f.f()}if(new.target)l=e(r[P][o],n);else{var y=r[P][o];l=u?y.apply(c||r,n):y.apply(void 0,n)}var d,v=i(r[C]);try{for(v.s();!(d=v.n()).done;){var h=d.value;h(r,o,D,r,n)}}catch(e){v.e(e)}finally{v.f()}return r[w]=null,D.shift(),l};(y[g]=y[g]||new WeakMap).set(r,o),y[_]=function(e){var t=y[g].get(r);return r[t][e]};var d=t.make(y);return l.set(o,d),d}return r[o]},set:function(e,n,o){if(l.has(n)&&l.delete(n),n===p)return!0;var a=r[y];if(n in a&&a[n]===o)return!0;if(n.slice&&"___"===n.slice(-3))return!0;if(e[n]===o||"number"==typeof o&&isNaN(a[n])&&isNaN(o))return!0;for(var u in o&&o instanceof Object&&(I.filter((function(e){return r instanceof e})).length||!Object.isExtensible(r)||Object.isSealed(r)||(r[A],o=t.make(o))),a[n]=o,r[h])r[h][u]&&r[h][u](o,n,e,!1);var c=!1;if(n in r[d]){var s,f=i(r[d][n]);try{for(f.s();!(s=f.n()).done;)!1===(0,s.value)(o,n,e,!1,e[n])&&(c=!0)}catch(e){f.e(e)}finally{f.f()}}if(delete a[n],!c){var v=Object.getOwnPropertyDescriptor(e,n);e instanceof File&&"lastModifiedDate"==n||v&&!v.writable||e[n]!==o||(e[n]=o)}var b=Reflect.set(e,n,o);if(Array.isArray(e)&&r[d].length)for(var m in r[d].length)(0,r[d].length[m])(e.length,"length",e,!1,e.length);return b},construct:function(n,i){var a="constructor";for(var u in n[T])n[T][u](n,a,r[O],void 0,i);var c=t.make(e(n[p],o(i)));for(var s in n[C])n[C][s](n,a,r[O],c,i);return c},getPrototypeOf:function(e){return S in r?r[S]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,t){var n=r[y];if(void 0!==n[t])return!0;if(!(t in e))return!0;if(s.has(t)){var o=s.get(t);if(o&&!o.configurable)return!1;s.delete(t)}for(var a in n[t]=null,l.has(t)&&l.delete(t),r[h])r[h][a](void 0,t,e,!0,e[t]);if(t in r[d]){var u,c=i(r[d][t]);try{for(c.s();!(u=c.n()).done;)(0,u.value)(void 0,t,e,!0,e[t])}catch(e){c.e(e)}finally{c.f()}}return delete n[t],delete e[t],!0}};return r[A]&&delete N.get,Object.defineProperty(r,f,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(r,N)}),r[f]}},{key:"clearBindings",value:function(e){var t,r=(t=function(e){return Object.keys(e).map((function(t){return delete e[t]}))},function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.map(t)});r(e[j],e[d],e[h],e[C],e[T])}},{key:"resolve",value:function(e,t){for(var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.split("."),i=o[0];o.length;){if(n&&1===o.length){var a=this.make(e);return[a,o.shift(),i]}!(!(r=o.shift())in e)&&e[r]&&e[r]instanceof Object||(e[r]={}),e=this.make(e[r])}return[this.make(e),r,i]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return setTimeout((function(){return e.apply(void 0,n)}),t)}}},{key:"wrapThrottleCallback",value:function(e,t){var r=this;return this.throttles.set(e,!1),function(){r.throttles.get(e,!0)||(e.apply(void 0,arguments),r.throttles.set(e,!0),setTimeout((function(){r.throttles.set(e,!1)}),t))}}},{key:"wrapWaitCallback",value:function(e,t){var r=this;return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var a;(a=r.waiters.get(e))&&(r.waiters.delete(e),clearTimeout(a)),a=setTimeout((function(){return e.apply(void 0,o)}),t),r.waiters.set(e,a)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];requestAnimationFrame((function(){return e.apply(void 0,r)}))}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=window.requestIdleCallback||requestAnimationFrame;o((function(){return e.apply(void 0,r)}))}}}],(n=null)&&s(r.prototype,n),a&&s(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Bindable=N,l(N,"waiters",new WeakMap),l(N,"throttles",new WeakMap),Object.defineProperty(N,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:k}),Object.defineProperty(N,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:A}),Object.defineProperty(N,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:S}),Object.defineProperty(N,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:_})}()})),require.register("curvature/base/Cache.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var r=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,o;return r=t,o=[{key:"store",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",o=0;r&&(o=1e3*r+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(n)||this.buckets.set(n,new Map);var i=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:e,value:t,expiry:r,bucket:n}});document.dispatchEvent(i)&&this.buckets.get(n).set(e,{value:t,expiration:o})}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard",n=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:e,defaultvalue:t,bucket:r}});if(!document.dispatchEvent(n))return t;if(this.buckets&&this.buckets.has(r)&&this.buckets.get(r).has(e)){var o=this.buckets.get(r).get(e);if(0===o.expiration||o.expiration>(new Date).getTime())return this.buckets.get(r).get(e).value}return t}}],(n=null)&&e(r.prototype,n),o&&e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Cache=r}()})),require.register("curvature/base/Config.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var n={},o=r;try{n=o("/Config").Config||{}}catch(e){!0===globalThis.devMode&&console.error(e)}var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,o;return r=t,o=[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n in t){var o=t[n];for(var i in"string"==typeof o&&(o=JSON.parse(o)),o){var a=o[i];return this.configs[i]=a}}return this}}],(n=null)&&e(r.prototype,n),o&&e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Config=i,Object.defineProperty(i,"configs",{configurable:!1,enumerable:!1,writable:!1,value:n})}()})),require.register("curvature/base/Cookie.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cookie=void 0;var e=r("./Bindable");function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,u,c,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"set",value:function(e,t){this.jar[e]=t}},{key:"get",value:function(e){return this.jar[e]}},{key:"delete",value:function(e){delete this.jar[e]}}],(r=null)&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Cookie=s,a=s,u="jar",c=e.Bindable.make({}),u in a?Object.defineProperty(a,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[u]=c,"string"==typeof document.cookie&&"data"!==window.location.href.substr(0,4)&&(document.cookie.split(";").map((function(e){var t=n(e.split("="),2),r=t[0],o=t[1];try{o=JSON.parse(o)}catch(e){o=o}r=r.trim(),s.jar[decodeURIComponent(r)]=o})),s.jar.bindTo((function(e,t,r,n){document.cookie=n?"".concat(encodeURIComponent(t),"=;expires=").concat(new Date(0)):"".concat(encodeURIComponent(t),"=").concat(e)})))}()})),require.register("curvature/base/Dom.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var r=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,o;return r=t,o=[{key:"mapTags",value:function(e,t,r,n,o){var i=[],a=!0;n&&(a=!1);var u=!1,c=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e,r){if(!a){if(e!==n)return NodeFilter.FILTER_SKIP;a=!0}return o&&e===o&&(u=!0),u?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;c.nextNode();)i.push(r(c.currentNode,c));return i}},{key:"dispatchEvent",value:function(e,r){e.dispatchEvent(r),t.mapTags(e,!1,(function(e){e.dispatchEvent(r)}))}}],(n=null)&&e(r.prototype,n),o&&e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Dom=r}()})),require.register("curvature/base/Import.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Import=void 0;var r=function(){function t(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),console.log(this.__proto__.constructor),this.__proto__.constructor.instances[e])return this.__proto__.constructor.instances[e];this.uri=e;var r=document.createElement("script");r.setAttribute("src",this.uri),this.ready=new Promise((function(e,t){r.addEventListener("load",(function(t){return e(r)})),r.addEventListener("error",(function(e){console.error(e),t(e)}))})),this.tag=r,this.attached=!1,this.__proto__.constructor.instances[e]=this}var r,n,o;return r=t,n=[{key:"attach",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.attached||((e=e||document.head).append(this.tag),this.attached=!0)}}],n&&e(r.prototype,n),o&&e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Import=r,r.instances={}}()})),require.register("curvature/base/Mixin.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=void 0;var e=r("./Bindable");function n(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var b=Symbol("constructor"),m=(Symbol("mixinList"),function(){function t(){d(this,t)}return h(t,null,[{key:"from",value:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var u=function(r){c(u,r);var a=l(u);function u(){var r;d(this,u);for(var c=arguments.length,s=new Array(c),l=0;l<c;l++)s[l]=arguments[l];var y,v=e.constructor?r=a.call.apply(a,[this].concat(s)):null,h=i(n);try{for(h.s();!(y=h.n()).done;){var b=y.value;switch(b[t.Constructor]&&b[t.Constructor].apply(p(r)),o(b)){case"function":t.mixClass(b,u);break;case"object":t.mixObject(b,p(r))}}}catch(e){h.e(e)}finally{h.f()}return f(r,v)}return h(u)}(e);return u}},{key:"make",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=r.pop();return t.to.apply(t,[o].concat(r))}},{key:"to",value:function(e){for(var t={},r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];n.map((function(r){switch(o(r)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(r));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(r.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)}))}},{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.from.apply(this,[function(){return h((function e(){d(this,e)}))}()].concat(t))}},{key:"mixObject",value:function(e,t){var r,n=i(Object.getOwnPropertyNames(e));try{for(n.s();!(r=n.n()).done;){var o=r.value;"function"!=typeof e[o]?t[o]=e[o]:t[o]=e[o].bind(t)}}catch(e){n.e(e)}finally{n.f()}var a,u=i(Object.getOwnPropertySymbols(e));try{for(u.s();!(a=u.n()).done;){var c=a.value;"function"!=typeof e[c]?t[c]=e[c]:t[c]=e[c].bind(t)}}catch(e){u.e(e)}finally{u.f()}}},{key:"mixClass",value:function(e,t){var r,n=i(Object.getOwnPropertyNames(e.prototype));try{for(n.s();!(r=n.n()).done;){var o=r.value;if(!["name","prototype","length"].includes(o)){var a=Object.getOwnPropertyDescriptor(t,o);a&&!a.writable||("function"==typeof e[o]?t.prototype[o]=e.prototype[o].bind(t.prototype):t.prototype[o]=e.prototype[o])}}}catch(e){n.e(e)}finally{n.f()}var u,c=i(Object.getOwnPropertySymbols(e.prototype));try{for(c.s();!(u=c.n()).done;){var s=u.value;"function"==typeof e[s]?t.prototype[s]=e.prototype[s].bind(t.prototype):t.prototype[s]=e.prototype[s]}}catch(e){c.e(e)}finally{c.f()}var l,f=i(Object.getOwnPropertyNames(e));try{var p=function(){var r=l.value;if(["name","prototype","length"].includes(r))return"continue";var n=Object.getOwnPropertyDescriptor(t,r);if(n&&!n.writable)return"continue";if("function"!=typeof e[r])return t[r]=e[r],"continue";var o=t[r]||!1,i=e[r].bind(t);t[r]=function(){return o&&o.apply(void 0,arguments),i.apply(void 0,arguments)}};for(f.s();!(l=f.n()).done;)p()}catch(e){f.e(e)}finally{f.f()}var y,d=i(Object.getOwnPropertySymbols(e));try{var v=function(){var r=y.value;if("function"!=typeof e[r])return t.prototype[r]=e[r],"continue";var n=t[r]||!1,o=e[r].bind(t);t[r]=function(){return n&&n.apply(void 0,arguments),o.apply(void 0,arguments)}};for(d.s();!(y=d.n()).done;)v()}catch(e){d.e(e)}finally{d.f()}}},{key:"mix",value:function(t){for(var r={},o={},a=e.Bindable.makeBindable(t),u=function(e){var t,u=Object.getOwnPropertyNames(e.prototype),c=Object.getOwnPropertyNames(e),s=/^(before|after)__(.+)/,l=i(c);try{var f=function(){var o=t.value,i=o.match(s);if(i){switch(i[1]){case"before":a.___before((function(t,r,a,u,c){if(r===i[2])return e[o].bind(u).apply(void 0,n(c))}));break;case"after":a.___after((function(t,r,a,u,c){if(r===i[2])return e[o].bind(u).apply(void 0,n(c))}))}return"continue"}return r[o]||"function"!=typeof e[o]?"continue":void(r[o]=e[o])};for(l.s();!(t=l.n()).done;)f()}catch(e){l.e(e)}finally{l.f()}var p,y=i(u);try{var d=function(){var t=p.value,r=t.match(s);if(r){switch(r[1]){case"before":a.___before((function(o,i,a,u,c){if(i===r[2])return e.prototype[t].bind(u).apply(void 0,n(c))}));break;case"after":a.___after((function(o,i,a,u,c){if(i===r[2])return e.prototype[t].bind(u).apply(void 0,n(c))}))}return"continue"}return o[t]||"function"!=typeof e.prototype[t]?"continue":void(o[t]=e.prototype[t])};for(y.s();!(p=y.n()).done;)d()}catch(e){y.e(e)}finally{y.f()}},c=this;c&&c.prototype;c=Object.getPrototypeOf(c))u(c);for(var s in r)t[s]=r[s].bind(t);var l=function(e){t.prototype[e]=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return o[e].apply(this,r)}};for(var f in o)l(f);return a}}]),t}());t.Mixin=m,m.Constructor=b}()})),require.register("curvature/base/Model.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var e=r("./Cache"),n=r("./Bindable");r("./Repository");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.repository=e}var r,i,a;return r=t,(i=[{key:"consume",value:function(r){for(var o in r){var i=r[o];if(r[o]instanceof Object&&r[o].class&&r[o].publicId){var a="".concat(r[o].class,"::").concat(r[o].publidId),u=e.Cache.load(a,!1,"model-type-repo");i=n.Bindable.makeBindable(new t(this.repository)),u&&(i=u),i.consume(r[o]),e.Cache.store(a,i,0,"model-type-repo")}this[o]=i}}}])&&o(r.prototype,i),a&&o(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Model=i}()})),require.register("curvature/base/Repository.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Repository=void 0;var e=r("./Bindable"),n=r("./Router"),o=r("./Cache"),i=r("./Model"),a=r("./Bag"),u=r("../form/Form"),c=r("../form/multiField/FormWrapper");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.uri=e}var r,f,p;return r=t,f=[{key:"get",value:function(e){var r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=this.uri+"/"+e,c=o.Cache.load(u+n.Router.queryToString(n.Router.queryOver(a),!0),!1,"model-uri-repo");return!i&&c?Promise.resolve(c):t.request(u,a).then((function(e){return r.extractModel(e.body)}))}},{key:"page",value:function(){var e=this,r=arguments.length>1?arguments[1]:void 0;return t.request(this.uri,r).then((function(t){var r=[];for(var n in t.body){var o=t.body[n];r.push(e.extractModel(o))}return t.body=r,t}))}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.uri+"/create";return e&&(o=this.uri+"/"+e+"/edit"),r?t.request(o,{api:"json"},r).then((function(e){return e.body})):t.request(o).then((function(e){var t=new u.Form(e.meta.form,n);return new c.FormWrapper(t,o,"POST",n)}))}},{key:"extractModel",value:function(t){var r=e.Bindable.makeBindable(new i.Model(this));if(r.consume(t),this.uri,r.publicId,r.class){var n="".concat(r.class,"::").concat(r.publidId);o.Cache.load(n,!1,"model-type-repo")}return r}}],p=[{key:"loadPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request(this.uri,e).then((function(e){return e}))}},{key:"domCache",value:function(e,t){}},{key:"load",value:function(e){return this.objects=this.objects||{},this.objects[this.uri]=this.objects[this.uri]||{},this.objects[this.uri][e]?Promise.resolve(this.objects[this.uri][e]):this.request(this.uri+"/"+e).then((function(e){}))}},{key:"form",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.uri+"/create";return e&&(t=this.uri+"/"+e+"/edit"),this.request(t).then((function(e){return e}))}},{key:"clearCache",value:function(){this.objects&&this.objects[this.uri]&&(this.objects[this.uri]={})}},{key:"encode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var n in r||(r=new FormData),e){var o=n;t&&(o="".concat(t,"[").concat(o,"]")),e[n]&&"object"!==s(e[n])?r.append(o,e[n]):this.encode(e[n],o,r)}return r}},{key:"onResponse",value:function(e){return this._onResponse||(this._onResponse=new a.Bag),this._onResponse.add(e)}},{key:"request",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u="GET",c="",s=null,l={};r&&(l=r),this._onResponse||(this._onResponse=new a.Bag),this.runningRequests||(this.runningRequests={}),l.api=l.api||"json",c=Object.keys(l).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(l[e])})).join("&");var f=e;if(f=e+"?"+c,!n&&this.runningRequests[f])return this.runningRequests[f];n&&(o=!1,u="POST",s=n instanceof FormData?n:this.encode(n));var p=new XMLHttpRequest;if("responseType"in i&&(p.responseType=i.responseType),!n&&o&&this.cache&&this.cache[f])return Promise.resolve(this.cache[f]);var y='script[data-uri="'+f+'"]',d=document.querySelector(y);if(!n&&o&&d){var v=JSON.parse(d.innerText);return Promise.resolve(v)}p.withCredentials=!("withCredentials"in i)||i.withCredentials;var h=document.createElement("a");h.href=f,n||(p.timeout=i.timeout||15e3,this.xhrs[f]=p);var b=new Promise((function(e,r){if(n&&"progressUp"in i&&(p.upload.onprogress=i.progressUp),"progressDown"in i&&(p.onprogress=i.progressDown),p.onreadystatechange=function(){var n;if(4===p.readyState)if(delete t.xhrs[f],delete t.runningRequests[f],t.cache||(t.cache={}),"application/json"==p.getResponseHeader("Content-Type")||"application/json; charset=utf-8"==p.getResponseHeader("Content-Type")||"text/json"==p.getResponseHeader("Content-Type")||"text/json; charset=utf-8"==p.getResponseHeader("Content-Type"))if((n=JSON.parse(p.responseText))&&0==n.code){var o=document.querySelector('script[data-uri="'+f+'"]');(window.prerenderer||navigator.userAgent.match(/prerender/i))&&(window.prerenderer=window.prerenderer||!0,o||((o=document.createElement("script")).type="text/json",o.setAttribute("data-hack","application/ld+json-NOT!"),o.setAttribute("data-uri",f),document.head.appendChild(o)),o.innerText=JSON.stringify(n));var i=t._onResponse.items();for(var a in i)i[a](n,!0);n._http=p.status,200===p.status?e(n):r(n)}else{var u=t._onResponse.items();for(var c in u)u[c](n,!0);r(n)}else{var s=t._onResponse.items();for(var l in s)s[l](p,!0);200===p.status?e(p):r(p)}},p.open(u,f,!0),i.headers)for(var o in i.headers)p.setRequestHeader(o,i.headers[o]);p.send(s)}));return n||(this.runningRequests[f]=b),b}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:/^.$/;for(var t in this.xhrs)this.xhrs[t]&&t.match(e)&&(this.xhrs[t].abort(),delete this.xhrs[t])}}],f&&l(r.prototype,f),p&&l(r,p),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Repository=f,f.xhrs=[]}()})),require.register("curvature/base/Router.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var e,n=r("./View"),o=(r("./Cache"),r("./Config")),i=r("./Routes");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=Symbol("NotFound"),y=Symbol("Internal");globalThis.CustomEvent=null!==(e=globalThis.CustomEvent)&&void 0!==e?e:globalThis.Event;var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,c;return t=e,c=[{key:"wait",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;n.addEventListener(r,(function(){t.listen(e)}))}},{key:"listen",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.listener=e||this.listener,this.routes=r||e.routes,Object.assign(this.query,this.queryOver({}));var n=function(r){r.preventDefault(),r.state&&"routedId"in r.state?(r.state.routedId<=t.routeCount?(t.history.splice(r.state.routedId),t.routeCount=r.state.routedId):r.state.routedId>t.routeCount&&(t.history.push(r.state.prev),t.routeCount=r.state.routedId),t.state=r.state):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),"null"!==location.origin?t.match(location.pathname,e):t.match(t.nextPath,e)};window.addEventListener("cvUrlChanged",n),window.addEventListener("popstate",n);var o="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(o+=location.hash);var i={routedId:this.routeCount,url:location.pathname,prev:this.prevPath};"null"!==location.origin&&history.replaceState(i,null,location.pathname),this.go(!1!==o?o:"/")}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=o.Config.get("title");r&&(document.title=r);var n={routedId:this.routeCount,prev:this.prevPath,url:location.pathname};-1===t?this.match(e,this.listener,!0):"null"===location.origin?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState(n,null,e):location.pathname!==e&&history.pushState(n,null,e),(!t||t<0)&&(!1===t&&(this.path=null),t||("#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged")))),this.prevPath=e}},{key:"processRoute",value:function(e,t,r){return"function"==typeof e[t]?e[t].prototype instanceof n.View?new e[t](r):e[t](r):e[t]}},{key:"handleError",value:function(e,t,r,n,o,i,a,u){console.error(e),"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:i,prev:a,view:o,routes:t,selected:r}}));var c=globalThis.devMode?"Unexpected error: "+String(e):"Unexpected error.";t[y]&&(n[y]=e,c=this.processRoute(t,y,n)),this.update(o,i,c,t,r,n,u)}},{key:"match",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=null,c=!1;if(!0===n&&(c=n),n&&"object"===l(n)&&(c=n.forceRefresh,o=n.event),"undefined"==typeof document||this.path!==e||c){var s="http://example.com";"undefined"!=typeof document&&(s="null"!==location.origin?location.origin:s,this.queryString=location.search);var f=new URL(e,s);e=this.path=f.pathname,"undefined"==typeof document&&(this.queryString=f.search);var y=this.prevPath,d=t&&t.args?t.args.content:null,v=this.routes||t&&t.routes||i.Routes.dump(),h=new URLSearchParams(this.queryString);for(var b in o&&o.request&&(this.request=o.request),Object.keys(this.query))delete this.query[b];var m,g=u(h);try{for(g.s();!(m=g.n()).done;){var w=a(m.value,2),O=w[0],j=w[1];this.query[O]=j}}catch(e){g.e(e)}finally{g.f()}var P={},S=!1,k="";for(var _ in"/"===e.substring(0,1)&&(e=e.substring(1)),e=e.split("/"),this.query)P[_]=this.query[_];e:for(var E in v){var R=E.split("/");if(!(R.length<e.length&&"*"!==R[R.length-1])){for(var T in R)if("%"==R[T].substr(0,1)){var C=null,A=/^%(\w+)\??/.exec(R[T]);if(A&&A[1]&&(C=A[1]),!C)throw new Error("".concat(R[T],' is not a valid argument segment in route "').concat(E,'"'));if(e[T])P[C]=e[T];else{if("?"!=R[T].substr(R[T].length-1,1))continue e;P[C]=""}}else if("*"!==R[T]&&e[T]!==R[T])continue e;S=E,k=v[E],"*"===R[R.length-1]&&(P.pathparts=e.slice(R.length-1));break}}var x=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:e,prev:y,root:t,selected:S,routes:v}});if("undefined"==typeof document||document.dispatchEvent(x)){if(!c&&t&&d&&k instanceof Object&&d instanceof k&&!(k instanceof Promise)&&d.update(P))return t.args.content=d,!0;S in v||(v[S]=v[p]);try{return!1===(k=this.processRoute(v,S,P))&&(k=this.processRoute(v,p,P)),k instanceof Promise||(k=Promise.resolve(k)),"undefined"==typeof document?k:k.then((function(n){r.update(t,e,n,v,S,P,c)})).catch((function(n){r.handleError(n,v,S,P,t,e,y,c)}))}catch(r){this.handleError(r,v,S,P,t,e,y,c)}}}}},{key:"update",value:function(e,t,r,o,i,a,u){if(e){var c=this.prevPath,s=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:t,prev:c,view:e,routes:o,selected:i}});!1!==r&&(e.args.content instanceof n.View&&(e.args.content.pause(!0),e.args.content.remove()),document.dispatchEvent(s)&&(e.args.content=r),r instanceof n.View&&(r.pause(!1),r.update(a,u)));var l=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:t,prev:c,view:e,routes:o,selected:i}});document.dispatchEvent(l)}}},{key:"queryOver",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new URLSearchParams(location.search),n={},o={},i=u(r);try{for(i.s();!(e=i.n()).done;){var a=e.value;o[a[0]]=a[1]}}catch(e){i.e(e)}finally{i.f()}return delete(n=Object.assign(n,o,t)).api,n}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=e;for(var o in t||(n=this.queryOver(e)),n)""!==n[o]&&r.push(o+"="+encodeURIComponent(n[o]));return r.join("&")}},{key:"setQuery",value:function(e,t,r){var n=this.queryOver();n[e]=t,void 0===t&&delete n[e];var o=this.queryToString(n,!0);this.go(location.pathname+(o?"?"+o:"?"),r)}}],(r=null)&&f(t.prototype,r),c&&f(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Router=d,Object.defineProperty(d,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(d,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(d,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(d,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(d,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(d,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:y}),Object.defineProperty(d,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:p})}()})),require.register("curvature/base/Routes.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=void 0;var n={},o=r,i=!1,a=function(){if(!i){try{Object.assign(n,o("Routes").Routes||{})}catch(e){!0===globalThis.devMode&&console.warn(e)}i=!0}},u=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,o;return r=t,o=[{key:"get",value:function(e){return a(),this.routes[e]}},{key:"dump",value:function(){return a(),this.routes}}],(n=null)&&e(r.prototype,n),o&&e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Routes=u,Object.defineProperty(u,"routes",{configurable:!1,enumerable:!1,writable:!1,value:n})}()})),require.register("curvature/base/RuleSet.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0;r("./Dom");var e=r("./Tag"),n=r("./View");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,a,u;return r=t,a=[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in t.apply(e,r),this.rules)for(var o in this.rules[n]){var a,u=this.rules[n][o],c=t.wrap(e,u,r),s=e.querySelectorAll(n),l=i(s);try{for(l.s();!(a=l.n()).done;){var f=a.value;c(f)}}catch(e){l.e(e)}finally{l.f()}}}},{key:"purge",value:function(){if(this.rules)for(var e=0,t=Object.entries(this.rules);e<t.length;e++){var r=o(t[e],2),n=r[0];if(r[1],this.rules[n])for(var i in this.rules[n])delete this.rules[n][i]}}}],u=[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in this.globalRules)for(var n in this.globalRules[r]){var o,a=this.globalRules[r][n],u=this.wrap(e,a,t),c=e.querySelectorAll(r),s=i(c);try{for(s.s();!(o=s.n()).done;){var l=o.value;u(l)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=function(t,r){return function(){return r.removeEventListener(t,n),e.apply()}}(t,r);r.addEventListener(t,n)}},{key:"wrap",value:function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=r;return(r instanceof n.View||r&&r.prototype&&r.prototype instanceof n.View)&&(i=function(){return r}),function(t){if(void 0===t.___cvApplied___&&Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!t.___cvApplied___.has(r)){var a,u;o&&(a=u=o,o.viewList&&(u=o.viewList.parent));var c,s=new e.Tag(t,u,null,void 0,a),l=s.element.parentNode,f=s.element.nextSibling,p=i(s);if(!1!==p&&t.___cvApplied___.add(r),p instanceof HTMLElement&&(p=new e.Tag(p)),p instanceof e.Tag){if(!p.element.contains(s.element)){for(;s.element.firstChild;)p.element.appendChild(s.element.firstChild);s.remove()}f?l.insertBefore(p.element,f):l.appendChild(p.element)}p&&p.prototype&&p.prototype instanceof n.View&&(p=new p({},o)),p instanceof n.View&&(o&&(o.cleanup.push((c=p,function(){c.remove()})),o.cleanup.push(o.args.bindTo((function(e,t,r){r[t]=e,p.args[t]=e}))),o.cleanup.push(p.args.bindTo((function(e,t,r,n){r[t]=e,o.args[t]=e})))),s.clear(),p.render(s.element))}}}}],a&&c(r.prototype,a),u&&c(r,u),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.RuleSet=s}()})),require.register("curvature/base/SetMap.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t,o,i){return e=r()?Reflect.construct:function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n(i,r.prototype),i},e.apply(null,arguments)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.SetMap=void 0;var c=function(){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r="_map",n=new Map,r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}var r,n,a;return r=t,(n=[{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"getOne",value:function(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}(this.get(e));try{for(r.s();!(t=r.n()).done;)return t.value}catch(e){r.e(e)}finally{r.f()}}},{key:"add",value:function(e,t){var r=this._map.get(e);return r||this._map.set(e,r=new Set),r.add(t)}},{key:"remove",value:function(e,t){var r=this._map.get(e);if(r){var n=r.delete(t);return r.size||this._map.delete(e),n}}},{key:"values",value:function(){return e(Set,o(o(this._map.values()).map((function(e){return o(e.values())}))))}}])&&u(r.prototype,n),a&&u(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.SetMap=c}()})),require.register("curvature/base/Tag.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var e=r("./Bindable");function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=Symbol("CurrentStyle"),i=function(e){if(this.node)for(var t in e){var r=String(e[t]);this[o].has(t)&&this[o].get(t)===e[t]||("-"===t[0]?this.node.style.setProperty(t,r):this.node.style[t]=r,void 0!==e[t]?this[o].set(t,e[t]):this[o].delete(t))}},a=function(e){var t=this;return"function"==typeof this[e]?this[e]:this.node&&"function"==typeof this.node[e]?function(){var r;return(r=t.node)[e].apply(r,arguments)}:"style"===e?this.proxy.style:this.node&&e in this.node?this.node[e]:this[e]},u=function(){function t(r,n,u,c,s){var l=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof r){var f=document.createRange().createContextualFragment(r);r=f.firstChild}this.element=e.Bindable.makeBindable(r),this.node=this.element,this.parent=n,this.direct=s,this.ref=u,this.index=c,this.cleanup=[],this[e.Bindable.OnAllGet]=a.bind(this),this[o]=new Map;var p=e.Bindable.make(i.bind(this));return Object.defineProperty(this,"style",{value:p}),this.proxy=e.Bindable.make(this),this.proxy.style.bindTo((function(e,t,r,n){l[o].has(t)&&l[o].get(t)===e||(l.node.style[t]=e,n||void 0===e?l[o].delete(t):l[o].set(t,e))})),this.proxy.bindTo((function(e,t){if("index"!==t)return t in r&&r[t]!==e&&(r[t]=e),!1})),this.proxy}var r,u,c;return r=t,(u=[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t]);return this}},{key:"remove",value:function(){var t;for(this.node&&this.node.remove(),e.Bindable.clearBindings(this);t=this.cleanup.shift();)t();if(this.clear(),this.node){var r=new Event("cvDomDetached");this.node.dispatchEvent(r),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){}},{key:"listen",value:function(e,t,r){var n=this.node;n.addEventListener(e,t,r);var o=function(){n.removeEventListener(e,t,r)},i=function(){o(),o=function(){return console.warn("Already removed!")}};return this.parent.onRemove((function(){return i()})),i}}])&&n(r.prototype,u),c&&n(r,c),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Tag=u}()})),require.register("curvature/base/Theme.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=void 0;var l=function(){function e(t){var r;a(this,e),s(this,"themes",[]),(r=this.themes).push.apply(r,n(t))}return c(e,[{key:"getTemplate",value:function(e){for(var t in this.themes){var r=this.themes[t].getTemplate(e);if(r)return r}}},{key:"getView",value:function(e){for(var t in this.themes){var r=this.themes[t].getView(e);if(r)return r}}}]),e}(),f=function(){function t(e){a(this,t),this.key=e,this.viewMap=new Map,this.templateMap=new Map,this.fallbacks=[]}return c(t,[{key:"setFallback",value:function(){var e;return(e=this.fallbacks).push.apply(e,arguments),this}},{key:"setView",value:function(e,t){return this.viewMap.set(e,t),this}},{key:"getView",value:function(e){var t=this.resolve(e,"viewMap");return t?new t(e):null}},{key:"setTemplate",value:function(e,t){return this.templateMap.set(e,t),this}},{key:"getTemplate",value:function(e){return this.resolve(e,"templateMap")}},{key:"resolve",value:function(t,n){t.___object___&&t.isBound&&(t=t.___object___);var o=t.__proto__.constructor,i=this[n];if(i.has(o,t))return i.get(o);var a,u=null,c=r(i);try{for(c.s();!(a=c.n()).done;){var s=e(a.value,2),l=s[0],f=s[1];t instanceof l&&(u=f)}}catch(e){c.e(e)}finally{c.f()}if(!u){var p,y=r(this.fallbacks);try{for(y.s();!(p=y.n()).done;){if(u=p.value.resolve(t,n))return u}}catch(e){y.e(e)}finally{y.f()}}return u&&i.set(o,u),u}}],[{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length<=1){var n=String(t[0]||"");return this.instances[n]||(this.instances[n]=new this(n)),this.instances[n]}var o=[];for(var i in t)o.push(this.get(t[i]));return new l(o)}}]),t}();t.Theme=f,s(f,"instances",{})}()})),require.register("curvature/base/Uuid.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";var e;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Uuid=void 0,e=Symbol.toPrimitive;var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(r(this,t),o(this,"uuid",null),o(this,"version",4),e){if(!e||"string"!=typeof e&&!(e instanceof t)||!e.match(/[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}/))throw new Error('Invalid input for Uuid: "'.concat(e,'"'));this.version=n,this.uuid=e}else"function"==typeof crypto.randomUUID?this.uuid=crypto.randomUUID():this.uuid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}));Object.freeze(this)}var i,a,u;return i=t,(a=[{key:e,value:function(){return this.toString()}},{key:"toString",value:function(){return this.uuid}},{key:"toJson",value:function(){return{version:this.version,uuid:this.uuid}}}])&&n(i.prototype,a),u&&n(i,u),Object.defineProperty(i,"prototype",{writable:!1}),t}();t.Uuid=i}()})),require.register("curvature/base/View.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=r("./Bindable"),n=r("./ViewList"),o=r("./Router"),i=r("./Uuid"),a=r("./Dom"),u=r("./Tag"),c=r("./Bag"),s=r("./RuleSet"),l=r("./Mixin"),f=(r("../mixin/PromiseMixin"),r("../mixin/EventTargetMixin"));function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=h(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function h(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var o=S(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var k=Symbol("dontParse"),_=Symbol("expandBind"),E=Symbol("uuid"),R=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(j,t);var l,f,h,b=O(j);function j(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return m(this,j),t=b.call(this,r,n),Object.defineProperty(P(t),"args",{value:e.Bindable.make(r)}),Object.defineProperty(P(t),E,{value:t.constructor.uuid()}),Object.defineProperty(P(t),"nodesAttached",{value:new c.Bag((function(e,t,r){}))}),Object.defineProperty(P(t),"nodesDetached",{value:new c.Bag((function(e,t,r){}))}),Object.defineProperty(P(t),"_onRemove",{value:new c.Bag((function(e,t,r){}))}),Object.defineProperty(P(t),"cleanup",{value:[]}),Object.defineProperty(P(t),"parent",{value:n}),Object.defineProperty(P(t),"views",{value:new Map}),Object.defineProperty(P(t),"viewLists",{value:new Map}),Object.defineProperty(P(t),"withViews",{value:new Map}),Object.defineProperty(P(t),"tags",{value:e.Bindable.make({})}),Object.defineProperty(P(t),"nodes",{value:e.Bindable.make([])}),Object.defineProperty(P(t),"timeouts",{value:new Map}),Object.defineProperty(P(t),"intervals",{value:[]}),Object.defineProperty(P(t),"frames",{value:[]}),Object.defineProperty(P(t),"ruleSet",{value:new s.RuleSet}),Object.defineProperty(P(t),"preRuleSet",{value:new s.RuleSet}),Object.defineProperty(P(t),"subBindings",{value:{}}),Object.defineProperty(P(t),"templates",{value:{}}),Object.defineProperty(P(t),"eventCleanup",{value:[]}),Object.defineProperty(P(t),"unpauseCallbacks",{value:new Map}),Object.defineProperty(P(t),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(P(t),"rendered",{value:new Promise((function(e,r){return Object.defineProperty(P(t),"renderComplete",{value:e})}))}),t.controller=P(t),t.loaded=Promise.resolve(P(t)),t.template="",t.firstNode=null,t.lastNode=null,t.viewList=null,t.mainView=null,t.preserve=!1,t.removed=!1,t}return l=j,f=[{key:"_id",get:function(){return this[E]}},{key:"onFrame",value:function(e){var t=this,r=!1,n=function(){r=!0},o=function n(o){t.removed||r||(t.paused||e(Date.now()),requestAnimationFrame(n))};return requestAnimationFrame((function(){return o(Date.now())})),this.frames.push(n),n}},{key:"onNextFrame",value:function(e){return requestAnimationFrame((function(){return e(Date.now())}))}},{key:"onIdle",value:function(e){return requestIdleCallback((function(){return e(Date.now())}))}},{key:"onTimeout",value:function(e,t){var r=this,n={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},o=function(){t(),n.fired=!0,r.timeouts.delete(n.timeout)},i=setTimeout(o,e);return n.callback=o,n.timeout=i,this.timeouts.set(n.timeout,n),i}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t,r=v(this.timeouts);try{for(r.s();!(t=r.n()).done;){var n=d(t.value,2),o=(n[0],n[1]);clearTimeout(o.timeout),this.timeouts.delete(o.timeout)}}catch(e){r.e(e)}finally{r.f()}}))},{key:"onInterval",value:function(e,t){var r=setInterval(t,e);return this.intervals.push({timeout:r,callback:t,time:e,paused:!1}),r}},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])}))},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){var t,r=v(this.timeouts);try{for(r.s();!(t=r.n()).done;){var n=d(t.value,2),o=(n[0],n[1]);o.fired?this.timeouts.delete(o.timeout):(clearTimeout(o.timeout),o.paused=!0,o.time=Math.max(0,o.time-(Date.now()-o.created)))}}catch(e){r.e(e)}finally{r.f()}for(var i in this.intervals)clearInterval(this.intervals[i].timeout)}else{var a,u=v(this.timeouts);try{for(u.s();!(a=u.n()).done;){var c=d(a.value,2),s=(c[0],c[1]);s.paused&&(s.fired?this.timeouts.delete(s.timeout):(s.timeout=setTimeout(s.callback,s.time),s.paused=!1))}}catch(e){u.e(e)}finally{u.f()}for(var l in this.intervals)this.intervals[l].timeout.paused&&(this.intervals[l].timeout.paused=!1,this.intervals[l].timeout=setInterval(this.intervals[l].callback,this.intervals[l].time));var f,p=v(this.unpauseCallbacks);try{for(p.s();!(f=p.n()).done;){var y=d(f.value,2),h=y[1];h()}}catch(e){p.e(e)}finally{p.f()}this.unpauseCallbacks.clear()}var b,m=v(this.viewLists);try{for(m.s();!(b=m.n()).done;){var g=d(b.value,2),w=(g[0],g[1]);w.pause(!!e)}}catch(e){m.e(e)}finally{m.f()}for(var O in this.tags)if(Array.isArray(this.tags[O]))for(var j in this.tags[O])this.tags[O][j].pause(!!e);else this.tags[O].pause(!!e)}},{key:"render",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r instanceof j&&(r=r.firstNode.parentNode),n instanceof j&&(n=n.firstNode),this.firstNode)return this.reRender(r,n);this.dispatchEvent(new CustomEvent("render"));var o=this.template instanceof DocumentFragment?this.template.cloneNode(!0):j.templates.has(this.template),i=o?this.template instanceof DocumentFragment?o:j.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(o||this.template instanceof DocumentFragment||j.templates.set(this.template,i.cloneNode(!0)),this.mainView||this.preRuleSet.apply(i,this),this.mapTags(i),this.mainView||this.ruleSet.apply(i,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(y(Array.from(i.childNodes)),[this.lastNode])),this.postRender(r),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(r){var a=r.getRootNode();if(n?(r.insertBefore(this.firstNode,n),r.insertBefore(this.lastNode,n)):(r.appendChild(this.firstNode),r.appendChild(this.lastNode)),r.insertBefore(i,this.lastNode),a.isConnected)this.attached(a,r),this.dispatchAttached(a,r);else{var u=function e(n){n.target.isConnected&&(t.attached(a,r),t.dispatchAttached(a,r),r.removeEventListener("cvDomAttached",e))};r.addEventListener("cvDomAttached",u)}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.dispatchEvent(new CustomEvent("attached",{detail:{view:r||this,node:t,root:e,mainView:this}})),this.dispatchDomAttached(r);var n,o=v(this.nodesAttached.items());try{for(o.s();!(n=o.n()).done;){var i=n.value;i(e,t)}}catch(e){o.e(e)}finally{o.f()}}},{key:"dispatchDomAttached",value:function(e){var t=this;this.nodes.filter((function(e){return e.nodeType!==Node.COMMENT_NODE})).forEach((function(r){r.matches&&(a.Dom.mapTags(r,!1,(function(r,n){r.matches&&r.dispatchEvent(new CustomEvent("cvDomAttached",{target:r,detail:{view:e||t,mainView:t}}))})),r.dispatchEvent(new CustomEvent("cvDomAttached",{target:r,detail:{view:e||t,mainView:t}})))}))}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var r=new DocumentFragment;if(this.firstNode.isConnected){var n=this.nodesDetached.items();for(var o in n)n[o]()}if(r.append.apply(r,y(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(r,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var i=e.getRootNode();i.isConnected&&(this.attached(i,e),this.dispatchAttached(i,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;a.Dom.mapTags(e,!1,(function(e,r){e[k]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:t.mapInterpolatableTag(e))!==r.currentNode&&(r.currentNode=e)}))}},{key:"mapExpandableTag",value:function(t){var r=t[_];r&&(r(),t[_]=!1);var n=d(e.Bindable.resolve(this.args,t.getAttribute("cv-expand"),!0),2),o=n[0],i=n[1];return t.removeAttribute("cv-expand"),o[i]||(o[i]={}),o[i]=e.Bindable.make(o[i]),this.onRemove(t[_]=o[i].bindTo((function(e,r,n,o,i){o||void 0===e?t.removeAttribute(r,e):null!==e?t.setAttribute(r,e):t.setAttribute(r,"")}))),t}},{key:"compileExpandableTag",value:function(t){return function(r){var n=t.cloneNode(!0),o=n.getAttribute("cv-expand"),i=e.Bindable.make(r.args[o]||{});n.removeAttribute("cv-expand");var a=function(t){if("name"===t||"type"===t)return"continue";var o=i.bindTo(t,function(e,t){return function(r){e.setAttribute(t,r)}}(n,t));r.onRemove((function(){o(),i.isBound()&&e.Bindable.clearBindings(i)}))};for(var u in i)a(u);return n}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(t){var r=t.getAttribute("cv-attr").split(",").map((function(e){return e.split(":")}));return t.removeAttribute("cv-attr"),function(n){var o=t.cloneNode(!0),i=function(t){var i=r[t][1]||r[t][0],a=d(e.Bindable.resolve(n.args,i,!0),2),u=a[0],c=a[1],s=r[t][0];n.onRemove(u.bindTo(c,(function(e,t,r,n){n||void 0===e?o.removeAttribute(s,e):null!==e?o.setAttribute(s,e):o.setAttribute(s,"")})))};for(var a in r)i(a);return o}}},{key:"mapInterpolatableTag",value:function(t){var r=this,n=this.interpolateRegex;if(t.nodeType===Node.TEXT_NODE){var o=t.nodeValue;if(!this.interpolatable(o))return t;for(var i,a=0,c=function(){var n=i[2],c=!1,s=!1,l=n.split("|"),f=!1;if(l.length>1&&(f=r.stringTransformer(l.slice(1)),n=l[0]),"$$"===n.substr(0,2)&&(c=!0,s=!0,n=n.substr(2)),"$"===n.substr(0,1)&&(c=!0,n=n.substr(1)),"000"===n.substr(0,3))return expand=!0,n=n.substr(3),"continue";var y=o.substring(a,i.index);a=i.index+i[1].length;var v=document.createTextNode(y);v[k]=!0,t.parentNode.insertBefore(v,t);var h=void 0;(h=c?document.createElement("div"):document.createTextNode(""))[k]=!0;var b=r.args,m=n;if(n.match(/\./)){var g=d(e.Bindable.resolve(r.args,n,!0),2);b=g[0],m=g[1]}if(t.parentNode.insertBefore(h,t),"object"!==p(b))return"break";var w=(b=e.Bindable.make(b)).bindTo(m,(function(e,n,o){if(o[n]!==e&&(o[n]instanceof j||o[n]instanceof Node||o[n]instanceof u.Tag)&&(o[n].preserve||o[n].remove()),h.nodeValue="",s&&!(e instanceof j)){var i,a=null!==(i=e)&&void 0!==i?i:"";(e=new j(r.args,r)).template=a}if(f&&(e=f(e)),e instanceof j){var l=function(t,n){e.dispatchAttached(t,n,r)};r.nodesAttached.add(l),e.render(t.parentNode,h);var p=function(){e.preserve||e.remove()};r.onRemove(p),e.onRemove((function(){r.nodesAttached.remove(l),r._onRemove.remove(p)}))}else e instanceof Node?(t.parentNode.insertBefore(e,h),r.onRemove((function(){return e.remove()}))):e instanceof u.Tag?e.node?(t.parentNode.insertBefore(e.node,h),r.onRemove((function(){return e.remove()}))):e.remove():(e instanceof Object&&e.__toString instanceof Function&&(e=e.__toString()),c?h.innerHTML=e:h.nodeValue=e);h[k]=!0}));r.onRemove(w)};i=n.exec(o);){var s=c();if("continue"!==s&&"break"===s)break}var l=o.substring(a),f=document.createTextNode(l);f[k]=!0,t.parentNode.insertBefore(f,t),t.nodeValue=""}else if(t.nodeType===Node.ELEMENT_NODE)for(var y=function(o){if(!r.interpolatable(t.attributes[o].value))return"continue";for(var i=0,a=void 0,u=t.attributes[o].value,c=t.attributes[o],s={},l=[];a=n.exec(u);)l.push(u.substring(i,a.index)),s[a[2]]||(s[a[2]]=[]),s[a[2]].push(l.length),l.push(a[1]),i=a.index+a[1].length;l.push(u.substring(i));var f=function(n){var o=r.args,i=n,a=n.split("|"),u=!1,f=n;if(a.length>1&&(u=r.stringTransformer(a.slice(1)),i=a[0]),i.match(/\./)){var p=d(e.Bindable.resolve(r.args,i,!0),2);o=p[0],i=p[1]}s[f],r.onRemove(o.bindTo(i,(function(e,n,o,a){for(var p in u&&(e=u(e)),s)for(var y in s[f])l[s[f][y]]=o[p],n===i&&(l[s[f][y]]=e);r.paused?r.unpauseCallbacks.set(c,(function(){return t.setAttribute(c.name,l.join(""))})):t.setAttribute(c.name,l.join(""))}))),r.onRemove((function(){o.isBound()||e.Bindable.clearBindings(o)}))};for(var p in s)f(p)},v=0;v<t.attributes.length;v++)y(v);return t}},{key:"mapRefTag",value:function(e){var t=d(e.getAttribute("cv-ref").split(":"),3),r=t[0],n=t[1],o=void 0===n?null:n,i=t[2],a=void 0===i?null:i,c=u.Tag;o&&(c=this.stringToClass(o)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove((function(){e.___tag___=null,e.remove()}));var s=this;this.viewList&&(s=this.viewList.parent);var l=new c(e,this,r,void 0,this);for(e.___tag___=l,this.tags[r]=l;s;){var f=this.args[a];if(void 0!==f?(s.tags[r]||(s.tags[r]=[]),s.tags[r][f]=l):s.tags[r]=l,!s.parent)break;s=s.parent}return e}},{key:"mapBindTag",value:function(t){var r=this,n=t.getAttribute("cv-bind"),o=this.args,i=n,c=null;if(n.match(/\./)){var s=d(e.Bindable.resolve(this.args,n,!0),3);o=s[0],i=s[1],c=s[2]}o!==this.args&&(this.subBindings[n]=this.subBindings[n]||[],this.onRemove(this.args.bindTo(c,(function(){for(;r.subBindings.length;)r.subBindings.shift()()}))));var l=!1;"$"===i.substr(0,1)&&(i=i.substr(1),l=!0);var f=o.bindTo(i,(function(e,n,o,i,c){(c instanceof j||c instanceof Node||c instanceof u.Tag)&&c!==e&&c.remove();var s=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(t.tagName)){var f=t.getAttribute("type");if(f&&"checkbox"===f.toLowerCase())t.checked=!!e,t.dispatchEvent(s);else if(f&&"radio"===f.toLowerCase())t.checked=e==t.value,t.dispatchEvent(s);else if("file"!==f){if("SELECT"===t.tagName){var p=function(){for(var r=0;r<t.options.length;r++)t.options[r].value==e&&(t.selectedIndex=r)};p(),r.nodesAttached.add(p)}else t.value=null==e?"":e;t.dispatchEvent(s)}}else if(e instanceof j){var y,d=v(t.childNodes);try{for(d.s();!(y=d.n()).done;)y.value.remove()}catch(e){d.e(e)}finally{d.f()}var h=function(t){e.dispatchDomAttached(r)};r.nodesAttached.add(h),e.render(t),e.onRemove((function(){return r.nodesAttached.remove(h)}))}else if(e instanceof Node)t.insert(e);else if(e instanceof u.Tag)t.append(e.node);else if(l){if(t.innerHTML!==e){if(e=String(e),t.innerHTML===e.substring(0,t.innerHTML.length))t.innerHTML+=e.substring(t.innerHTML.length);else{var b,m=v(t.childNodes);try{for(m.s();!(b=m.n()).done;)b.value.remove()}catch(e){m.e(e)}finally{m.f()}t.innerHTML=e}a.Dom.mapTags(t,!1,(function(e){return e[k]=!0}))}}else if(t.textContent!==e){var g,w=v(t.childNodes);try{for(w.s();!(g=w.n()).done;)g.value.remove()}catch(e){w.e(e)}finally{w.f()}t.textContent=e}}));o!==this.args&&this.subBindings[n].push(f),this.onRemove(f);var p=t.getAttribute("type"),y=t.getAttribute("multiple"),h=function(r){if(r.target===t)if(p&&"checkbox"===p.toLowerCase())t.checked?o[i]=r.target.getAttribute("value"):o[i]=!1;else if(r.target.matches("[contenteditable=true]"))o[i]=r.target.innerHTML;else if("file"===p&&y){var n=Array.from(r.target.files),a=o[i]||e.Bindable.onDeck(o,i);if(a&&n.length){var u=function(e){if(n[e]!==a[e])return n[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},a[e]=n[e],"break"};for(var c in n)if("break"===u(c))break}else o[i]=n}else if("file"===p&&!y&&r.target.files.length){var s=r.target.files.item(0);s.toJSON=function(){return{name:s.name,size:s.size,type:s.type,date:s.lastModified}},o[i]=s}else o[i]=r.target.value};return"file"===p||"radio"===p?t.addEventListener("change",h):(t.addEventListener("input",h),t.addEventListener("change",h),t.addEventListener("value-changed",h)),this.onRemove((function(){"file"===p||"radio"===p?t.removeEventListener("change",h):(t.removeEventListener("input",h),t.removeEventListener("change",h),t.removeEventListener("value-changed",h))})),t.removeAttribute("cv-bind"),t}},{key:"mapOnTag",value:function(e){var t=this;return String(e.getAttribute("cv-on")).split(";").map((function(e){return e.split(":")})).forEach((function(r){var n,o=(r=r.map((function(e){return e.trim()}))).length,i=String(r.shift()).trim(),a=String(r.shift()||i).trim(),u=String(r.shift()||"").trim(),c=[],s=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);s&&(a=s[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),s[2]&&(c=s[2].split(",").map((function(e){return e.trim()})))),c.length||c.push("$event"),i&&1!==o||(i=a);for(var l=t,f=function(){var e=l.controller;return"function"==typeof e[a]?(n=function(){e[a].apply(e,arguments)},"break"):"function"==typeof l[a]?(n=function(){var e;(e=l)[a].apply(e,arguments)},"break"):l.parent?void(l=l.parent):"break"};l&&"break"!==f(););var p=function(r){var o=c.map((function(n){var o;return Number(n)==n?n:"event"===n||"$event"===n?r:"$view"===n?l:"$controller"===n?controller:"$tag"===n?e:"$parent"===n?t.parent:"$subview"===n?t:n in t.args?t.args[n]:(o=/^['"]([\w-]+?)["']$/.exec(n))?o[1]:void 0}));if("function"!=typeof n)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));n.apply(void 0,y(o))},d={};switch(u.includes("p")?d.passive=!0:u.includes("P")&&(d.passive=!1),u.includes("c")?d.capture=!0:u.includes("C")&&(d.capture=!1),u.includes("o")?d.once=!0:u.includes("O")&&(d.once=!1),i){case"_init":p();break;case"_attach":t.nodesAttached.add(p);break;case"_detach":t.nodesDetached.add(p);break;default:e.addEventListener(i,p,d),t.onRemove((function(){e.removeEventListener(i,p,d)}))}return[i,a,c]})),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var r=function(r){r.preventDefault(),"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?o.Router.go(e.getAttribute("href")):window.open(e.getAttribute("href",t))};return e.addEventListener("click",r),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,r)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(r){var n=e.cloneNode(!0);return n.setAttribute("href",t),n}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),r=window.prerenderer||navigator.userAgent.match(/prerender/i);return r&&(window.prerenderer=window.prerenderer||!0),("never"===t&&r||"only"===t&&!r)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(t){var r=this,n=t.getAttribute("cv-with"),o=t.getAttribute("cv-carry"),i=t.getAttribute("cv-view");t.removeAttribute("cv-with"),t.removeAttribute("cv-carry"),t.removeAttribute("cv-view");var a=i?this.stringToClass(i):j,u=new DocumentFragment;y(t.childNodes).forEach((function(e){return u.appendChild(e)}));var c=[];o&&(c=o.split(",").map((function(e){return e.trim()})));var s=this.args.bindTo(n,(function(n,o,i,s){for(r.withViews.has(t)&&r.withViews.delete(t);t.firstChild;)t.removeChild(t.firstChild);var l=new a({},r);r.onRemove(function(e){return function(){e.remove()}}(l)),l.template=u;var f=function(e){var t=r.args.bindTo(c[e],(function(e,t){l.args[t]=e}));l.onRemove(t),r.onRemove((function(){t(),l.remove()}))};for(var y in c)f(y);var d=function(t){if("object"!==p(n))return"continue";var o=(n=e.Bindable.make(n)).bindTo(t,(function(e,t,r,n){n?t in l.args&&delete l.args[t]:l.args[t]=e}));l.args.bindTo(t,(function(e,t,r,o){o?t in n&&delete n[t]:n[t]=e})),r.onRemove((function(){o(),n.isBound()||e.Bindable.clearBindings(n),l.remove()})),l.onRemove((function(){o(),n.isBound()||e.Bindable.clearBindings(n)}))};for(var v in n)d(v);l.render(t),r.withViews.set(t,l)}));return this.onRemove((function(){r.withViews.delete(t),s()})),t}},{key:"mapViewTag",value:function(e){var t=this,r=e.getAttribute("cv-view");e.removeAttribute("cv-view");var n=new DocumentFragment;y(e.childNodes).forEach((function(e){return n.appendChild(e)}));var o=r.split(":"),i=o.pop()?this.stringToClass(r):j,a=o.shift(),u=new i(this.args,this);return this.views.set(e,u),a&&this.views.set(a,u),this.onRemove(function(r){return function(){r.remove(),t.views.delete(e),t.views.delete(a)}}(u)),u.template=n,u.render(e),e}},{key:"mapEachTag",value:function(t){var r=this,o=t.getAttribute("cv-each"),i=t.getAttribute("cv-view");t.removeAttribute("cv-each"),t.removeAttribute("cv-view");var a=i?this.stringToClass(i):j,u=new DocumentFragment;y(t.childNodes).forEach((function(e){return u.appendChild(e)}));var s=d(o.split(":"),3),l=s[0],f=s[1],p=s[2],v=this.args,h=l;if(l.match(/\./)){var b=d(e.Bindable.resolve(this.args,l,!0),2);v=b[0],h=b[1]}var m=v.bindTo(h,(function(e,o,i,s,l){e instanceof c.Bag&&(e=e.list),r.viewLists.has(t)&&r.viewLists.get(t).remove();var y=new n.ViewList(u,f,e,r,p,a),d=function(){return y.remove()};r.onRemove(d),y.onRemove((function(){return r._onRemove.remove(d)}));var v=r.args.bindTo((function(e,t,r,n){"_id"!==t&&(n?t in y.subArgs&&delete y.subArgs[t]:y.subArgs[t]=e)})),h=y.args.bindTo((function(e,t,n,o,i){"_id"!==t&&"value"!==t&&"___"!==String(t).substring(0,3)&&(o?delete r.args[t]:t in r.args&&(r.args[t]=e))}));for(y.onRemove(v),y.onRemove(h),r.onRemove(v),r.onRemove(h);t.firstChild;)t.removeChild(t.firstChild);r.viewLists.set(t,y),y.render(t)}));return this.onRemove(m),t}},{key:"mapIfTag",value:function(t){var r=this,n=t,o=n.getAttribute("cv-view"),i=n.getAttribute("cv-if"),u=n.getAttribute("cv-is"),s=!1,l=!1;n.removeAttribute("cv-view"),n.removeAttribute("cv-if"),n.removeAttribute("cv-is");var f=o?this.stringToClass(o):j;"!"===i.substr(0,1)&&(i=i.substr(1),s=!0),"?"===i.substr(0,1)&&(i=i.substr(1),l=!0);var p=new DocumentFragment;y(n.childNodes).forEach((function(e){return p.appendChild(e)}));var v=this,h=new DocumentFragment,b=new f(Object.assign({},this.args),v);b.tags.bindTo((function(e,t){return r.tags[t]=e}),{removeWith:this}),b.template=p;var m=v.args,g=i;if(i.match(/\./)){var w=d(e.Bindable.resolve(v.args,i,!0),2);m=w[0],g=w[1]}b.render(h);var O=m.bindTo(g,(function(e,n){var o=e;l&&(e=null!=e),e instanceof c.Bag&&(e=e.list),Array.isArray(e)&&(e=!!e.length),null!==u&&(e=o==u),s&&(e=!e),e?(t.appendChild(h),y(h.childNodes).forEach((function(e){return a.Dom.mapTags(e,!1,(function(e,t){e.matches&&e.dispatchEvent(new CustomEvent("cvDomAttached",{target:e,detail:{view:b||r,mainView:r}}))}))}))):(b.nodes.forEach((function(e){return h.appendChild(e)})),a.Dom.mapTags(h,!1,(function(e,t){e.matches&&new CustomEvent("cvDomDetached",{target:e,detail:{view:b||r,mainView:r}})})))}),{children:Array.isArray(m[g])});v.onRemove(O);var P=this.args.bindTo((function(e,t,r,n){"_id"!==t&&(n?t in b.args&&delete b.args[t]:b.args[t]=e)})),S=b.args.bindTo((function(e,t,n,o,i){"_id"!==t&&"___"!==String(t).substring(0,3)&&t in r.args&&(o?delete r.args[t]:r.args[t]=e)}));return v.onRemove((function(){O(),P(),S(),v._onRemove.remove(O)})),this.onRemove((function(){P(),S(),b.remove(),v!==r&&v.remove()})),t}},{key:"compileIfTag",value:function(t){var r=t.getAttribute("cv-if"),n=!1;t.removeAttribute("cv-if"),"!"===r.substr(0,1)&&(r=r.substr(1),n=!0);var o=new DocumentFragment;return y(t.childNodes).forEach((function(e){return o.appendChild(e.cloneNode(!0))})),function(i){var a=t.cloneNode(),u=new DocumentFragment,c=new j({},i);c.template=o,i.syncBind(c);var s=i.args,l=r;if(r.match(/\./)){var f=d(e.Bindable.resolve(i.args,r,!0),2);s=f[0],l=f[1]}var p=!1,y=s.bindTo(l,(function(e,t){if(!p){var r=i.args[l]||n?a:u;return c.render(r),void(p=!0)}Array.isArray(e)&&(e=!!e.length),n&&(e=!e),e?a.appendChild(u):c.nodes.forEach((function(e){return u.appendChild(e)}))}));i.onRemove(y);var v=function(){s.isBound()||e.Bindable.clearBindings(s)};return c.onRemove((function(){y(),v(),i._onRemove.remove(y),i._onRemove.remove(v)})),a}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then((function(){return e.remove()})),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),r=this.templates[t];if(!r){for(var n=this;n&&!(r=n.templates[t]);)n=this.parent;if(!r)return void console.error("Template ".concat(t," not found."))}var o=r();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(o),e}},{key:"syncBind",value:function(e){var t=this,r=this.args.bindTo((function(t,r,n,o){"_id"!==r&&e.args[r]!==t&&(e.args[r]=t)})),n=e.args.bindTo((function(e,r,n,o,i){if("_id"!==r){var a=e,u=i;a instanceof j&&(a=a.___ref___),u instanceof j&&(u=u.___ref___),a!==u&&u instanceof j&&i.remove(),r in t.args&&(t.args[r]=e)}}));this.onRemove(r),this.onRemove(n),e.onRemove((function(){t._onRemove.remove(r),t._onRemove.remove(n)}))}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.dispatchEvent(new CustomEvent("remove",{detail:{view:this},cancelable:!0}))){var r=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].forEach((function(e){return e.remove()})),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var r in e.nodes)e.nodes[r]&&e.nodes[r].dispatchEvent(new Event("cvDomDetached")),e.nodes[r]&&e.nodes[r].remove(),e.nodes[r]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};t?r():requestAnimationFrame(r);var n,o=this._onRemove.items(),i=v(o);try{for(i.s();!(n=i.n()).done;){var a=n.value;a(),this._onRemove.remove(a)}}catch(e){i.e(e)}finally{i.f()}var u,c=v(this.cleanup);try{for(c.s();!(u=c.n()).done;){var s=u.value;s&&s()}}catch(e){c.e(e)}finally{c.f()}this.cleanup.length=0;var l,f=v(this.viewLists);try{for(f.s();!(l=f.n()).done;){var p=d(l.value,2),y=(p[0],p[1]);y.remove()}}catch(e){f.e(e)}finally{f.f()}this.viewLists.clear();var h,b=v(this.timeouts);try{for(b.s();!(h=b.n()).done;){var m=d(h.value,2),g=(m[0],m[1]);clearTimeout(g.timeout),this.timeouts.delete(g.timeout)}}catch(e){b.e(e)}finally{b.f()}var w,O=v(this.intervals);try{for(O.s();!(w=O.n()).done;){var j=w.value;clearInterval(j)}}catch(e){O.e(e)}finally{O.f()}this.intervals.length=0;var P,S=v(this.frames);try{for(S.s();!(P=S.n()).done;){var k=P.value;k()}}catch(e){S.e(e)}finally{S.f()}this.frames.length=0,this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0,this.dispatchEvent(new CustomEvent("removed",{detail:{view:this},cancelable:!0}))}}},{key:"findTag",value:function(e){for(var t in this.nodes){var r;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new u.Tag(this.nodes[t],this,void 0,void 0,this);if(r=this.nodes[t].querySelector(e))return new u.Tag(r,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter((function(e){return e.querySelectorAll})).map((function(t){return y(t.querySelectorAll(e))})).flat().map((function(e){return new u.Tag(e,t,void 0,void 0,t)}))||[]}},{key:"onRemove",value:function(e){e instanceof Event||this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(r){for(var n in e){for(var o=t,i=e[n];o&&!o[i];)o=o.parent;if(!o)return;r=o[e[n]](r)}return r}}},{key:"stringToClass",value:function(e){if(j.refClasses.has(e))return j.refClasses.get(e);var t=e.split("/"),n=t[t.length-1],o=r(e);return j.refClasses.set(e,o[n]),o[n]}},{key:"preventParsing",value:function(e){e[k]=!0}},{key:"toString",value:function(){return this.nodes.map((function(e){return e.outerHTML})).join(" ")}},{key:"listen",value:function(e,t,r,n){var o=this;if("string"==typeof e&&(n=r,r=t,t=e,e=this),e instanceof j)return this.listen(e.nodes,t,r,n);if(Array.isArray(e))return e.map((function(e){return o.listen(e,t,r,n)})).forEach((function(e){return e()}));if(e instanceof u.Tag)return this.listen(e.element,t,r,n);e.addEventListener(t,r,n);var i=function(){return e.removeEventListener(t,r,n)},a=function(){i(),i=function(){}};return this.onRemove((function(){return a()})),a}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],h=[{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=new this(t,r);return n.template=e,n}},{key:"isView",value:function(){return j}},{key:"uuid",value:function(){return new i.Uuid}}],f&&g(l.prototype,f),h&&g(l,h),Object.defineProperty(l,"prototype",{writable:!1}),j}(l.Mixin.with(f.EventTargetMixin));t.View=R,Object.defineProperty(R,"templates",{value:new Map}),Object.defineProperty(R,"refClasses",{value:new Map})}()})),require.register("curvature/base/ViewList.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var e=r("./Bindable"),n=r("./SetMap"),o=r("./Bag");function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function t(r,n,i,a){var s=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;c(this,t),this.removed=!1,this.args=e.Bindable.makeBindable({}),this.args.value=e.Bindable.makeBindable(i||{}),this.subArgs=e.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=f,this._onRemove=new o.Bag,this.template=r,this.subProperty=n,this.keyProperty=l,this.tag=null,this.downDebind=[],this.upDebind=[],this.paused=!1,this.parent=a,this.rendered=new Promise((function(e,t){Object.defineProperty(s,"renderComplete",{configurable:!1,writable:!0,value:e})})),this.willReRender=!1,this.args.___before((function(e,t,r,n,o){"bindTo"!=t&&(s.paused=!0)})),this.args.___after((function(e,t,r,n,o){"bindTo"!=t&&(s.paused=r.length>1,s.reRender())}));var p=this.args.value.bindTo((function(e,t,r,n){if(!s.paused){var o=t;if("symbol"!==u(t))if(isNaN(t)&&(o="_"+t),n)for(var i in s.views[o]&&s.views[o].remove(),delete s.views[o],s.views)isNaN(i)?s.views[i].args[s.keyProperty]=i.substr(1):s.views[i].args[s.keyProperty]=i;else s.views[o]?s.views[o]&&s.views[o].args&&(s.views[o].args[s.keyProperty]=t,s.views[o].args[s.subProperty]=e):(cancelAnimationFrame(s.willReRender),s.willReRender=requestAnimationFrame((function(){s.reRender()})))}}));this._onRemove.add(p),Object.preventExtensions(this)}var r,a,l;return r=t,a=[{key:"render",value:function(e){var t,r=this,n=[],o=i(this.views);try{var a=function(){var r=t.value;r.render(e),n.push(r.rendered.then((function(){return r})))};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}this.tag=e,Promise.all(n).then((function(e){return r.renderComplete(e)})),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[],r=new n.SetMap;for(var o in this.views){var a=this.views[o],u=a.args[this.subProperty];r.add(u,a),t[o]=a}var c=[],s=new Set;this.downDebind.length&&this.downDebind.forEach((function(e){return e&&e()})),this.upDebind.length&&this.upDebind.forEach((function(e){return e&&e()})),this.upDebind.length=0,this.downDebind.length=0;var l=1/0,f=1/0,p=function(t){var n=!1,o=t;if(isNaN(o)?o="_"+t:String(o).length&&(o=Number(o)),void 0!==e.args.value[t]&&r.has(e.args.value[t])){var i=r.getOne(e.args.value[t]);i&&(i.args[e.keyProperty]=t,c[o]=i,s.add(i),n=!0,isNaN(o)||(l=Math.min(l,o),o>0&&(f=Math.min(f,o))),r.remove(e.args.value[t],i))}if(!n){var a={},u=c[o]=new e.viewClass(a,e.parent);isNaN(o)||(l=Math.min(l,o),o>0&&(f=Math.min(f,o))),c[o].template=e.template,c[o].viewList=e,c[o].args[e.keyProperty]=t,c[o].args[e.subProperty]=e.args.value[t],e.upDebind[o]=a.bindTo(e.subProperty,(function(t,r,n,o){var i=a[e.keyProperty];o?delete e.args.value[i]:e.args.value[i]=t})),e.downDebind[o]=e.subArgs.bindTo((function(e,t,r,n){n?delete a[t]:a[t]=e}));var p=function(){e.upDebind.filter((function(e){return e})).forEach((function(e){return e()})),e.upDebind.length=0},y=function(){e.downDebind.filter((function(e){return e})).forEach((function(e){return e()})),e.downDebind.length=0};u.onRemove((function(){e._onRemove.remove(p),e._onRemove.remove(y),e.upDebind[o]&&e.upDebind[o](),e.downDebind[o]&&e.downDebind[o](),delete e.upDebind[o],delete e.downDebind[o]})),e._onRemove.add(p),e._onRemove.add(y),a[e.subProperty]=e.args.value[t]}};for(var y in this.args.value)p(y);for(var d in t)s.has(t[d])||t[d].remove();if(Array.isArray(this.args.value)){var v=0===l&&void 0!==c[1]&&c.length>1||f===1/0?l:f;this.rendered=function t(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=c.length-r-1;n>v&&void 0===c[n];)n--;if(n<v)return Promise.resolve();if(c[n]===e.views[n]){if(c[n]&&!c[n].firstNode)return c[n].render(e.tag,c[n+1]),c[n].rendered.then((function(){return t(Number(r)+1)}));var o=500;return 0===r||r%o?t(Number(r)+1):new Promise((function(e){return requestAnimationFrame((function(){return e(t(Number(r)+1))}))}))}return c[n].render(e.tag,c[n+1]),e.views.splice(n,0,c[n]),c[n].rendered.then((function(){return t(r+1)}))}()}else{var h,b=[],m=Object.assign({},c),g=function(e){return parseInt(e)===e-0},w=i(Object.keys(c).sort((function(e,t){return g(e)&&g(t)?Math.sign(e-t):g(e)||g(t)?!g(e)&&g(t)?-1:g(e)&&!g(t)?1:void 0:0})));try{var O=function(){var t=h.value;if(delete m[t],c[t].firstNode&&c[t]===e.views[t])return"continue";c[t].render(e.tag),b.push(c[t].rendered.then((function(){return c[t]})))};for(w.s();!(h=w.n()).done;)O()}catch(e){w.e(e)}finally{w.f()}for(var j in m)delete this.args.views[j],m.remove();this.rendered=Promise.all(b)}for(var P in c)isNaN(P)?c[P].args[this.keyProperty]=P.substr(1):c[P].args[this.keyProperty]=P;this.views=Array.isArray(this.args.value)?[].concat(c):c,s.clear(),this.willReRender=!1,this.rendered.then((function(){e.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}})),e.tag.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}}))}))}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove();var r=this._onRemove.items();for(var n in r)this._onRemove.remove(r[n]),r[n]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&e.Bindable.clearBindings(this.subArgs),e.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&e.Bindable.clearBindings(this.args.value),this.removed=!0}}],a&&s(r.prototype,a),l&&s(r,l),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.ViewList=l}()})),require.register("curvature/form/ButtonField.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonField=void 0;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,r,a,u=i(c);function c(e,t,r,n){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=u.call(this,e,t,r,n)).args.title=o.args.title||o.args.value,o._onClick=[];var i=o.args.attrs||{};return i.type=i.type||o.args.type,o.args.name=i.name=o.args.name||n,o.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(o.getName(),'"\n\t\t\t\tdata-type = "').concat(i.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(o.getName(),'"\n\t\t\t\t\ttype      = "').concat(i.type,'"\n\t\t\t\t\tvalue     = "[[value]]"\n\t\t\t\t\tcv-on     = "click:clicked(event)"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),o}return t=c,(r=[{key:"clicked",value:function(e){this._onClick.map((function(t){return!1===t(e)})).filter((function(e){return e})).length?"submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation()):"submit"==this.args.attrs.type&&(e.preventDefault(),e.stopPropagation(),this.form.tags.formTag.element.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0})))}},{key:"onClick",value:function(e){this._onClick.push(e)}}])&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(r("./Field").Field);t.ButtonField=c}()})),require.register("curvature/form/Field.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;var n=r("../base/View");r("../base/Bindable");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(c,e);var t,r,n,u=a(c);function c(e,t,r,n){var o,i,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var l=Object.assign({},e);(s=u.call(this,l,r)).args.title=null!==(o=s.args.title)&&void 0!==o?o:n,s.args.value=null!==(i=s.args.value)&&void 0!==i?i:"",s.value=null!==(a=s.args.value)&&void 0!==a?a:"",s.skeleton=l,s.disabled=null,s.args.valueString="",s.form=t,s.key=n,s.ignore=s.args.attrs&&s.args.attrs["data-cv-ignore"]||!1;var f="",p=s.args.attrs||{};p.type=p.type||l.type||null,s.args.name=p.name=p.name||s.args.name||n,"checkbox"==p.type&&(f='value = "1"'),s.template='\n\t\t\t<label\n\t\t\t\tfor           = "'.concat(s.getName(),'"\n\t\t\t\tdata-type     = "').concat(p.type||"text",'"\n\t\t\t\tcv-ref        = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\tname      = "').concat(s.getName(),'"\n\t\t\t\t\ttype      = "').concat(p.type||"text",'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t').concat(f,'\n\t\t\t\t/>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t');var y=null;return s.args.bindTo("value",(function(e,t){if(!isNaN(e)&&null!==e&&e.length&&e==Number(e)&&e.length===String(Number(e)).length&&(e=Number(e)),s.value=e,y!=t){if(y=n,s.args.valueString=JSON.stringify(e||"",null,4),s.valueString=s.args.valueString,"file"==p.type&&s.tags.input&&s.tags.input.element.files&&s.tags.input.element.length)if(s.tags.input.node.removeAttribute("title"),p.multiple){var r=Array.from(s.tags.input.element.files);if(s.parent.args.value[t]&&r.length){for(var o in r)r[o]!==s.parent.args.value[n][o]&&(s.parent.args.value[n]=r);s.parent.args.value.splice(r.length)}else s.parent.args.value[n]=r}else s.parent.args.value[n]=s.tags.input.element.files[0];else"file"==p.type&&s.tags.input?!e&&s.tags.input?(s.tags.input.node.value=null,p.placeholder?s.tags.input.node.setAttribute("title",p.placeholder):s.tags.input.node.removeAttribute("title")):e instanceof File&&s.tags.input.node.setAttribute("title",e.name):(s.parent.args.value||(s.parent.args.value={}),s.parent.args.value[n]=e);s.args.errors=[],y=null}})),s.parent.args.value[s.key]=s.args.value,s.parent.args.value.bindTo(n,(function(e,t){if(y!=t){if(y=t,"file"==p.type)if(s.tags.input&&s.tags.input.element.files&&s.tags.input.element.files.length)if(p.multiple){var r=Array.from(s.tags.input.element.files);if(s.parent.args.value[n]&&r.length){for(var o in r)r[o]!==s.parent.args.value[n][o]&&(s.parent.args.value[n]=r);s.parent.args.value[n].splice(r.length)}else s.parent.args.value[n]=r}else s.parent.args.value[n]=s.tags.input.element.files[0];else s.args.value=e;else s.args.value=e;y=null}})),s}return t=c,r=[{key:"disable",value:function(){this.hasChildren(),this.disabled="disabled"}},{key:"enable",value:function(){this.hasChildren(),this.disabled=!1}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.tags.input)return this.tags.input.element.getAttribute("name");var t=this.key;if(e){for(var r=this.parent,n=[t];r&&r.array&&void 0!==r.key;)n.unshift(r.key),r=r.parent;t=n.shift(),n.length&&(t+="[".concat(n.join("]["),"]"))}return t}}],r&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.View);t.Field=s}()})),require.register("curvature/form/FieldSet.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FieldSet=void 0;var n=r("./Field"),o=r("./Form");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(l,e);var t,r,n,c=u(l);function l(e,t,r,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var a=(i=c.call(this,e,t,r,n)).args.attrs||{};return a.type=a.type||"fieldset",i.array=!1,(e.array||a["data-array"]||a["data-multi"])&&(i.array=a["data-array"]=!0),i.args.value={},i.args.fields=o.Form.renderFields(e.children,s(i)),i.fields=i.args.fields,i.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(i.getName(),'"\n\t\t\t\tdata-type  = "').concat(a.type,'"\n\t\t\t\tdata-multi = "').concat(a["data-multi"]?"true":"false",'"\n\t\t\t\tcv-ref     = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<fieldset\n\t\t\t\t\tname   = "').concat(i.getName(),'"\n\t\t\t\t\tcv-ref = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand="attrs"\n\t\t\t\t\tcv-each = "fields:field"\n\t\t\t\t>\n\t\t\t\t\t[[field]]\n\t\t\t\t</fieldset>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),i}return t=l,(r=[{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}},{key:"wrapSubfield",value:function(e){return e}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(n.Field);t.FieldSet=f}()})),require.register("curvature/form/Form.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;var n=r("../base/View"),o=r("./Field"),i=r("./FieldSet"),a=r("./SelectField"),u=r("./RadioField"),c=r("./HtmlField"),s=r("./HiddenField"),l=r("./ButtonField"),f=r("./TextareaField"),p=r("./multiField/View"),y=r("../base/Bindable");function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(O,e);var t,r,n,w=b(O);function O(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,O),(t=w.call(this,{})).args.flatValue=t.args.flatValue||{},t.args.value=t.args.value||{},t.args.method=e._method||"GET",t.args.classes=t.args.classes||[],t.skeleton=e,t.args.bindTo("classes",(function(e){t.args._classes=e.join(" ")})),t.action="",t.template='\n\t\t\t<form\n\t\t\t\tclass     = "[[_classes]]"\n\t\t\t\tmethod    = "[[method]]"\n\t\t\t\tenctype   = "multipart/form-data"\n\t\t\t\tcv-on     = "submit:submit(event)"\n\t\t\t\tcv-ref    = "formTag:curvature/base/Tag"\n\t\t\t\tcv-each   = "fields:field"\n\t\t\t\tcv-expand = "attrs"\n\t\t\t>\n\t\t\t\t[[field]]\n\t\t\t</form>\n\t\t',t.args.fields=O.renderFields(e,g(t),r),t.fields=t.args.fields;var n=y.Bindable.makeBindable(g(t));return t.args.bindTo("value",(function(e){n.value=e})),t.args.bindTo("valueString",(function(e){n.json=e})),m(t,n)}return t=O,r=[{key:"submit",value:function(e){this.args.valueString=JSON.stringify(this.args.value,null,4),this.dispatchEvent(new CustomEvent("submit",{details:{view:this}}))||(e.preventDefault(),e.stopPropagation())}},{key:"buttonClick",value:function(e){}},{key:"formData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(var n in e||(e=new FormData),t||(t=this),t.args.fields)if(!t.args.fields[n]||!t.args.fields[n].disabled){var o=r.slice(0);if(o.push(n),t.args.fields[n]&&t.args.fields[n].hasChildren())this.formData(e,t.args.fields[n],o);else if(t.args.fields[n]){var i=t.args.fields[n].getName();if("file"==t.args.fields[n].args.type&&t.args.fields[n].tags.input.element.files&&t.args.fields[n].tags.input.element.files.length)if(t.args.fields[n].args.attrs.multiple)for(var a=t.args.fields[n].tags.input.element.files,u=0;u<a.length;u++)a[u]&&e.append(i+"[]",a[u]);else t.args.fields[n].tags.input.element.files[0]&&e.append(i,t.args.fields[n].tags.input.element.files[0]);else("file"!==t.args.fields[n].args.type||t.args.fields[n].args.value)&&e.append(i,void 0===t.args.fields[n].args.value?"":t.args.fields[n].args.value)}}return e}},{key:"queryString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var r in this.args.flatValue)e[r]=e[r]||this.args.flatValue[r];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}},{key:"populate",value:function(e){for(var t in e)this.args.value[t]=e[t]}},{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}}],n=[{key:"renderFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={},d=function(d){if(n[d])return"continue";if("_"==d.substr(0,1))return"continue";var v=null,h=null;if(t&&(h=t instanceof O?t:t.form),r&&e[d].name in r)v=new r[e[d].name](e[d],h,t,d);else switch(e[d].type){case"fieldset":v=e[d].attrs&&e[d].attrs["data-multi"]?new p.View(e[d],h,t,d):new i.FieldSet(e[d],h,t,d);break;case"select":v=new a.SelectField(e[d],h,t,d);break;case"radios":v=new u.RadioField(e[d],h,t,d);break;case"html":v=new c.HtmlField(e[d],h,t,d);break;case"submit":case"button":v=new l.ButtonField(e[d],h,t,d);break;case"hidden":v=new s.HiddenField(e[d],h,t,d);break;case"textarea":v=new f.TextareaField(e[d],h,t,d);break;default:v=new o.Field(e[d],h,t,d)}n[d]=y.Bindable.make(v);var b=v.key;v.args.bindTo("value",(function(e,r,n,o){if(!isNaN(e)&&null!==e&&e.length&&e==Number(e)&&e.length===String(Number(e)).length&&(e=Number(e)),("html"!=n.type||n.contentEditable)&&"fieldset"!=n.type)if(n.disabled)delete h.args.flatValue[b];else{n.attrs=n.attrs||{},n.attrs.multiple;var i=Array.isArray(e),a=t.args.value[b];if(n.attrs.multiple&&i&&Array.isArray(a))for(var u in e)e[u]!==t.args.value[b][u]&&(t.args.value[b][u]=e[u]),t.args.value[b].splice(e.length);else t.args.value[b]=e;h.args.flatValue[b]=e,h.args.valueString=JSON.stringify(h.args.value,null,4)}})),v.render()};for(var v in e)d(v);return n}},{key:"_updateFields",value:function(e,t){for(var r in e.args.fields){var n=e.args.fields[r];t[r]&&(t[r].value&&(n.args.value=t[r].value),t[r].errors&&(n.args.errors=t[r].errors),t[r].title&&(n.args.title=t[r].title),t[r].options&&(n.args.options=t[r].options),t[r].attrs&&(n.args.attrs=t[r].attrs),n.children&&t[r].children&&this._updateFields(n,t[r].children))}}}],r&&v(t.prototype,r),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),O}(n.View);t.Form=O}()})),require.register("curvature/form/HiddenField.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.HiddenField=void 0;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,r,a,u=i(c);function c(e,t,r,n){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),e.type="hidden";var i=(o=u.call(this,e,t,r,n)).args.attrs||{};return o.args.type=i.type="hidden",o.args.name=i.name=i.name||o.args.name||n,o.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(o.getName(),'"\n\t\t\t\tdata-type = "').concat(i.type,'"\n\t\t\t\tstyle     = "display:none"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\t\tname      = "').concat(o.getName(),'"\n\t\t\t\t\t\ttype      = "hidden"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t'),o}return t=c,r&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("./Field").Field);t.HiddenField=c}()})),require.register("curvature/form/HtmlField.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlField=void 0;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,r,a,u=i(c);function c(e,t,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=u.call(this,e,t,r,n)).key=n,o.args.tagName=o.args.tagName||"div",o.args.displayValue=o.args.value,o.args.attrs=o.args.attrs||{},o.ignore=o.args.attrs["data-cv-ignore"]||!1,o.args.contentEditable=o.args.attrs.contenteditable||!1,o.args.bindTo("value",(function(e){o.tags.input&&o.tags.input.element!==document.activeElement&&(o.args.displayValue=e)})),o.template="<".concat(o.args.tagName,'\n\t\t\tname            = "').concat(o.getName(),'"\n\t\t\tcv-ref          = "input:curvature/base/Tag"\n\t\t\tcontenteditable = "[[contentEditable]]"\n\t\t\tcv-expand       = "attrs"\n\t\t\tcv-bind         = "$displayValue"\n\t\t\tcv-on           = "input:inputProvided(event);"\n\t\t></').concat(o.args.tagName,">"),o}return t=c,(r=[{key:"inputProvided",value:function(e){this.args.value=e.target.innerHTML}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){return this.key}}])&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(r("./Field").Field);t.HtmlField=c}()})),require.register("curvature/form/RadioField.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.RadioField=void 0;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,r,a,u=i(c);function c(e,t,r,n){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var i=(o=u.call(this,e,t,r,n)).args.attrs||{};return o.args.name=i.name=i.name||o.args.name||n,o.args.value=o.args.value||"",o.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(o.getName(),'"\n\t\t\t\tdata-type = "').concat(i.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each  = "options:option:optionText"/>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname      = "').concat(o.args.name,'"\n\t\t\t\t\t\t\ttype      = "radio"\n\t\t\t\t\t\t\tvalue     = "[[option]]"\n\t\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t\t\tcv-on     = "change:changed(event)"\n\t\t\t\t\t/>\n\t\t\t\t\t\t[[optionText]]\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),o}return t=c,(r=[{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}},{key:"changed",value:function(e){this.args.value=e.target.value}},{key:"postRender",value:function(){var e=this;this.args.bindTo("value",(function(t){return e.selectOptionByValue(t)})),this.args.options.bindTo((function(t){return e.selectOptionByValue(e.args.value)}),{frame:1})}},{key:"selectOptionByValue",value:function(e){this.findTags("input").forEach((function(t){t.value==e&&(t.checked=!0)}))}}])&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(r("./Field").Field);t.RadioField=c}()})),require.register("curvature/form/SelectField.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SelectField=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(s,e);var t,r,o,c=u(s);function s(e,t,r,n){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var i=(o=c.call(this,e,t,r,n)).args.attrs||{};return o.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(o.getName(),'"\n\t\t\t\tdata-type = "').concat(i.type||"select",'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<select\n\t\t\t\t\tname      = "').concat(o.getName(),'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-each   = "options:option:optionText"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t/>\n\t\t\t\t\t<option value = "[[option]]">[[optionText]]</option>\n\t\t\t\t</select>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),o}return t=s,(r=[{key:"postRender",value:function(){var e=this;this.args.bindTo("value",(function(t){return e.selectOptionByValue(t)})),this.args.options.bindTo((function(t){return e.selectOptionByValue(e.args.value)}),{frame:1})}},{key:"selectOptionByValue",value:function(e){var t,r=this.tags.input.element,o=n(r.options);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.value==e&&(r.selectedIndex=i.index)}}catch(e){o.e(e)}finally{o.f()}}},{key:"getLabel",value:function(){for(var e in this.args.options)if(this.args.options[e]==this.args.value)return e}}])&&i(t.prototype,r),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),s}(r("./Field").Field);t.SelectField=l}()})),require.register("curvature/form/TextareaField.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.TextareaField=void 0;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,r,a,u=i(c);function c(e,t,r,n){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var i=(o=u.call(this,e,t,r,n)).args.attrs||{};return i.type=i.type||"textarea",o.template='\n\t\t\t<label\n\t\t\t\tfor       = "'.concat(o.getName(),'"\n\t\t\t\tdata-type = "').concat(i.type,'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<textarea\n\t\t\t\t\t\tname      = "').concat(o.getName(),'"\n\t\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t></textarea>\n\t\t\t\t<cv-template cv-if = "attrs.data-caption">\n\t\t\t\t\t<p>[[attrs.data-caption]]</p>\n\t\t\t\t</cv-template>\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t'),o}return t=c,r&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}(r("./Field").Field);t.TextareaField=c}()})),require.register("curvature/form/multiField/CreateForm.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateForm=void 0;var n=r("./FormWrapper");r("../../form/HiddenField");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=u(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},a.apply(this,arguments)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(l,e);var t,r,n,u=s(l);function l(e,t){var r,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o(this,l),(r=u.call(this,e,t,"POST",n||{})).creating=!!e.publicId,r}return t=l,(r=[{key:"onLoad",value:function(e){for(var t in e.args.fields)if(e.args.fields[t].tags.input&&"hidden"!=e.args.fields[t].args.attrs.type){e.args.fields[t].tags.input.element.focus();break}a(f(l.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return this.args.view.args.loading=!0,this.args.view.args.classes+=" loading",a(f(l.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){this.args.view.args.loading=!1,this.args.view.args.classes="",e.body?(this.args.wrapper?this.args.wrapper.refresh(e.body):this.args.view.addRecord(e.body),this.args.view.args.creating="",a(f(l.prototype),"onResponse",this).call(this,e)):a(f(l.prototype),"onResponse",this).call(this,e)}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(n.FormWrapper);t.CreateForm=p}()})),require.register("curvature/form/multiField/FormWrapper.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FormWrapper=void 0;var n=r("../../base/Repository"),o=r("../../form/Form"),i=r("../../toast/Toast"),a=(r("../../toast/ToastAlert"),r("../../base/View")),u=r("../../base/Router");function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(d,e);var t,r,a,s=y(d);function d(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return l(this,d),(r=s.call(this,e)).path=t,r.args.method=i,r.args.action=r.args.action||null,r.args.form=null,r.args.title=null,r.args.class="",r.template='\n\t\t\t<div class = "form constrict [[class]]">\n\t\t\t\t<div cv-if = "title"><label>[[title]]</label></div>\n\t\t\t\t[[form]]\n\t\t\t</div>\n\t\t',r._onLoad=[],r._onSubmit=[],r._onRender=[],r._onRequest=[],r._onError=[],r._onResponse=[],t instanceof o.Form?r.loadForm(form,a):n.Repository.request(t).then((function(e){e&&e.meta&&e.meta.form&&e.meta.form instanceof Object?(r.loadForm(new o.Form(e.meta.form,a)),r.onLoad(r.args.form,e.body)):console.warn("Cannot render form with ",e)})),r}return t=d,(r=[{key:"loadForm",value:function(e){var t=this;this.args.form=e,this.args.form.addEventListener("submit",(function(r){r&&(r.preventDefault(),r.stopPropagation());var o=e.tags.formTag.element,i=o.getAttribute("action")||t.args.action||t.path,a=o.getAttribute("method")||t.args.method,s=e.args.flatValue;if("GET"==(a=a.toUpperCase())){var l={};for(var f in t.args.content&&t.args.content.args&&(t.args.content.args.page=0),l.page=0,s)"api"!==f&&(l[f]=s[f]);t.onRequest(l).then((function(){t.onResponse({}),u.Router.go(i+"?"+u.Router.queryToString(l)),t.update(l)})).catch((function(e){t.onRequestError(e)}))}else if("POST"==a){var p,y=e.formData(),d=c(y.entries());try{for(d.s();!(p=d.n()).done;)p.value}catch(e){d.e(e)}finally{d.f()}var v=t.onRequest(y);v&&v.then((function(){n.Repository.request(i,{api:"json"},y,!1,{progressDown:function(e){t.progressDown(e)},progressUp:function(e){t.progressUp(e)}}).then((function(e){t.onResponse(e)})).catch((function(e){t.onRequestError(e)}))}))}}))}},{key:"onRequest",value:function(e){var t=[];for(var r in this._onRequest){var n=this._onRequest[r](e,this);n&&t.push(n)}return 0==t.length?Promise.resolve():Promise.all(t)}},{key:"onRequestError",value:function(e){for(var t in this._onError)this._onError[t](e,this);if(e.messages)for(var r in e.messages)i.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[r],3500)}},{key:"onResponse",value:function(e){for(var t in this._onResponse)this._onResponse[t](e,this);if(e.messages)for(var r in e.messages)i.Toast.instance().alert(e.body&&e.body.id?"Success!":"Error!",e.messages[r],3500)}},{key:"onLoad",value:function(e,t){for(var r in this._onLoad)this._onLoad[r](this,e,t)}},{key:"customFields",value:function(){return{}}},{key:"submit",value:function(){}},{key:"progressUp",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}},{key:"progressDown",value:function(e){console.log(e.loaded,e.total,e.loaded/e.total)}}])&&f(t.prototype,r),a&&f(t,a),Object.defineProperty(t,"prototype",{writable:!1}),d}(a.View);t.FormWrapper=h}()})),require.register("curvature/form/multiField/SearchForm.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchForm=void 0;var n=r("../../base/Config"),o=r("./FormWrapper"),i=r("../../form/HiddenField"),a=r("../../base/Repository");function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=l(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},s.apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var v=n.Config.get("backend")||"//",h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(l,e);var t,r,n,o=p(l);function l(e,t){var r;return u(this,l),(r=o.call(this,e,t,"POST",{search:i.HiddenField})).superTemplate=r.template,r.args.records=[],r.selected=null,r.template="\n\t\t\t".concat(r.superTemplate,'\n\t\t\t<div cv-each = "records:record:r" class = "dropdown-results">\n\t\t\t\t<div\n\t\t\t\t\tcv-on         = "click:select(event)"\n\t\t\t\t\tdata-index    = "[[r]]"\n\t\t\t\t\tdata-publicId = "[[record.publicId]]"\n\t\t\t\t\tclass         = "[[record.classes]]"\n\t\t\t\t>\n\t\t\t\t\t[[record.title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'),r}return t=l,(r=[{key:"onLoad",value:function(e){var t=this;for(var r in e.args.fields)if(e.args.fields[r].tags.input&&"hidden"!=e.args.fields[r].args.attrs.type){e.args.fields[r].tags.input.element.focus();break}e.args.flatValue.bindTo("keyword",(function(e){t.args.records=[],t.selected=null,e&&(console.log(t.path,e),a.Repository.request(v+t.path,{keyword:e}).then((function(r){console.log(r.body),r.body&&(t.args.records=r.body.map((function(r){return r.classes="",r.title==e&&(r.classes="selected",t.selected=r),r})))})))})),s(d(l.prototype),"onLoad",this).call(this,e)}},{key:"onRequest",value:function(){return s(d(l.prototype),"onRequest",this).call(this)}},{key:"onResponse",value:function(e){s(d(l.prototype),"onResponse",this).call(this,e)}},{key:"select",value:function(e){var t=e.target.getAttribute("data-index"),r=(e.target.getAttribute("data-publicId"),this.args.records[t]);console.log(r),this.args.view.addRecord(r),this.args.view.addButtonClicked()}},{key:"onSubmit",value:function(e,t){return t.preventDefault(),t.stopPropagation(),this.selected&&(this.args.view.addRecord(this.selected),this.args.view.addButtonClicked()),!1}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o.FormWrapper);t.SearchForm=h}()})),require.register("curvature/form/multiField/View.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=r("../../base/Config"),n=r("../../form/Form"),o=r("../../form/FieldSet"),i=r("./CreateForm"),a=r("./SearchForm"),u=(r("./FormWrapper"),r("./Wrapper"));function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var v=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(v,t);var r,o,p,d=f(v);function v(e,t,r,n){var o;for(var i in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(o=d.call(this,e,t,r,n)).args._fields=[],o.dragging=!1,o.dropping=!1,o.args.fields)o.args._fields[Number(i)+1]=o.wrapSubfield(o.args.fields[i]);return o.args.fields[-1].disable(),o.args._fields[0].addEventListener("attach",(function(e){return e.preventDefault()})),o.args.creating="",o.args.fieldType="",o.args.createForm=o.args.createForm||"",o.args.searchForm=o.args.searchForm||"",o.args.createFormReady=!1,o.setCreateForm({view:y(o)}),o.args.loader="...",o.args.addIcon="&#215;",o.args.addIcon="a",o.args.addIcon="+",o.args.draggable="true",o.template='\n\t\t\t<label\n\t\t\t\tfor        = "'.concat(o.args.name,'"\n\t\t\t\tdata-type  = "').concat(o.args.attrs.type,'"\n\t\t\t\tdata-multi = "').concat(o.args.attrs["data-multi"]?"true":"false",'"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\n\t\t\t\t<fieldset\n\t\t\t\t\tname  = "').concat(o.args.name,'"\n\t\t\t\t\tclass = "multi-field [[creating]] [[fieldType]]"\n\t\t\t\t>\n\n\t\t\t\t\t<div class = "record-list" cv-each = "_fields:field:f">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass     = "single-record"\n\t\t\t\t\t\t\tdata-for  = "[[f]]"\n\t\t\t\t\t\t>[[field]]</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay create">\n\t\t\t\t\t\t<div class = "form constrict">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\t\tclass = "bubble bottom left-margin close"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t&#215;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t[[createForm]]\n\t\t\t\t\t\t[[searchForm]]\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = "overlay loading">\n\t\t\t\t\t\t[[loader]]\n\t\t\t\t\t</div>\n\t\t\t\t\t<div cv-if = "createFormReady" class="add-button-holder">\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcv-on = "click:addButtonClicked(event)"\n\t\t\t\t\t\t\tclass = "bubble bottom left-margin add"\n\t\t\t\t\t\t\ttab-index = "0"\n\t\t\t\t\t\t>[[addIcon]]</div>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</fieldset>\n\n\t\t\t\t<span cv-each = "errors:error:e">\n\t\t\t\t\t<p class = "cv-error">[[error]]</p>\n\t\t\t\t</span>\n\n\t\t\t</label>\n\t\t'),o}return r=v,o=[{key:"setCreateForm",value:function(t){var r=this,n="";e.Config.get("backend")&&(n=e.Config.get("backend")),!1!==this.args.attrs["data-create-endpoint"]&&void 0!==this.args.attrs["data-create-endpoint"]?(this.args.createForm=new i.CreateForm(Object.assign({},t),this.args.attrs["data-create-endpoint"]?n+this.args.attrs["data-create-endpoint"]:t.publicId?n+"".concat(this.args.attrs["data-endpoint"],"/").concat(t.publicId,"/edit"):n+"".concat(this.args.attrs["data-endpoint"],"/create")),this.args.createForm._onLoad.push((function(e,t){r.args.createFormReady=!0}))):this.args.createFormReady=!0,this.args.attrs["data-endpoint"]&&(this.args.searchForm=new a.SearchForm(Object.assign({},t),n+this.args.attrs["data-endpoint"]))}},{key:"wrapSubfield",value:function(e){return new u.Wrapper({field:e,parent:this})}},{key:"addButtonClicked",value:function(){this.args.creating||(this.args.creating="creating")}},{key:"addRecord",value:function(e){for(var t in this.args.creating="",Array.isArray(e)||(e=[e]),e){this.args.fields[-1].constructor;var r,o=Object.assign({},this.args.fields[-1].skeleton),i=Object.values(this.args.fields).length-1;o=this.cloneSkeleton(o),(o=this.correctNames(o,i)).attrs=null!==(r=o.attrs)&&void 0!==r?r:{},o.attrs["data-array"]=!0;var a={};a[i]=o;var u=n.Form.renderFields(a,this)[i];this.args.fields[i]=u;var c=this.wrapSubfield(u);u.args.value.id=e[t].id||"",u.args.value.class=e[t].class||"",u.args.value.title=e[t].title||"",u.args.value.key=this.args._fields.length,console.log(this.args._fields),this.args._fields.push(c),c.refresh(e[t])}}},{key:"editRecord",value:function(e,t){this.setCreateForm({view:this,publicId:e.publicId,wrapper:t}),this.args.creating=this.args.creating?"":"creating"}},{key:"deleteImage",value:function(e){console.log(e,this.args.fields),this.args.fields[e].disable(),this.args._fields[e].args.classes="deleted"}},{key:"undeleteImage",value:function(e){this.args.fields[e].enable(),this.args._fields[e].args.classes=""}},{key:"cloneSkeleton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r={};for(var n in Array.isArray(e)&&(r=[]),e)"fields"!=n&&(e[n]&&"object"===c(e[n])?r[n]=Object.assign({},this.cloneSkeleton(e[n],t+1)):r[n]=e[n]);return r}},{key:"correctNames",value:function(e,t){if(e.name=e.name.replace(/\[-1\]/,"[".concat(t,"]")),e.attrs.name=e.name,"children"in e)for(var r in e.children)e.children[r]=this.correctNames(e.children[r],t);return e}},{key:"drag",value:function(e){this.dragging=e.target}},{key:"dragOver",value:function(e){if(!this.dragging)return!1;for(var t=e.target;t&&!t.matches('[draggable="true"]');)t=t.parentNode;t&&(this.dropping=t,e.preventDefault())}},{key:"drop",value:function(e){e.stopPropagation();var t=this.dragging.querySelector("label"),r=this.dropping.querySelector("label"),n=t.getAttribute("for"),o=r.getAttribute("for"),i=this.extractIndex(n),a=this.extractIndex(o);if(i==a||i==a-1)return this.dragging=!1,void(this.dropping=!1);var u,c,s=t.querySelectorAll('[name^="'+n+'"]'),l=t.querySelectorAll('[for^="'+n+'"]'),f=r.querySelectorAll('[name^="'+o+'"]'),p=r.querySelectorAll('[for^="'+o+'"]'),y=this.dropping,d=0;for(var v in this.args.fields){var h=this.args.fields[v].tags.input.element,b=this.args.fields[v].tags.label.element,m=h.getAttribute("name");t==b&&(u=this.args.fields[v]),r==b&&(c=this.args.fields[v]);var g=this.extractIndex(m),w=!1;if(!(g<0)&&(i>a&&g>=a&&g<=i?(w=this.changeIndex(m,g+1),d=-1):i<a&&g<=a&&g>=i&&(w=this.changeIndex(m,g-1),d=0),!1!==w)){this.changeAttributePrefix(b,"for",m,w),this.args.fields[v].args.fieldName=w,this.changeAttributePrefix(h,"name",m,w);for(var O=h.parentNode.querySelectorAll('[name^="'+m+'"]'),j=0;j<O.length;j++)this.changeAttributePrefix(O[j],"name",m,w);for(var P=h.parentNode.querySelectorAll('[for^="'+m+'"]'),S=0;S<P.length;S++)this.changeAttributePrefix(P[S],"for",m,w)}}n=t.getAttribute("for"),o=r.getAttribute("for"),i=this.extractIndex(n),a=this.extractIndex(o),this.changeAttributePrefix(t,"for",n,this.changeIndex(n,a+d));for(var k=0;k<s.length;k++)this.changeAttributePrefix(s[k],"name",n,this.changeIndex(n,a+d));for(var _=0;_<l.length;_++)this.changeAttributePrefix(l[_],"for",n,this.changeIndex(n,a+d));u.args.fieldName=t.getAttribute("for"),this.changeAttributePrefix(r,"for",o,this.changeIndex(o,a+d+1));for(var E=0;E<f.length;E++)this.changeAttributePrefix(f[E],"name",o,this.changeIndex(o,a+d+1));for(var R=0;R<p.length;R++)this.changeAttributePrefix(p[R],"for",o,this.changeIndex(o,a+d+1));c.args.fieldName=r.getAttribute("for"),this.dragging.parentNode.insertBefore(this.dragging,y),this.dragging=!1,this.dropping=!1}},{key:"dragStop",value:function(){this.dragging=!1,this.dropping=!1}},{key:"changeAttributePrefix",value:function(e,t,r,n){e.getAttribute(t);var o=n+e.getAttribute(t).substring(r.length);e.setAttribute(t,o)}},{key:"extractIndex",value:function(e){var t;return!!(t=/\[(-?\d+)\]$/.exec(e))&&parseInt(t[1])}},{key:"changeIndex",value:function(e,t){return e.replace(/\[(-?\d+)\]$/,"["+t+"]")}},{key:"cancel",value:function(e){e.stopPropagation()}}],o&&s(r.prototype,o),p&&s(r,p),Object.defineProperty(r,"prototype",{writable:!1}),v}(o.FieldSet);t.View=v}()})),require.register("curvature/form/multiField/Wrapper.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Wrapper=void 0;var n=r("../../base/Config"),o=r("../../base/View"),i=r("../../base/Repository");function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(l,e);var t,r,o,s=c(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).template='\n\t\t\t<div\n\t\t\t\tclass = "wrapped-field [[classes]]"\n\t\t\t\tcv-on = "click:editRecord(event, key)"\n\t\t\t\ttitle = "[[fieldName]]: [[id]]"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcv-on = "click:deleteImage(event, key)"\n\t\t\t\t\tstyle = "display: inline; cursor:pointer;"\n\t\t\t\t>\n\t\t\t\t\t[[icon]]\n\t\t\t\t</div>\n\t\t\t\t<div class = "field-content">\n\t\t\t\t\t[[title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style = "display:none">[[field]]</div>\n\t\t',t.args.field=t.args.field||"!",t.args.keyword="",t.args.title="",t.args.record={},t.args.key=t.args.field.key,t.args.classes="",t.args.icon="",t.deleted=!1,t.args.field.args.bindTo("fieldName",(function(e){t.args.fieldName=e})),t.args.fieldName=t.args.field.args.name,t.args.id=t.args.field.args.value.id,t.args.bindTo("id",(function(e){t.args.field.args.value.id=e})),t.args.field.args.value.bindTo("id",(function(e,r){e&&i.Repository.request(t.backendPath(),{id:e}).then((function(r){t.args.id=e;var n=r.body[0];if(!n)return t.args.publicId=null,void(t.args.title=null);t.refresh(n)}))}),{wait:0}),t.args.field.args.value.bindTo("keyword",(function(e){t.args.keyword=e})),t}return t=l,(r=[{key:"editRecord",value:function(){this.args.parent.editRecord(this.args.record,this)}},{key:"deleteImage",value:function(e,t){e.stopPropagation(),this.deleted?(this.args.icon="",this.args.parent.undeleteImage(t),this.deleted=!1):(this.args.icon="",this.args.parent.deleteImage(t),this.deleted=!0)}},{key:"backendPath",value:function(){return(n.Config.get("backend")||"//")+this.args.parent.args.attrs["data-endpoint"]}},{key:"getRecordTitle",value:function(e){return e._titleField?e[e._titleField]:e.title||e.publicId||e.id}},{key:"refresh",value:function(e){for(var t in e)this.args[t]=e[t];this.args.record=e,this.args.title=this.getRecordTitle(e)}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(o.View);t.Wrapper=f}()})),require.register("curvature/input/Axis.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Axis=void 0;var e,n=r("../base/Bindable");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=n.Bindable.NoGetters;var a=function(){function t(r){var n=r.deadZone,o=void 0===n?0:n,a=r.proportional,u=void 0===a||a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,e,!0),i(this,"magnitude",0),i(this,"delta",0),this.proportional=u,this.deadZone=o}var r,n,a;return r=t,(n=[{key:"tilt",value:function(e){this.deadZone&&Math.abs(e)>=this.deadZone?e=(Math.abs(e)-this.deadZone)/(1-this.deadZone)*Math.sign(e):this.deadZone&&Math.abs(e)<this.deadZone&&(e=0),this.delta=Number(e-this.magnitude).toFixed(3)-0,this.magnitude=Number(e).toFixed(3)-0}},{key:"zero",value:function(){this.magnitude=this.delta=0}}])&&o(r.prototype,n),a&&o(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Axis=a}()})),require.register("curvature/input/Button.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var e,n=r("../base/Bindable");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=n.Bindable.NoGetters;var a=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,e,!0),i(this,"active",!1),i(this,"pressure",0),i(this,"delta",0),i(this,"time",0)}var r,n,a;return r=t,(n=[{key:"update",value:function(){this.pressure?this.time++:!this.pressure&&this.time>0?this.time=-1:!this.pressure&&this.time<0&&this.time--,this.time<-1&&-1===this.delta&&(this.delta=0)}},{key:"press",value:function(e){this.delta=Number(e-this.pressure).toFixed(3)-0,this.pressure=Number(e).toFixed(3)-0,this.active=!0,this.time=this.time>0?this.time:0}},{key:"release",value:function(){this.active&&(this.delta=Number(-this.pressure).toFixed(3)-0,this.pressure=0,this.active=!1)}},{key:"zero",value:function(){this.pressure=this.delta=0,this.active=!1}}])&&o(r.prototype,n),a&&o(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Button=a}()})),require.register("curvature/input/Gamepad.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Gamepad=void 0;var n,o=r("../base/Bindable"),i=r("../base/Mixin"),a=r("../mixin/EventTargetMixin"),u=r("./Axis"),c=r("./Button");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g={Space:0,Enter:0,NumpadEnter:0,ControlLeft:1,ControlRight:1,ShiftLeft:2,ShiftRight:2,KeyZ:3,KeyQ:4,KeyE:5,Digit1:6,Digit3:7,KeyW:12,KeyA:14,KeyS:13,KeyD:15,KeyH:112,KeyJ:113,KeyK:114,KeyL:115,KeyP:9,Pause:9,Tab:11,ArrowUp:12,ArrowDown:13,ArrowLeft:14,ArrowRight:15,Numpad4:112,Numpad2:113,Numpad8:114,Numpad6:115,Backquote:1010,NumpadAdd:1011,NumpadSubtract:1012,NumpadMultiply:1013,NumpadDivide:1014,Escape:1020};b(Array(12)).map((function(e,t){return g["F".concat(t)]=2e3+t})),n=o.Bindable.NoGetters;var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(a,e);var t,r,o,i=p(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(t.keys,t.deadZone),o=void 0===r?0:r,u=t.gamepad,c=void 0===u?null:u,l=(t.keyboard,t.axisMap),f=void 0===l?null:l;return s(this,a),h(d(e=i.call(this)),n,!0),h(d(e),"axisMap",{12:-1,13:1,14:-0,15:0,112:-2,113:3,114:-3,115:2}),e.deadZone=o,e.gamepad=c,e.index=c.index,e.id=c.id,e.axisMap=f||e.axisMap,Object.defineProperties(d(e),{buttons:{value:{}},pressure:{value:{}},axes:{value:{}},keys:{value:{}}}),e}return t=a,r=[{key:"update",value:function(){for(var e in this.buttons)this.buttons[e].update()}},{key:"rumbleEffect",value:function(e){return this.gamepad.vibrationActuator.playEffect("dual-rumble",e)}},{key:"rumble",value:function(){var e;if(this.gamepad.vibrationActuator.pulse)return(e=this.gamepad.vibrationActuator).pulse.apply(e,arguments);this.rumbleEffect({duration:1e3,strongMagnitude:1,weakMagnitude:1})}},{key:"readInput",value:function(){if(this.gamepad){var e=String(this.gamepad.index),t=this.constructor;t.padsRead.has(e)||(t.padsRead=new Map(Object.entries(navigator.getGamepads())));var r=this.gamepad=t.padsRead.get(e);t.padsRead.delete(e);var n={},o={};if(r)for(var i in r.buttons){var a=r.buttons[i];a.pressed&&(this.press(i,a.value),n[i]=!0)}if(this.keyboard){for(var u in b(Array(10)))n[u]||this.keyboard.getKeyCode(u)>0&&(this.press(u,1),n[u]=!0);for(var s in g)if(!n[s]){var l=g[s];this.keyboard.getKeyCode(s)>0&&(this.press(l,1),n[l]=!0)}}if(r)for(var f in r.buttons)n[f]||r.buttons[f].pressed||(this.release(f),o[f]=!0);if(this.keyboard){for(var p in b(Array(10)))o[p]||n[p]||this.keyboard.getKeyCode(p)<0&&(this.release(p),o[p]=!0);for(var y in g){var d=g[y];o[d]||n[d]||this.keyboard.getKeyCode(y)<0&&(this.release(d),o[y]=!0)}}var v={};if(r)for(var h in r.axes){var m=r.axes[h];v[h]=!0,this.tilt(h,m)}for(var w in this.axisMap){this.buttons[w]||(this.buttons[w]=new c.Button);var O=this.axisMap[w],j=Math.sign(1/O),P=Math.abs(O);this.buttons[w].active?(v[P]=!0,this.tilt(P,j)):v[P]||this.tilt(P,0)}}}},{key:"tilt",value:function(e,t){this.axes[e]||(this.axes[e]=new u.Axis({deadZone:this.deadZone})),this.axes[e].tilt(t)}},{key:"press",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.buttons[e]||(this.buttons[e]=new c.Button),this.buttons[e].press(t)}},{key:"release",value:function(e){this.buttons[e]||(this.buttons[e]=new c.Button),this.buttons[e].release()}},{key:"serialize",value:function(){var e={};for(var t in this.buttons)e[t]=this.buttons[t].pressure;var r={};for(var n in this.axes)r[n]=this.axes[n].magnitude;return{axes:r,buttons:e}}},{key:"replay",value:function(e){if(e.buttons)for(var t in e.buttons)e.buttons[t]>0?this.press(t,e.buttons[t]):this.release(t);if(e.axes)for(var r in e.axes)e.axes[r].magnitude!==e.axes[r]&&this.tilt(r,e.axes[r])}},{key:"zero",value:function(){for(var e in this.axes)this.axes[e].zero();for(var t in this.buttons)this.buttons[t].zero()}}],o=[{key:"getPad",value:function(e){var t=this,r=e.index,n=void 0===r?void 0:r,o=e.deadZone,i=void 0===o?0:o,a=e.keys,u=void 0===a?{}:a,c=e.keyboard,s=void 0===c?null:c,l=e.axisMap,f=void 0===l?null:l;if(this.padsConnected.has(n))return this.padsConnected.get(n);var p=new Promise((function(e){addEventListener("gamepadconnected",(function(r){r.stopImmediatePropagation();var n=new t({gamepad:r.gamepad,deadZone:i,keys:u,keyboard:s,axisMap:f});t.padsConnected.set(r.gamepad.index,p),e(n)}),{once:!0})}));return p}}],r&&l(t.prototype,r),o&&l(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.Mixin.with(a.EventTargetMixin));t.Gamepad=w,h(w,"padsConnected",new Map),h(w,"padsRead",new Map)}()})),require.register("curvature/input/Keyboard.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Keyboard=void 0;var e=r("../base/Bindable");function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function t(){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxDecay=120,this.comboTime=500,this.listening=!1,this.focusElement=document.body,this[e.Bindable.NoGetters]=!0,Object.defineProperty(this,"combo",{value:e.Bindable.make([])}),Object.defineProperty(this,"whichs",{value:e.Bindable.make({})}),Object.defineProperty(this,"codes",{value:e.Bindable.make({})}),Object.defineProperty(this,"keys",{value:e.Bindable.make({})}),Object.defineProperty(this,"pressedWhich",{value:e.Bindable.make({})}),Object.defineProperty(this,"pressedCode",{value:e.Bindable.make({})}),Object.defineProperty(this,"pressedKey",{value:e.Bindable.make({})}),Object.defineProperty(this,"releasedWhich",{value:e.Bindable.make({})}),Object.defineProperty(this,"releasedCode",{value:e.Bindable.make({})}),Object.defineProperty(this,"releasedKey",{value:e.Bindable.make({})}),Object.defineProperty(this,"keyRefs",{value:e.Bindable.make({})}),document.addEventListener("keyup",(function(e){r.listening&&(r.keys[e.key]>0||!r.focusElement||document.activeElement===r.focusElement||r.focusElement.contains(document.activeElement)&&!document.activeElement.matches("input,textarea"))&&(e.preventDefault(),r.releasedWhich[e.which]=Date.now(),r.releasedCode[e.code]=Date.now(),r.releasedKey[e.key]=Date.now(),r.whichs[e.which]=-1,r.codes[e.code]=-1,r.keys[e.key]=-1)})),document.addEventListener("keydown",(function(e){r.listening&&(!r.focusElement||document.activeElement===r.focusElement||r.focusElement.contains(document.activeElement)&&!document.activeElement.matches("input,textarea"))&&(e.preventDefault(),e.repeat||(r.combo.push(e.code),clearTimeout(r.comboTimer),r.comboTimer=setTimeout((function(){return r.combo.splice(0)}),r.comboTime),r.pressedWhich[e.which]=Date.now(),r.pressedCode[e.code]=Date.now(),r.pressedKey[e.key]=Date.now(),r.keys[e.key]>0||(r.whichs[e.which]=1,r.codes[e.code]=1,r.keys[e.key]=1)))}));var n=function(e){for(var t in r.keys)r.keys[t]<0||(r.releasedKey[t]=Date.now(),r.keys[t]=-1);for(var n in r.codes)r.codes[n]<0||(r.releasedCode[n]=Date.now(),r.codes[n]=-1);for(var o in r.whichs)r.whichs[o]<0||(r.releasedWhich[o]=Date.now(),r.whichs[o]=-1)};window.addEventListener("blur",n),window.addEventListener("visibilitychange",(function(){"visible"!==document.visibilityState&&n()}))}var r,o,i;return r=t,i=[{key:"get",value:function(){return this.instance=this.instance||e.Bindable.make(new this)}}],(o=[{key:"getKeyRef",value:function(t){return this.keyRefs[t]=this.keyRefs[t]||e.Bindable.make({})}},{key:"getKeyTime",value:function(e){var t=this.releasedKey[e],r=this.pressedKey[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getCodeTime",value:function(e){var t=this.releasedCode[e],r=this.pressedCode[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getWhichTime",value:function(e){var t=this.releasedWhich[e],r=this.pressedWhich[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getKey",value:function(e){return this.keys[e]?this.keys[e]:0}},{key:"getKeyCode",value:function(e){return this.codes[e]?this.codes[e]:0}},{key:"reset",value:function(){for(var e in this.keys)delete this.keys[e];for(var e in this.codes)delete this.codes[e];for(var e in this.whichs)delete this.whichs[e]}},{key:"update",value:function(){for(var e in this.keys)this.keys[e]>0?this.keys[e]++:this.keys[e]>-this.maxDecay?this.keys[e]--:delete this.keys[e];for(var e in this.codes){var t=this.releasedCode[e],r=this.pressedCode[e],n=this.getKeyRef(e);if(this.codes[e]>0){if(n.frames=this.codes[e]++,n.time=r?Date.now()-r:0,n.down=!0,!t||t<r)return;return-1*(Date.now()-t)}this.codes[e]>-this.maxDecay?(n.frames=this.codes[e]--,n.time=t-Date.now(),n.down=!1):(n.frames=0,n.time=0,n.down=!1,delete this.codes[e])}for(var e in this.whichs)this.whichs[e]>0?this.whichs[e]++:this.whichs[e]>-this.maxDecay?this.whichs[e]--:delete this.whichs[e]}}])&&n(r.prototype,o),i&&n(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Keyboard=o}()})),require.register("curvature/input/Sequence.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Sequence=void 0;var n,o=r("../base/Bindable"),i=r("../base/Mixin"),a=r("../mixin/EventTargetMixin");function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}n=o.Bindable.NoGetters;var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,r,o,i=f(a);function a(e){var t,r=e.callback,o=e.keys,u=e.timing,c=e.gamepad;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),v(y(t=i.call(this)),n,!0),v(y(t),"lastTap",!1),v(y(t),"recent",[]),v(y(t),"callback",(function(){})),v(y(t),"timing",500),v(y(t),"keys","");var s=[r,u,o,c];return t.callback=s[0],t.timing=s[1],t.keys=s[2],t.gamepad=s[3],t}return t=a,(r=[{key:"check",value:function(e){var t=this.recent,r=Date.now();r+-this.lastTap>this.timing&&t.splice(0),t.push({code:e,time:Date.now()});var n=t.map((function(e){return e.code})).join(","),o=this.keys.join(",");this.lastTap=r;var i=[];for(var a in t){t[a];var c=t.slice(a),s=c.map((function(e){return e.code})).join(",");if(s===o.substr(0,s.length)){i.push.apply(i,u(c)),this.dispatchEvent(new CustomEvent("advance",{detail:{matched:i,recent:t,keys:this.keys,length:c.length}}));break}}i.length?o===n.substr(-o.length)&&this.dispatchEvent(new CustomEvent("complete",{detail:{matched:i,recent:t,keys:this.keys,length:i.length}})):this.dispatchEvent(new CustomEvent("cancel",{detail:{matched:i,recent:t,keys:this.keys,length:i.length}}))}}])&&s(t.prototype,r),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.Mixin.with(a.EventTargetMixin));t.Sequence=h}()})),require.register("curvature/mixin/EventTargetMixin.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventTargetMixin=void 0;var e,n=r("../base/Mixin");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=Symbol("Target"),a=(o(e={},n.Mixin.Constructor,(function(){try{this[i]=new EventTarget}catch(e){this[i]=document.createDocumentFragment()}})),o(e,"dispatchEvent",(function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[0];"string"==typeof o&&(o=new CustomEvent(o),r[0]=o),(e=this[i]).dispatchEvent.apply(e,r);var a="on".concat(o.type[0].toUpperCase()+o.type.slice(1));return"function"==typeof this[a]&&this[a](o),o.returnValue})),o(e,"addEventListener",(function(){var e;(e=this[i]).addEventListener.apply(e,arguments)})),o(e,"removeEventListener",(function(){var e;(e=this[i]).removeEventListener.apply(e,arguments)})),e);t.EventTargetMixin=a}()})),require.register("curvature/mixin/PromiseMixin.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMixin=void 0;var e,n=r("../base/Mixin");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=Symbol("Promise"),a=Symbol("Accept"),u=Symbol("Reject"),c=(o(e={},n.Mixin.Constructor,(function(){var e=this;this[i]=new Promise((function(t,r){e[a]=t,e[u]=r}))})),o(e,"then",(function(){var e;return(e=this[i]).then.apply(e,arguments)})),o(e,"catch",(function(){var e;return(e=this[i]).catch.apply(e,arguments)})),o(e,"finally",(function(){var e;return(e=this[i]).finally.apply(e,arguments)})),e);t.PromiseMixin=c,Object.defineProperty(c,"Reject",{value:u}),Object.defineProperty(c,"Accept",{value:a})}()})),require.register("curvature/model/Database.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Database=void 0;var n=r("../base/Bindable"),o=r("../base/Mixin"),i=r("../mixin/EventTargetMixin");function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var d=Symbol("BeforeWrite"),v=Symbol("AfterWrite"),h=Symbol("BeforeDelete"),b=Symbol("AfterDelete"),m=Symbol("BeforeInsert"),g=Symbol("AfterInsert"),w=Symbol("BeforeUpdate"),O=Symbol("AfterUpdate"),j=Symbol("BeforeRead"),P=Symbol("AfterRead"),S=Symbol("PrimaryKey"),k=Symbol("Connection"),_=Symbol("Instances"),E=(Symbol("HighWater"),Symbol("Metadata")),R=Symbol("Timers"),T=Symbol("Target"),C=(Symbol("Store"),Symbol("Each")),A=Symbol("Name"),x=Symbol("Bank"),B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,o,i=l(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=i.call(this),Object.defineProperty(p(t),k,{value:e}),Object.defineProperty(p(t),A,{value:e.name}),Object.defineProperty(p(t),R,{value:{}}),Object.defineProperty(p(t),E,{value:{}}),Object.defineProperty(p(t),x,{value:{}}),t}return t=u,r=[{key:"select",value:function(e){var t=this,r=e.store,n=e.index,o=e.range,i=void 0===o?null:o,a=e.ranges,u=void 0===a?[]:a,c=e.direction,s=void 0===c?"next":c,l=e.limit,f=void 0===l?0:l,p=e.offset,y=void 0===p?0:p,d=e.type,v=void 0!==d&&d,h=e.origin,b=void 0===h?void 0:h,m=e.map,g=void 0===m?void 0:m,w=this[k].transaction(r,"readonly").objectStore(r),O=n?w.index(n):w;return u&&u.length||(u=[i]),{each:this[C](v,O,s,u,f,y,b,g),one:this[C](v,O,s,u,1,y,b,g),then:function(e){return t[C](v,O,s,u,f,y,b,g)((function(e){return e})).then(e)}}}},{key:"insert",value:function(e,t){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this[x][e]=this[x][e]||{};var i=this[k].transaction([e],"readwrite"),a=i.objectStore(e),c=this[x][e],s=!0;Array.isArray(t)||(t=[t],s=!1);var l,f=t.map((function(t){return new Promise((function(s,l){t=n.Bindable.make(t);var f={database:r[A],record:t,store:e,type:"write",subType:"insert",origin:o},p=t[u.BeforeWrite]?t[u.BeforeWrite](f):null,y=t[u.BeforeInsert]?t[u.BeforeInsert](f):null,d=a.add(Object.assign({},n.Bindable.shuck(t)));!1!==p&&!1!==y&&(d.onerror=function(e){r.dispatchEvent(new CustomEvent("writeError",{detail:f})),l(e)},d.onsuccess=function(n){var a=n.target.result;if(c[a]=t,f.key=u.getPrimaryKey(t),r.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:f}))){if(t[S]=Symbol.for(a),r[E][e]||(r[E][e]=r.getStoreMeta(e,"store",{})),r[E][e]){var l=r.checkHighWaterMark(e,t),p=r.checkLowWaterMark(e,t),y=r[E][e],d=t[y.highWater];o.setHighWater&&l<d&&r.setHighWaterMark(e,t,o,"insert"),o.setLowWater&&p>d&&r.setLowWaterMark(e,t,o,"insert")}t[u.AfterInsert]&&t[u.AfterInsert](f),t[u.AfterWrite]&&t[u.AfterWrite](f)}else i.abort();s(t)})}))}));return l=s?Promise.allSettled(f):f[0],Promise.all(f).then((function(){return i.commit&&i.commit()})),l}},{key:"update",value:function(e,t){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t[S])throw Error("Value provided is not a DB record!");return new Promise((function(i,a){var c=r[k].transaction([e],"readwrite"),s=c.objectStore(e),l={database:r[A],key:u.getPrimaryKey(t),record:t,store:e,type:"write",subType:"update",origin:o};t[u.AfterInsert]&&t[u.AfterInsert](l),t[u.AfterWrite]&&t[u.AfterWrite](l);var f=t[u.BeforeWrite]?t[u.BeforeWrite](l):null,p=t[u.BeforeUpdate]?t[u.BeforeUpdate](l):null;if(!1!==f&&!1!==p){var y=s.put(Object.assign({},n.Bindable.shuck(t)));y.onerror=function(e){r.dispatchEvent(new CustomEvent("writeError",{detail:l})),a(e)},y.onsuccess=function(n){if(r.dispatchEvent(new CustomEvent("write",{cancelable:!0,detail:l}))){if(r[E][e]||(r[E][e]=r.getStoreMeta(e,"store",{})),r[E][e]){var a=r.checkHighWaterMark(e,t),u=r.checkLowWaterMark(e,t),s=r[E][e],f=t[s.highWater];o.setHighWater&&a<f&&r.setHighWaterMark(e,t,o,"insert"),o.setLowWater&&u>f&&r.setLowWaterMark(e,t,o,"insert")}c.commit&&c.commit()}else c.abort();i(n)}}}))}},{key:"delete",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!t[S])throw Error("Value provided is not a DB record!");return new Promise((function(o,i){var a=r[k].transaction([e],"readwrite"),c=a.objectStore(e),s={database:r[A],record:t,key:u.getPrimaryKey(t),store:e,type:"write",subType:"delete",origin:n};if(!1!==(t[u.BeforeDelete]?t[u.BeforeDelete](s):null)){var l=c.delete(t.id);t[S]=void 0,t[u.AfterDelete]&&t[u.AfterDelete](s),l.onerror=function(e){s.original=e;var t=new CustomEvent("writeError",{detail:s});r.dispatchEvent(t),i(e)},l.onsuccess=function(e){s.original=e;var t=new CustomEvent("write",{detail:s});r.dispatchEvent(t),a.commit&&a.commit(),o(t)}}}))}},{key:"clear",value:function(e){var t=this;return new Promise((function(r,n){var o=t[k].transaction([e],"readwrite"),i=o.objectStore(e).clear(),a={database:t[A],store:e,type:"write",subType:"clear",origin:origin};i.onerror=function(e){a.original=e;var r=new CustomEvent("writeError",{detail:a});t.dispatchEvent(r),n(e)},i.onsuccess=function(e){a.original=e;var n=new CustomEvent("write",{detail:a});t.dispatchEvent(n),o.commit&&o.commit(),r(n)}}))}},{key:"listStores",value:function(){return a(this[k].objectStoreNames)}},{key:"listIndexes",value:function(e){return a(this[k].transaction([e]).objectStore(e).indexNames)}},{key:C,value:function(e,t,r,o,i,a,c,s){var l=this;return function(f){return Promise.all(o.map((function(o){return new Promise((function(p,y){var d=t.openCursor(o,r),v=0;d.addEventListener("success",(function(r){var o=r.target.result;if(!o)return p({record:null,result:null,index:v});l[x][O]=l[x][O]||{};var y=l[x][O],d=o.primaryKey,h=e?e.from(o.value):o.value,b=n.Bindable.makeBindable(h),m={database:l[A],key:u.getPrimaryKey(b),record:h,store:t.name,type:"read",subType:"select",origin:c},g=h[u.BeforeRead]?h[u.BeforeRead](m):null;if(a>v++||!1===g)return o.continue();y[d]?Object.assign(y[d],h):(h[S]=Symbol.for(d),y[d]=h);var w=o.source,O=w.objectStore?w.objectStore.name:t.name;if(m.record=h,y[d][u.AfterRead]&&y[d][u.AfterRead](m),l.dispatchEvent(new CustomEvent("read",{detail:m,cancelable:!0}))){var j=e?e.from(y[d]):y[d];j[S]=Symbol.for(d);var P=s?s(j):j,k=f?f(P,v):P;if(i&&v-a>=i)return a+=i,p({mapped:P,result:k,index:v})}o.continue()}))}))}))).then((function(e){return 1===e.length?e[0]:e}))}}},{key:"setStoreMeta",value:function(e,t,r){localStorage.setItem("::::cvdb::".concat(e,"::").concat(t),JSON.stringify(r))}},{key:"getStoreMeta",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=localStorage.getItem("::::cvdb::".concat(e,"::").concat(t)),o=null!==n?JSON.parse(n):r;return null===o?r:o}},{key:"createObjectStore",value:function(e,t){var r=this[k].createObjectStore(e,t);return this.setStoreMeta(e,"store",t),r}},{key:"deleteObjectStore",value:function(e){return this[k].deleteObjectStore(e)}},{key:"checkHighWaterMark",value:function(e,t){var r=this.getStoreMeta(e,"highWater",0);return r}},{key:"setHighWaterMark",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=this[E][e],i=t[o.highWater],a=this.getStoreMeta(e,"highWater",0);this.setStoreMeta(e,"highWater",i),this.dispatchEvent(new CustomEvent("highWaterMoved",{detail:{database:this[A],record:t,store:e,type:"highWaterMoved",subType:n,origin:r,oldValue:a,value:i}}))}},{key:"checkLowWaterMark",value:function(e,t){var r=this.getStoreMeta(e,"lowWater",1/0);return r}},{key:"setLowWaterMark",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=this[E][e],i=t[o.highWater],a=this.getStoreMeta(e,"lowWater",null);this.setStoreMeta(e,"lowWater",i),this.dispatchEvent(new CustomEvent("lowWaterMoved",{detail:{database:this[A],record:t,store:e,type:"lowWaterMoved",subType:n,origin:r,oldValue:a,value:i}}))}}],o=[{key:"open",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[_][e]?this[_][e]:this[_][e]=new Promise((function(n,o){var i=indexedDB.open(e,r);i.onerror=function(e){u.dispatchEvent(new CustomEvent("error",{detail:{database:t[A],error:e,store:void 0,type:"read",subType:"select"}})),o(e)},i.onsuccess=function(e){var r=new t(e.target.result);n(r)},i.onupgradeneeded=function(e){var n=e.target.result;n.addEventListener("error",(function(e){return console.error(e)}));for(var o=new t(n),i=e.oldVersion+1;i<=r;i+=1)o["_version_"+i](n)}}))}},{key:"getPrimaryKey",value:function(e){return e[S]?e[S]:null}},{key:"destroyDatabase",value:function(){var e=this;return new Promise((function(t,r){var n=indexedDB.delete(dbName);n.onerror=function(e){u.dispatchEvent(new CustomEvent("error",{detail:{database:dbName,error:e,type:"destroy"}})),r(e)},n.onsuccess=function(r){delete e[_][dbName],t(dbName)}}))}}],r&&c(t.prototype,r),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(o.Mixin.with(i.EventTargetMixin));t.Database=B,Object.defineProperty(B,_,{value:[]});try{Object.defineProperty(B,T,{value:new EventTarget})}catch(e){Object.defineProperty(B,T,{value:document.createDocumentFragment()})}Object.defineProperty(B,"BeforeDelete",{value:h}),Object.defineProperty(B,"AfterDelete",{value:b}),Object.defineProperty(B,"BeforeWrite",{value:d}),Object.defineProperty(B,"AfterWrite",{value:v}),Object.defineProperty(B,"BeforeInsert",{value:m}),Object.defineProperty(B,"AfterInsert",{value:g}),Object.defineProperty(B,"BeforeUpdate",{value:w}),Object.defineProperty(B,"AfterUpdate",{value:O}),Object.defineProperty(B,"BeforeRead",{value:j}),Object.defineProperty(B,"AfterRead",{value:P}),Object.defineProperty(B,"PKSymbol",{value:S});var M=function(e){Object.defineProperty(B,e,{value:function(){var t;return(t=B[T])[e].apply(t,arguments)}})};for(var D in["addEventListener","removeEventListener","dispatchEvent"])M(D)}()})),require.register("curvature/model/Model.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var e=r("../base/Cache"),n=r("../base/Bindable"),o=r("./Database");function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=Symbol("Changed"),y=Symbol("Deleted"),d=Symbol("Saved"),v=Symbol("Keys"),h=function(){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"id",void 0),f(this,"class",void 0),Object.defineProperty(this,p,{value:n.Bindable.make({})}),Object.defineProperty(this,y,{writable:!0,value:!1}),Object.defineProperty(this,d,{writable:!0,value:!1}),Object.defineProperty(this,v,{writable:!0,value:new Set}),n.Bindable.make(this)}var r,u,c;return r=t,u=[{key:"consume",value:function(r){var n=this,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=t.keyProps,l=function(t,r){if(r&&"object"===s(r)&&r.constructor.keyProps){var o=r.constructor.keyProps.map((function(e){return r[e]})).join("::"),i=e.Cache.load(o,!1,"models-by-type-and-publicId");i&&(i.consume(r),r=i)}!u&&n[p][t]||(n[t]=r)};o.Database.PKSymbol in r&&l(o.Database.PKSymbol,r[o.Database.PKSymbol]),this[v]=new Set([].concat(a(this[v]),a(Object.keys(this)),a(Object.keys(r))));var f,y=i(this[v]);try{for(y.s();!(f=y.n()).done;){var d=f.value;!u&&this[p][d]||c.includes(d)||d in r&&l(d,r[d])}}catch(e){y.e(e)}finally{y.f()}}},{key:"changed",value:function(){this[d]=!1}},{key:"markDeleted",value:function(){for(var e in this[p])this[p][e]=!1;this[y]=!0,this[d]=!1}},{key:"markStored",value:function(){for(var e in this)this[p][e]=!1;this[y]=!1,this[d]=!0}},{key:"isSaved",value:function(){return this[d]}}],c=[{key:"keyProps",get:function(){return["id","class"]}},{key:"from",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.keyProps,o=n.map((function(e){return t[e]}));o.unshift(this.name);var a,u=o.join("::"),c="models-by-type-and-publicId",l=e.Cache.load(u,!1,c),f=l||new this,y=i(n);try{for(y.s();!(a=y.n()).done;){var v,h,b=a.value;f[b]=null!==(v=null!==(h=f[b])&&void 0!==h?h:t[b])&&void 0!==v?v:null}}catch(e){y.e(e)}finally{y.f()}if(f.consume(t),!l){e.Cache.store(u,f,0,c);var m=!1;f.bindTo((function(e,t,r,n){"symbol"!==s(t)&&e!==r[t]&&(f[p][t]=m,f[d]=!(m||!f[d]))})),0===Object.keys(f[p]).length&&(f[d]=r),m=!0}return f}}],u&&l(r.prototype,u),c&&l(r,c),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Model=h,Object.defineProperty(h,"Changed",{value:p}),Object.defineProperty(h,"Deleted",{value:y}),Object.defineProperty(h,"Saved",{value:d})}()})),require.register("curvature/net/Elicit.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Elicit=void 0;var n=r("curvature/base/Mixin"),o=r("curvature/mixin/EventTargetMixin"),i=r("curvature/mixin/PromiseMixin");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=Symbol("IterateDownload"),y=Symbol("Retry"),d=Symbol("HandleFirstByte"),v=Symbol("HandleProgress"),h=Symbol("HandleComplete"),b=Symbol("HandleHeaders"),m=Symbol("HandleClose"),g=Symbol("HandleError"),w=Symbol("HandleOpen"),O=Symbol("HandleFail"),j=Symbol("LastChunkSize"),P=Symbol("LastChunkTime"),S=Symbol("Options"),k=Symbol("Fetch"),_=Symbol("Type"),E=Symbol("Url"),R=Symbol("RetriesLeft"),T=Symbol("TimeoutLeft"),C=Symbol("Timeout"),A=Symbol("Timer"),x=Symbol("Canecller"),B=Symbol("Caneclled"),M=Symbol("Paused"),D=Symbol("Received"),I=Symbol("Length"),N=Symbol("Opened"),F=Symbol("Closed"),q=Symbol("Start"),L=Symbol("First"),W=Symbol("End"),V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(l,e);var t,r,n,o=s(l);function l(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,l),(t=o.call(this))[R]=r.retries||5,t[C]=r.timeout||4500,t[T]=r.maxTimeout||t[C]*t[R],t[P]=0,t[j]=0,t[B]=!1,t[D]=0,t[M]=!1,t[F]=0,t[S]=Object.assign({},r),t[E]=e,r.defer||t.open(),t}return t=l,(r=[{key:"open",value:function(){var e=this;this[N]&&!this[F]||(this[q]||(this[q]=Date.now()),this[x]=new AbortController,this[S].signal=this[x].signal,this[N]=Date.now(),this[F]=0,this[L]=0,this[k]=fetch(this[E],this[S]).then((function(t){return e[w](t)})).catch((function(t){return e[g](t)})),this[A]=setTimeout((function(){if(!e[L]){if(e[x].abort(),e[m](),e[T]=Math.max(0,e[T]-e[C]),!e[T])return;e[O](new Error("Timed out."))}}),this[C]))}},{key:"headers",value:function(){return this[k].then((function(e){var t=e.response;return e.stream,t.headers}))}},{key:"json",value:function(){var e=this;return this[k].then((function(t){t.response;var r=t.stream;return new Response(r,{headers:{"Content-Type":e.type}}).json()}))}},{key:"text",value:function(){var e=this;return this[k].then((function(t){t.response;var r=t.stream;return new Response(r,{headers:{"Content-Type":e.type}}).text()}))}},{key:"css",value:function(){return this.text().then((function(e){var t=new CSSStyleSheet;return t.replace(e),t}))}},{key:"blob",value:function(){var e=this;return this[k].then((function(t){t.response;var r=t.stream;return new Response(r,{headers:{"Content-Type":e.type}}).blob()}))}},{key:"buffer",value:function(){return this.blob().then((function(e){return e.arrayBuffer()}))}},{key:"bytes",value:function(){return this.buffer().then((function(e){return new Uint8Array(e)}))}},{key:"objectUrl",value:function(){return this.blob().then((function(e){return URL.createObjectURL(e)}))}},{key:"cancel",value:function(){this.emitCancelEvent()&&(this[x].abort(),this[B]=!0,this.emitCancelledEvent())}},{key:"pause",value:function(){this[W]||this[M]||this[F]||this.emitPauseEvent()&&(this[M]=!0,this.emitPausedEvent())}},{key:"unpause",value:function(){!this[W]&&this[M]&&this.emitUnpauseEvent()&&(this[M]=!1,this.emitUnpausedEvent())}},{key:"done",get:function(){return!!this[W]}},{key:"type",get:function(){return this[_]}},{key:"totalTime",get:function(){return this[W]?this[W]-this[q]:Date.now()-this[q]}},{key:"waitTime",get:function(){return this[L]?this[L]-this[N]:Date.now()-this[N]}},{key:"loadTime",get:function(){return this[N]?this[F]?this[F]-this[L]:Date.now()-this[L]:0}},{key:"speed",get:function(){return this[N]?((e=this[W]?this[W]-this[P]:Date.now()-this[P])||(e=.01),this[j]/e):0;var e}},{key:"received",get:function(){return this[D]}},{key:"length",get:function(){return this[I]}},{key:"isPaused",get:function(){return this[M]}},{key:p,value:function(e,t,r){var n=this;this[v](r,0,null);var o=Date.now(),i=1,a=function(e){var a=e.done,c=e.value;return a?(t.close(),n[h]()):(t.enqueue(c),n[D]+=c.length,n[L]||n[d](c),n[v](r,n[D]),n[P]=o,n[j]=i,o=Date.now(),i=c.length,u())},u=function t(){return n[B]?e.cancel():n[M]?new Promise((function(e){setTimeout((function(){return e(t())}),100)})):e.read().then((function(e){return a(e)})).catch((function(e){return n[g](e)}))};return u()}},{key:y,value:function(){if(this.emitRetryEvent()&&!(this[R]<=0))return this[x].abort(),this[m](),this[D]=0,this[R]--,this.open()}},{key:w,value:function(e){var t=e.body.getReader(),r=this[I]||Number(e.headers.get("Content-Length")),n=this[n]||e.headers.get("Content-Type");this[I]=r,this[_]=n,this[b](e.headers);var o=this;return{response:e,stream:new ReadableStream({start:function(e){o[p](t,e,r)}})}}},{key:m,value:function(){this[F]=Date.now(),this.emitCloseEvent()}},{key:b,value:function(e){this.emitHeadersEvent(e)}},{key:v,value:function(e,t,r){this.emitProgressEvent(e,t,r)}},{key:h,value:function(){this[W]=Date.now(),this[m](),this.emitCompleteEvent(),this[i.PromiseMixin.Accept]()}},{key:g,value:function(e){return console.warn(e),this.emitErrorEvent(e)?this[O](e):this[y]()}},{key:O,value:function(e){return this[W]=Date.now(),this[m](),this.emitFailEvent(e),this[i.PromiseMixin.Reject](e)}},{key:d,value:function(e){clearInterval(this[A]),this[L]=Date.now(),this.emitFirstByteEvent(e)}},{key:"emitProgressEvent",value:function(e,t,r){var n=e?t/e:0,o=this.totalTime,i=this.loadTime,a=this.waitTime,u=this.speed;return this.dispatchEvent(new CustomEvent("progress",{detail:{length:e,received:t,done:n,speed:u,loadTime:i,waitTime:a,totalTime:o,value:r}}))}},{key:"emitOpenEvent",value:function(){return this.dispatchEvent(new CustomEvent("open"))}},{key:"emitCloseEvent",value:function(){return this.dispatchEvent(new CustomEvent("close"))}},{key:"emitFirstByteEvent",value:function(e){return this.dispatchEvent(new CustomEvent("firstByte",{detail:{received:e}}))}},{key:"emitHeadersEvent",value:function(e){return this.dispatchEvent(new CustomEvent("headers",{detail:{headers:e}}))}},{key:"emitCompleteEvent",value:function(){return this.dispatchEvent(new CustomEvent("complete"))}},{key:"emitErrorEvent",value:function(){return this.dispatchEvent(new CustomEvent("error",{cancelable:this[R]>0}))}},{key:"emitRetryEvent",value:function(){return this.dispatchEvent(new CustomEvent("retry",{cancelable:!0}))}},{key:"emitFailEvent",value:function(){return this.dispatchEvent(new CustomEvent("fail"))}},{key:"emitPauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("pause",{cancelable:!0}))}},{key:"emitPausedEvent",value:function(){this.dispatchEvent(new CustomEvent("paused"))}},{key:"emitUnpauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("unpause",{cancelable:!0}))}},{key:"emitUnpausedEvent",value:function(){this.dispatchEvent(new CustomEvent("unpaused"))}},{key:"emitCancelEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancel",{cancelable:!0}))}},{key:"emitCancelledEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancelled"))}}])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(n.Mixin.with(o.EventTargetMixin,i.PromiseMixin));t.Elicit=V}()})),require.register("curvature/net/RtcClient.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RtcClient=void 0;var n=r("curvature/base/Mixin"),o=r("curvature/mixin/EventTargetMixin");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,r,n,o=u(c);function c(e){var t,r,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=o.call(this),r=s(t),i=500,(n="candidateTimeout")in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,t.peerClient=new RTCPeerConnection(e),t.peerClientChannel=t.peerClient.createDataChannel("chat"),t.peerClientChannel.addEventListener("open",(function(e){var r=new CustomEvent("open",{detail:e.data});r.originalEvent=e,t.dispatchEvent(r),t.connected=!0})),t.peerClientChannel.addEventListener("close",(function(e){var r=new CustomEvent("close",{detail:e.data});r.originalEvent=e,t.dispatchEvent(r),t.connected=!1})),t.peerClientChannel.addEventListener("message",(function(e){var r=new CustomEvent("message",{detail:e.data});r.originalEvent=e,t.dispatchEvent(r)})),t}return t=c,(r=[{key:"send",value:function(e){this.peerClientChannel&&this.peerClientChannel.send(e)}},{key:"close",value:function(){this.peerClientChannel&&this.peerClientChannel.close()}},{key:"offer",value:function(){var e=this;this.peerClient.createOffer().then((function(t){e.peerClient.setLocalDescription(t)}));var t=new Set;return new Promise((function(r){var n=null;e.peerClient.addEventListener("icecandidate",(function(o){o.candidate&&(t.add(o.candidate),n&&clearTimeout(n),n=setTimeout((function(){return r(e.peerClient.localDescription)}),e.candidateTimeout))}))}))}},{key:"accept",value:function(e){var t=new RTCSessionDescription(e);this.peerClient.setRemoteDescription(t)}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Mixin.with(o.EventTargetMixin));t.RtcClient=f}()})),require.register("curvature/net/RtcServer.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RtcServer=void 0;var n=r("curvature/base/Mixin"),o=r("curvature/mixin/EventTargetMixin");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,r,n,o=u(c);function c(e){var t,r,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=o.call(this),r=s(t),i=500,(n="candidateTimeout")in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,t.peerServer=new RTCPeerConnection(e),t.peerServer.addEventListener("datachannel",(function(e){t.peerServerChannel=e.channel,t.peerServerChannel.addEventListener("open",(function(e){var r=new CustomEvent("open",{detail:e.data});r.originalEvent=e,t.dispatchEvent(r),t.connected=!0})),t.peerServerChannel.addEventListener("close",(function(e){var r=new CustomEvent("close",{detail:e.data});r.originalEvent=e,t.dispatchEvent(r),t.connected=!1})),t.peerServerChannel.addEventListener("message",(function(e){var r=new CustomEvent("message",{detail:e.data});r.originalEvent=e,t.dispatchEvent(r)}))})),t}return t=c,(r=[{key:"send",value:function(e){this.peerServerChannel&&this.peerServerChannel.send(e)}},{key:"close",value:function(){this.peerServerChannel&&this.peerServerChannel.close()}},{key:"answer",value:function(e){var t=this;return new Promise((function(r){t.peerServer.setRemoteDescription(e),t.peerServer.createAnswer((function(e){return t.peerServer.setLocalDescription(e)}),(function(e){return console.error(e)}));var n=new Set,o=null;t.peerServer.addEventListener("icecandidate",(function(e){e.candidate&&(n.add(e.candidate),o&&clearTimeout(o),o=setTimeout((function(){return r(t.peerServer.localDescription)}),t.candidateTimeout))}))}))}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Mixin.with(o.EventTargetMixin));t.RtcServer=f}()})),require.register("curvature/service/CloudService.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloudService=void 0;var e=r("curvature/base/Router");function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,i,u;return r=t,u=[{key:"handleFetch",value:function(t){var r,i=new URL(t.request.url),a=i.pathname+i.search,u=o(this.routeHandlers);try{for(u.s();!(r=u.n()).done;){var c=r.value;return e.Router.match(a,{routes:c}).then((function(e){return"object"===n(e)&&e instanceof Response||(e=new Response(e)),e}))}}catch(e){u.e(e)}finally{u.f()}}}],(i=null)&&a(r.prototype,i),u&&a(r,u),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.CloudService=u,Object.defineProperty(u,"routeHandlers",{value:new Set}),globalThis.addEventListener("fetch",(function(e){e.respondWith(u.handleFetch(e))}))}()})),require.register("curvature/service/EventPipe.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function r(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.EventPipe=void 0;t.EventPipe=function(t){var n=new Headers;n.set("Access-Control-Allow-Methods","GET, OPTIONS"),n.set("Access-Control-Allow-Origin","*"),n.set("Cache-Control","no-cache"),n.set("Content-Type","text/event-stream"),n.set("Connection","keep-alive");var o,i=new TransformStream,a=i.readable,u=i.writable.getWriter(),c=new TextEncoder,s=[],l=r(t);try{for(l.s();!(o=l.n()).done;){var f=o.value;f instanceof Promise||(f=Promise.resolve(f)),f.then((function(t){var r,n;t&&"object"===e(t)||(t={data:t});var o=t.data;o=JSON.stringify(o),u.write(c.encode("event: ".concat(null!==(r=t.type)&&void 0!==r?r:"ServerEvent","\n")+"data: ".concat(o,"\n")+"id: ".concat(null!==(n=t.id)&&void 0!==n?n:Date.now(),"\n\n")))})),s.push(f)}}catch(e){l.e(e)}finally{l.f()}return Promise.all(s).then((function(){return u.close()})),new Response(a,{status:"200",statusText:"OK",headers:n})}}()})),require.register("curvature/service/Service.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Service=void 0;var e=r("../base/Router");function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function l(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,i;return r=t,i=[{key:"register",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";if(!("serviceWorker"in navigator))return Promise.reject("Service Workers not supported.");var n=navigator.serviceWorker;return n.register(e,{scope:r}),n.ready.then((function(e){var r=e.active;r&&(t.workers.set(r.scriptURL,r),n.addEventListener("message",(function(e){return t.handleResponse(e)})))})),n.ready}},{key:"request",value:function(e){var t,r=this,n=e.command,o=e.args,i=e.echo,a=e.notify,u=e.to,l=void 0===u?null:u,f=e.broadcast,p=void 0!==f&&f,y=Number(1/Math.random()).toString(36),d=new Promise((function(e){r.incomplete.set(y,e)})),v=s(this.workers);try{for(v.s();!(t=v.n()).done;){var h=c(t.value,2),b=(h[0],h[1]);if("redundant"===b.state)return Promise.reject("Worker has been updated, connection lost. Please refresh the page.");b.postMessage({correlationId:y,broadcast:p,command:n,notify:a,args:o,echo:i,to:l})}}catch(e){v.e(e)}finally{v.f()}return d}},{key:"broadcast",value:function(e){var t=e.command,r=e.args,n=e.echo,o=e.notify;this.request({command:t,args:r,echo:n,notify:o,broadcast:!0})}},{key:"handleResponse",value:function(e){var t=this;e.target.ready.then((function(e){var r=e.active;t.workers.set(r.scriptURL,r)}));var r=e.data;if(r.to||r.correlationId)if(this.incomplete.has(r.correlationId)){var n=this.incomplete.get(r.correlationId);this.incomplete.delete(r.correlationId),n(r.result)}else r.broadcast?this.handleBroadcast(e):r.to&&this.handleMessage(e)}},{key:"handleRequest",value:function(e){var t=this;if(e.origin===globalThis.origin){var r=e.data,n=Promise.resolve("Unexpected request.");if(r.echo)n=Promise.resolve(r.echo);else if(r.notify){var i=r.args||[];n=globalThis.registration.getNotifications().then((function(e){var r;return e.forEach((function(e){return t.notifications.set(e.tag,e)})),(r=globalThis.registration).showNotification.apply(r,u(i))})).then((function(){return globalThis.registration.getNotifications()})).then((function(r){var n=e.data.args&&e.data.args[1]&&e.data.args[1].tag;return new Promise((function(r){var o;t.notifyClients.has(n)?o=t.notifyClients.get(n):(o=new Map,t.notifyClients.set(n,o)),o.set(e.source,r)}))}))}else if(r.command){var c,l=r.command,f=r.args||[],p=s(this.serviceHandlers);try{for(p.s();!(c=p.n()).done;){var y=c.value;if("function"==typeof y[l]){n=y[l].apply(y,u(f));break}}}catch(e){p.e(e)}finally{p.f()}}if(a(n)!==Promise&&(n=Promise.resolve(n)),r.broadcast){var d=e.source.id;globalThis.clients.matchAll({type:"window",includeUncontrolled:!0}).then((function(e){e.forEach((function(e){n.then((function(t){return e.postMessage(o(o({},r),{},{result:t,source:d}))}))}))}))}else if(r.to){var v=e.source.id;globalThis.clients.get(r.to).then((function(e){n.then((function(t){e.postMessage(o(o({},r),{},{result:t,source:v}))}))}))}else n.then((function(t){return e.source.postMessage(o(o({},r),{},{result:t}))}))}}},{key:"handleInstall",value:function(e){globalThis.skipWaiting();var t,r=s(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleInstall&&n.handleInstall(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"handleActivate",value:function(e){var t,r=s(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleActivate&&n.handleActivate(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"handleError",value:function(e){console.error(e);var t,r=s(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleError&&n.handleError(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"handlePush",value:function(e){}},{key:"handleSync",value:function(e){}},{key:"handlePeriodicSync",value:function(e){}},{key:"handleFetch",value:function(t){var r,n=new URL(t.request.url),o=n.pathname+n.search,i=s(this.routeHandlers);try{for(i.s();!(r=i.n()).done;){var u=r.value;return e.Router.match(o,{routes:u},{event:t}).then((function(e){if(void 0!==e)return"object"===a(e)&&e instanceof Response||(e=new Response(e)),e}))}}catch(e){i.e(e)}finally{i.f()}}},{key:"handleBroadcast",value:function(e){var t,r=s(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleBroadcast&&n.handleBroadcast(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"handleMessage",value:function(e){var t,r=s(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleMessage&&n.handleMessage(e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"notify",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.tag=r.tag||([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})),new Promise((function(e,t){Notification.requestPermission((function(t){e(t)}))})).then((function(o){return t.request({notify:!0,args:[e,r],broadcast:n})}))}},{key:"handleNotifyClicked",value:function(e){if(this.notifyClients.has(e.notification.tag)){var t=this.notifyClients.get(e.notification.tag),r=[];for(t.forEach((function(t,n){t({action:e.action,data:e.notification.data,click:Date.now(),time:e.notification.timestamp,tag:e.notification.tag}),r.push(n)}));r.length&&!r.pop().focus(););this.notifyClients.delete(e.notification.tag)}var n,o=s(this.pageHandlers);try{for(o.s();!(n=o.n()).done;){var i=n.value;"function"==typeof i.handleNotifyClicked&&i.handleNotifyClicked(e)}}catch(e){o.e(e)}finally{o.f()}e.notification.close()}},{key:"handleNotifyClosed",value:function(e){if(this.notifyClients.has(e.notification.tag)&&this.notifyClients.get(e.notification.tag).forEach((function(t){return t({action:void 0,data:e.notification.data,close:Date.now(),time:e.notification.timestamp,tag:e.notification.tag})})),this.notifyClients.delete(e.notification.tag)){var t,r=s(this.pageHandlers);try{for(r.s();!(t=r.n()).done;){var n=t.value;"function"==typeof n.handleNotifyDismissed&&n.handleNotifyDismissed(e)}}catch(e){r.e(e)}finally{r.f()}}var o,i=s(this.pageHandlers);try{for(i.s();!(o=i.n()).done;){var a=o.value;"function"==typeof a.handleNotifyClosed&&a.handleNotifyClosed(e)}}catch(e){i.e(e)}finally{i.f()}}}],(n=null)&&p(r.prototype,n),i&&p(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.Service=y,Object.defineProperty(y,"serviceHandlers",{value:new Set}),Object.defineProperty(y,"routeHandlers",{value:new Set}),Object.defineProperty(y,"pageHandlers",{value:new Set}),Object.defineProperty(y,"notifications",{value:new Map}),Object.defineProperty(y,"notifyClients",{value:new Map}),Object.defineProperty(y,"incomplete",{value:new Map}),Object.defineProperty(y,"workers",{value:new Map}),globalThis.document||(globalThis.addEventListener("install",(function(e){return y.handleInstall(e)})),globalThis.addEventListener("activate",(function(e){return y.handleActivate(e)})),globalThis.addEventListener("error",(function(e){return y.handleActivate(e)})),globalThis.addEventListener("message",(function(e){return y.handleRequest(e)})),globalThis.addEventListener("fetch",(function(e){e.waitUntil(new Promise((function(t){y.handleFetch(e).then((function(r){r&&e.respondWith(r),t()}))})))})),globalThis.addEventListener("push",(function(e){return y.handlePush(e)})),globalThis.addEventListener("notificationclose",(function(e){return y.handleNotifyClosed(e)})),globalThis.addEventListener("notificationclick",(function(e){return y.handleNotifyClicked(e)})),globalThis.addEventListener("sync",(function(e){return y.handleSync(e)})),globalThis.addEventListener("periodicsync",(function(e){return y.handlePeriodicSync(e)})))}()})),require.register("curvature/toast/Toast.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Toast=void 0;var n=r("../base/View"),o=r("../base/Bindable"),i=r("./ToastAlert");function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(l,e);var t,r,n,s=c(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this)).template='\n\t\t\t<div id = "[[_id]]" cv-each = "alerts:alert" class = "toast">\n\t\t\t\t[[alert]]\n\t\t\t</div>\n\t\t',e.args.alerts=[],e}return t=l,n=[{key:"instance",value:function(){return this.inst||(this.inst=new this),this.inst}}],(r=[{key:"pop",value:function(e){var t=this;this.args.alerts.length,this.args.alerts.push(e),e.decay(function(e){return function(){for(var r in t.args.alerts)if(o.Bindable.ref(t.args.alerts[r])===o.Bindable.ref(e))return e.remove(),void delete t.args.alerts[r]}}(e))}},{key:"alert",value:function(e,t,r){return this.pop(new i.ToastAlert({title:e,body:t,time:r}))}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(n.View);t.Toast=f}()})),require.register("curvature/toast/ToastAlert.js",(function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ToastAlert=void 0;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,r,a,u=i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).args.running=!1,t.args.time=t.args.time||16e3,t.init=t.args.time,t.args.title=t.args.title||"Standard alert",t.args.status="new",t.args.body=t.args.body||"This is a standard alert.",t.template='\n\t\t\t<div id = "[[_id]]" class = "alert toast-[[status]]">\n\t\t\t\t<h3>[[title]]</h3>\n\t\t\t\t<p>[[body]]</p>\n\t\t\t</div>\n\t\t',t}return t=c,(r=[{key:"decay",value:function(e){var t=this;this.args.running=!0,this.onTimeout(50,(function(){t.args.status=""})),this.onTimeout(300,(function(){t.args.status="decaying"})),this.onTimeout(2400,(function(){t.args.status="imminent"})),this.onTimeout(3500,(function(){t.remove()}))}}])&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),c}(r("../base/View").View);t.ToastAlert=c}()})),require.register("___globals___",(function(e,t,r){}))}(),require("___globals___");
