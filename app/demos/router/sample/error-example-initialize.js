import { View    } from 'curvature/base/View';
import { Router  } from 'curvature/base/Router';
import { RuleSet } from 'curvature/base/RuleSet';

import { ErrorExampleLayout } from './ErrorExampleLayout';

const layout = new ErrorExampleLayout;

layout.render(document.body);

Router.listen(layout, {

	'': class extends View{
		template = '<p>This is the index page.</p><hr /><p>The current date and time is [[time]].<p>';
		onAttached(){ this.onFrame(()=>this.args.time = String(new Date)) }
	}

	, string: 'This page is just a string!'

	, function: () => 'This page is the result of a callback!'

	, promise: () => new Promise((accept, reject) => {
		layout.args.content = 'loading...';
		setTimeout(()=>accept('This page is generated by a promise!'), 500);
	})

	, error: () => new Promise((accept, reject) => {
		layout.args.content = 'loading...';
		setTimeout(()=>reject('Fake internal error!'), 500);
	})

	, [Router.NotFoundError]: '404 - Page not found!'

});
